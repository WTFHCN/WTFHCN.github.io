<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>NaCNer</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2021-01-16T01:18:52.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>HCN</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>About me</title>
    <link href="http://yoursite.com/2022/12/31/%E6%9D%BF%E5%AD%90/"/>
    <id>http://yoursite.com/2022/12/31/%E6%9D%BF%E5%AD%90/</id>
    <published>2022-12-31T02:47:00.000Z</published>
    <updated>2021-01-16T01:18:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://cfrating.rbs.workers.dev/?username=SorryNaCN" alt=""></p><p><img src="https://cfrating.rbs.workers.dev/?username=NaCNer" alt=""></p><p><img src="https://cfrating.rbs.workers.dev/?username=misakicoca" alt=""></p><a id="more"></a><p>æ¬è¿ä¸­</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://cfrating.rbs.workers.dev/?username=SorryNaCN&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cfrating.rbs.workers.dev/?username=NaCNer&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cfrating.rbs.workers.dev/?username=misakicoca&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>è®­ç»ƒè®°å½•</title>
    <link href="http://yoursite.com/2021/12/31/%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95/"/>
    <id>http://yoursite.com/2021/12/31/%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95/</id>
    <published>2021-12-31T02:47:00.000Z</published>
    <updated>2021-05-04T08:56:03.946Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è®­ç»ƒæ—¥ç¨‹"><a href="#è®­ç»ƒæ—¥ç¨‹" class="headerlink" title="è®­ç»ƒæ—¥ç¨‹"></a>è®­ç»ƒæ—¥ç¨‹</h2><ul><li><p>âˆš  ä»£è¡¨èµ›ä¸­AC</p></li><li><p>Â· ä»£è¡¨èµ›ä¸­å°è¯•ä½†æœªAC</p></li><li><p>O ä»£è¡¨èµ›åAC</p></li><li><p>-  ä»£è¡¨é¢˜ç›®ä¸å­˜åœ¨</p></li><li><p>?  ä»£è¡¨å¯¹é¢˜ç›®/æ ‡ç¨‹å­˜ç–‘</p></li><li><p>Ã— ä»£è¡¨é¢˜ç›®/æ ‡ç¨‹æœ‰é—®é¢˜</p></li></ul><h3 id="å›¢é˜Ÿæ‘¸é±¼"><a href="#å›¢é˜Ÿæ‘¸é±¼" class="headerlink" title="å›¢é˜Ÿæ‘¸é±¼"></a>å›¢é˜Ÿæ‘¸é±¼</h3><div class="table-container"><table><thead><tr><th>date</th><th>contest</th><th>rank</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th><th>G</th><th>H</th><th>I</th><th>J</th><th>K</th><th>L</th><th>M</th><th>N</th><th>O</th></tr></thead><tbody><tr><td>2021/05/02</td><td>gym103049</td><td>143/307</td><td>âˆš</td><td></td><td>âˆš</td><td>âˆš</td><td>O</td><td>âˆš</td><td></td><td>âˆš</td><td>O</td><td></td><td>âˆš</td><td>-</td><td>-</td><td>-</td><td>-</td></tr><tr><td>2021/05/01</td><td>gym103055</td><td>148/644</td><td>âˆš</td><td>O</td><td>âˆš</td><td>O</td><td></td><td>âˆš</td><td>âˆš</td><td></td><td>O</td><td>âˆš</td><td></td><td>âˆš</td><td>âˆš</td><td>-</td><td>-</td></tr></tbody></table></div><a id="more"></a><p><details><br>  <summary>è„‘ç˜«é—®é¢˜é¦–å‘</summary></p><ul><li>$s.earse(åœ°å€)$</li><li>é€’å½’æ˜¯ç”¨å…¨å±€$vetor$</li><li>çº¿æ®µæ ‘$if(!tag[pos])$</li><li>å¯æ’¤é”€å¹¶æŸ¥é›†å¯ä»¥é‡‡ç”¨<strong>ä¿æŒåˆå¹¶å‰æ‰€æœ‰ä¿¡æ¯</strong></li><li>å¤šé¡¹å¼ $å¦‚æœ while(ML&lt;n+m-1)$ ,$n,mä¸ºé¡¹æ•°$ï¼Œå¦‚æœ$ML\leq n+m$<br>$n,m$ä¸ºæœ€é«˜é¡¹ç³»æ•°ï¼Œ$sqrt,Invâ€¦.$ç­‰å€’å…¥çš„æ˜¯é¡¹æ•°ï¼ˆæœ‰å¤šå°‘é¡¹ï¼‰ã€‚</li><li>å¤šé¡¹å¼åˆå¹¶æ—¶æ³¨æ„é™åˆ¶é¡¹æ•°ã€‚</li><li>çº¿æ®µæ ‘æ³¨æ„$lazy$çš„åˆå§‹åŒ–</li><li>å…¬å¼åŒ–çš„ç¦»æ•£åŒ–çº¿æ®µå˜æˆå·¦å¼€å³é—­  </li><li>ç›´å¾„çœ‹æ¸…æ¥šæ˜¯å¦éœ€è¦$-1$</li><li>è™šæ ‘æ³¨æ„æ¸…ç©ºè¯¥æ¸…ç©ºçš„</li><li>å¤šç»´$dp$è½¬ç§»æ³¨æ„è¾¹ç•Œ</li><li>åç¼€æ ‘ä¸Š$lcp(i,j)=len(lca(i,j))$</li><li>å…¨æ’åˆ—äºŒé¡¹å¼å®šç†ï¼Œä¹Ÿè¦è€ƒè™‘å•ç‹¬æ¦‚ç‡è€ƒè™‘</li><li>éšæœºåŒ–ä½¿ç”¨$std::mt19937 rnd(std::chrono::steady_clock::now().time_since_epoch().count());$</li><li>æ ‘é“¾å‰–åˆ†æ³¨æ„$top[rt]$ï¼Œæ³¨æ„$w[dfn[x]]$</li><li>$KruskalTreeé‡æ„æ ‘$å¼€ä¸¤å€ç©ºé—´ã€‚</li><li>è´Ÿæ•°å‘ä¸‹å–æ•´$&gt;&gt;1$</li><li>$KruskalTreeé‡æ„æ ‘$æ˜¯ç‰¹èƒ–å¶å­èŠ‚ç‚¹$g[x].size()\leq 1$!!,å¯ä»¥å‡å°‘ç‰¹èƒ–</li><li>å­—å…¸åºè¡¨ç¤ºå…ˆå­—æ¯å¤§å°å†é•¿åº¦</li><li>äºŒåˆ†å›¾çš„æœ€å¤§å›¢=è¡¥å›¾çš„æœ€å¤§ç‹¬ç«‹é›†ã€‚ï¼Œæœ€å¤§ç‹¬ç«‹é›†=æ‰€æœ‰é¡¶ç‚¹æ•°-æœ€å°é¡¶ç‚¹è¦†ç›–ï¼Œæœ€å°é¡¶ç‚¹è¦†ç›–ç­‰äºäºŒåˆ†å›¾çš„æœ€å¤§åŒ¹é…ã€‚</li><li>Boruvkaç®—æ³•å¿«ã€‚</li><li>æè¶…çº¿æ®µæ ‘$\max,\min$ é‡Œé¢éƒ½è¦ä»”ç»†æ”¹</li><li>ç‚¹åˆ†æ²»çš„æ—¶å€™è®°ä½æƒ…å†µåº”è¯¥æ¸…ç©ºçš„æ•°æ®ç»“æ„ï¼Œè¦è®°ä½æœ‰$a[rt]$è¿™ä¸ªç‚¹ä¹Ÿè¦åŠ å…¥ã€‚</li><li>map.count!!!!!</li></ul><details><!-- ### ç‰›å®¢å¤šæ ¡+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬ä¸€åœºï¼‰](https://ac.nowcoder.com/acm/contest/5666)  $solve(2/10)$,$upsolve(2/10)$+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬äºŒåœºï¼‰](https://ac.nowcoder.com/acm/contest/5667) $solve(1/11)$,$upsolve(9/11)$+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬ä¸‰åœºï¼‰](https://ac.nowcoder.com/acm/contest/5668) $solve(5/12)$,$upsolve(9/12)$+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬å››åœºï¼‰](https://ac.nowcoder.com/acm/contest/5669) $solve(3/10)$,$upsolve(4/10)$+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬äº”åœºï¼‰](https://ac.nowcoder.com/acm/contest/5670) $solve(4/11)$,$upsolve(8/10)$+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬å…­åœºï¼‰](https://ac.nowcoder.com/acm/contest/5671) $solve(2/11)$,$upsolve(6/11)$+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬ä¸ƒåœºï¼‰](https://ac.nowcoder.com/acm/contest/5672) + [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬å…«åœºï¼‰](https://ac.nowcoder.com/acm/contest/5673) $solve(3/11)$,$upsolve(5/11)$+ [2020ç‰›å®¢æš‘æœŸå¤šæ ¡è®­ç»ƒè¥ï¼ˆç¬¬ä¹åœºï¼‰](https://ac.nowcoder.com/acm/contest/5673) $solve(3/11)$,$upsolve(10/12)$ -->]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;è®­ç»ƒæ—¥ç¨‹&quot;&gt;&lt;a href=&quot;#è®­ç»ƒæ—¥ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;è®­ç»ƒæ—¥ç¨‹&quot;&gt;&lt;/a&gt;è®­ç»ƒæ—¥ç¨‹&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;âˆš  ä»£è¡¨èµ›ä¸­AC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Â· ä»£è¡¨èµ›ä¸­å°è¯•ä½†æœªAC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;O ä»£è¡¨èµ›åAC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;-  ä»£è¡¨é¢˜ç›®ä¸å­˜åœ¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;?  ä»£è¡¨å¯¹é¢˜ç›®/æ ‡ç¨‹å­˜ç–‘&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Ã— ä»£è¡¨é¢˜ç›®/æ ‡ç¨‹æœ‰é—®é¢˜&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;å›¢é˜Ÿæ‘¸é±¼&quot;&gt;&lt;a href=&quot;#å›¢é˜Ÿæ‘¸é±¼&quot; class=&quot;headerlink&quot; title=&quot;å›¢é˜Ÿæ‘¸é±¼&quot;&gt;&lt;/a&gt;å›¢é˜Ÿæ‘¸é±¼&lt;/h3&gt;&lt;div class=&quot;table-container&quot;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;date&lt;/th&gt;
&lt;th&gt;contest&lt;/th&gt;
&lt;th&gt;rank&lt;/th&gt;
&lt;th&gt;A&lt;/th&gt;
&lt;th&gt;B&lt;/th&gt;
&lt;th&gt;C&lt;/th&gt;
&lt;th&gt;D&lt;/th&gt;
&lt;th&gt;E&lt;/th&gt;
&lt;th&gt;F&lt;/th&gt;
&lt;th&gt;G&lt;/th&gt;
&lt;th&gt;H&lt;/th&gt;
&lt;th&gt;I&lt;/th&gt;
&lt;th&gt;J&lt;/th&gt;
&lt;th&gt;K&lt;/th&gt;
&lt;th&gt;L&lt;/th&gt;
&lt;th&gt;M&lt;/th&gt;
&lt;th&gt;N&lt;/th&gt;
&lt;th&gt;O&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;2021/05/02&lt;/td&gt;
&lt;td&gt;gym103049&lt;/td&gt;
&lt;td&gt;143/307&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2021/05/01&lt;/td&gt;
&lt;td&gt;gym103055&lt;/td&gt;
&lt;td&gt;148/644&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;O&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;âˆš&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;td&gt;-&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>P7323 [WC2021] æ‹¬å·è·¯å¾„</title>
    <link href="http://yoursite.com/2021/04/10/P7323/"/>
    <id>http://yoursite.com/2021/04/10/P7323/</id>
    <published>2021-04-10T02:47:00.000Z</published>
    <updated>2021-04-26T13:40:04.431Z</updated>
    
    <content type="html"><![CDATA[<p>é¢˜æ„ï¼š$n$ ç‚¹ $2m$ è¾¹æœ‰å‘å›¾ï¼Œæœ‰ $k$ ä¸ªæ‹¬å·ç±»å‹ã€‚è¾“å…¥ $u,v,w$ è¡¨ç¤ºæœ‰ä¸€æ¡ä» $u$ åˆ° $v$ï¼Œæ‹¬å·ç±»å‹ä¸º $w$ çš„å·¦æ‹¬å·å’Œä¸€æ¡é€š $v$ åˆ° $u$ï¼Œæ‹¬å·ç±»å‹ä¸º $w$ çš„å³æ‹¬å·ã€‚é—®æœ‰å¤šå°‘ä¸ªæ— åºç‚¹å¯¹æ»¡è¶³å®ƒä»¬ä¸­çš„ä¸€æ¡æœ‰å‘è·¯å¾„çš„æ‹¬å·è¿æˆçš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªåˆæ³•æ‹¬å·åŒ¹é…ä¸²ã€‚<br><a id="more"></a></p><p>è€ƒè™‘$u\rightarrow v$ï¼Œåˆ™$v\rightarrow u$,</p><p>åˆ$u\rightarrow t ,t\rightarrow v$ï¼Œåˆ™ä¸€å®šå­˜åœ¨ $u\rightarrow v$ã€‚</p><p>è€ƒè™‘æœ€ç®€å•çš„å•ä¸ªæ‹¬å·$u\rightarrow a\leftarrow v$,åˆ™æœ‰$u,v$ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼ŒæŠŠæ–¹å‘å˜åå°±å¥½ç»Ÿè®¡äº†</p><p>$u\rightarrow a\leftarrow v$ å¦‚æœåˆå¹¶äº†è¿™ä¸ªï¼Œé‚£ä¹ˆç›¸å½“äºç¼©ç‚¹äº†ã€‚<br>è¦æŠŠ$v$å‡ºå»çš„å’Œ$u$å‡ºå»çš„å†åˆå¹¶ä¸€è¾¹è¿™é‡Œå¾—å¯å‘å¼åˆå¹¶æ‰¾åˆå¹¶çš„è¾¹ï¼Œåæ­£æœ€å¤š$m$æ¡è¾¹ã€‚</p><p>æ ¹æ®ç¬¬äºŒä¸ªå®šç†å’Œç¬¬ä¸€ä¸ªå®šç†ï¼Œåœ¨ä¸€ä¸ªé›†åˆå†…ä¸¤ä¸¤äº’é€šï¼Œç›¸å½“äºæ— å‘è¾¹äº†ã€‚/<br>å¤æ‚åº¦åº”è¯¥æ˜¯$O(m\log^2n)$</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, k;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; k;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">fa</span><span class="params">(n)</span></span>;</span><br><span class="line">    iota(fa.<span class="built_in">begin</span>(), fa.<span class="built_in">end</span>(), <span class="number">0</span>);</span><br><span class="line">    function&lt;<span class="keyword">int</span>(<span class="keyword">int</span>)&gt; <span class="built_in">find</span> = [&amp;](<span class="keyword">int</span> x) &#123; <span class="keyword">return</span> fa[x] == x ? x : fa[x] = <span class="built_in">find</span>(fa[x]); &#125;;</span><br><span class="line">    vector&lt;map&lt;int, int&gt;&gt; cnt(n);</span><br><span class="line">    <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; q;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> merge = [&amp;](<span class="keyword">int</span> u, <span class="keyword">int</span> v) &#123;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="built_in">find</span>(u);</span><br><span class="line">        <span class="keyword">int</span> y = <span class="built_in">find</span>(v);</span><br><span class="line">        <span class="keyword">if</span> (x == y)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (cnt[x].<span class="built_in">size</span>() &gt; cnt[y].<span class="built_in">size</span>())</span><br><span class="line">            swap(x, y);</span><br><span class="line">        fa[x] = y;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> [i, j] : cnt[x])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (cnt[y].count(i))</span><br><span class="line">            &#123;</span><br><span class="line">                q.push(&#123;cnt[y][i], j&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                cnt[y][i] = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v, w;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v &gt;&gt; w;</span><br><span class="line">        u--, v--, w--;</span><br><span class="line">        <span class="keyword">if</span> (cnt[v].count(w))</span><br><span class="line">            q.push(&#123;cnt[v][w], u&#125;);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            cnt[v][w] = u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!q.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> [u, v] = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        merge(u, v);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">size</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="built_in">size</span>[<span class="built_in">find</span>(i)]++;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">find</span>(i) == i)</span><br><span class="line">            ans += <span class="number">1l</span>l * <span class="built_in">size</span>[i] * (<span class="built_in">size</span>[i] - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">int</span> T = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//cin &gt;&gt; T;</span></span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    &#123;</span><br><span class="line">        solve();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¢˜æ„ï¼š$n$ ç‚¹ $2m$ è¾¹æœ‰å‘å›¾ï¼Œæœ‰ $k$ ä¸ªæ‹¬å·ç±»å‹ã€‚è¾“å…¥ $u,v,w$ è¡¨ç¤ºæœ‰ä¸€æ¡ä» $u$ åˆ° $v$ï¼Œæ‹¬å·ç±»å‹ä¸º $w$ çš„å·¦æ‹¬å·å’Œä¸€æ¡é€š $v$ åˆ° $u$ï¼Œæ‹¬å·ç±»å‹ä¸º $w$ çš„å³æ‹¬å·ã€‚é—®æœ‰å¤šå°‘ä¸ªæ— åºç‚¹å¯¹æ»¡è¶³å®ƒä»¬ä¸­çš„ä¸€æ¡æœ‰å‘è·¯å¾„çš„æ‹¬å·è¿æˆçš„å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªåˆæ³•æ‹¬å·åŒ¹é…ä¸²ã€‚&lt;br&gt;
    
    </summary>
    
    
    
      <category term="å¯å‘å¼åˆå¹¶" scheme="http://yoursite.com/tags/%E5%90%AF%E5%8F%91%E5%BC%8F%E5%90%88%E5%B9%B6/"/>
    
  </entry>
  
  <entry>
    <title>CF1238G. Adilbek and the Watering System</title>
    <link href="http://yoursite.com/2021/01/01/CF1238G/"/>
    <id>http://yoursite.com/2021/01/01/CF1238G/</id>
    <published>2021-01-01T02:47:00.000Z</published>
    <updated>2021-01-04T13:03:31.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰ä¸€ä¸ªå®¹é‡ä¸º$c$çš„æ°´ç®±ï¼Œåˆå§‹æ˜¯$c0$.</p><p>æ¯æ—¶åˆ»ä¼šæ‰$1ml$æ»´æ°´ã€‚</p><p>æœ‰$n$ä¸ªäººï¼Œåœ¨$t_i$æ—¶åˆ»æ¥ï¼Œæœ€å¤šå¸¦æ¥$a_i$æ°´ï¼Œæ¯æ¯«å‡$b_i$å…ƒã€‚</p><p>è¦è®©æ°´ç®±å¯ä»¥åšæŒåˆ°$m$æ—¶åˆ»ã€‚</p><p>æ±‚æœ€å°èŠ±è´¹ã€‚</p><a id="more"></a><p>è´ªå¿ƒã€‚ã€‚ã€‚ã€‚</p><p>å¾ˆå¦™ã€‚æ˜¾ç„¶å½“è¦ç”¨åˆ°æ°´çš„æ—¶å€™å†ç”¨æ°´ï¼Œå¹¶ä¸”ç”¨ä»·æ ¼æœ€å°‘çš„ã€‚</p><p>å‡è®¾å…ˆæŠŠæ°´éƒ½æ”¾è¿›å»ï¼Œä¸ç®¡å®¹é‡ã€‚æ¯æ¬¡å‘ç°è¦ç”¨æ°´çš„æ—¶å€™ï¼Œä»é‡Œé¢å–å‡ºæœ€å°çš„å³å¯ã€‚</p><ul><li>å¦‚æœæˆ‘å–å‡ºæ¥ï¼Œå¯¼è‡´ä¹‹å‰æœ¬æ¥å¯ä»¥è¿‡çš„è¿‡ä¸å»å‘¢ï¼Ÿæ”¾å¿ƒæ¯æ¬¡è¿‡éœ€è¦æ°´çš„æ—¶å€™æŒ‰æ—¶é—´è®¡ç®—äº†ã€‚</li></ul><p>å¦‚æœè€ƒè™‘å®¹é‡ï¼Œå¦‚æœæˆ‘è£…æ»¡äº†ï¼Œå¹¶ä¸”å‘ç°æˆ‘çš„æ°´å¤šä½™äº†ï¼Œé‚£æˆ‘å¯ä»¥å–ä»£é‚£äº›é¢„å‡†å¤‡è´¹ç”¨å¤§äºä»–çš„æ°´ã€‚</p><p>ç”¨<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt;q;</span><br></pre></td></tr></table></figure><br>$q[x]$è¡¨ç¤ºä»·æ ¼ä¸º$x$çš„æ°´åœ¨å‡†å¤‡åŒºæœ‰å¤šå°‘ã€‚</p><p>ä¸€äº›å°ç»†èŠ‚æ³¨æ„</p><ul><li>åˆå§‹åŒ–å‡†å¤‡åŒºçš„æ°´ï¼Œä»¥åŠ$q[0]$ã€‚</li><li>æ¯æ¬¡éœ€è¦ç”¨æ°´ï¼Œå‡†å¤‡åŒºé‡Œçš„æ°´éœ€è¦å‡ã€‚</li><li>æ°´æº¢å‡ºéœ€è¦çš„ç»†èŠ‚</li></ul><p>å¼¹å‡ºå‡†å¤‡åŒºçš„æ°´å¤æ‚åº¦æœ€å¤š$O(n\log n)$</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll int64_t</span></span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m, c, c0;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; c &gt;&gt; c0;</span><br><span class="line">    vector&lt;array&lt;int, 3&gt;&gt; tmp(n + 2);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; tmp[i][<span class="number">0</span>] &gt;&gt; tmp[i][<span class="number">1</span>] &gt;&gt; tmp[i][<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    tmp[n + <span class="number">1</span>] = &#123;m, <span class="number">0</span>, <span class="number">0</span>&#125;;</span><br><span class="line">    sort(tmp.<span class="built_in">begin</span>(), tmp.<span class="built_in">end</span>());</span><br><span class="line">    <span class="built_in">map</span>&lt;<span class="keyword">int</span>, ll&gt; q;</span><br><span class="line">    ll ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> now = c0;</span><br><span class="line">    q[<span class="number">0</span>] = c0;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; tmp.<span class="built_in">size</span>(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">auto</span> [t, A, b] = tmp[i];</span><br><span class="line">        <span class="keyword">int</span> del = t - tmp[i - <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (del &gt; c)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">while</span> (!q.empty() &amp;&amp; del &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> w = <span class="built_in">min</span>(q.<span class="built_in">begin</span>()-&gt;second, <span class="number">1l</span>l * del);</span><br><span class="line">            q.<span class="built_in">begin</span>()-&gt;second -= w, del -= w, now -= w;</span><br><span class="line">            ans += <span class="number">1l</span>l * w * q.<span class="built_in">begin</span>()-&gt;first;</span><br><span class="line">            <span class="keyword">if</span> (q.<span class="built_in">begin</span>()-&gt;second == <span class="number">0</span>)</span><br><span class="line">                q.erase(q.<span class="built_in">begin</span>());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (del)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">int</span> add = <span class="built_in">min</span>(c - now, A);</span><br><span class="line">        now += add;</span><br><span class="line">        <span class="keyword">while</span> (!q.empty() &amp;&amp; A - add &gt; <span class="number">0</span> &amp;&amp; b &lt; q.rbegin()-&gt;first)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">auto</span> it = q.rbegin();</span><br><span class="line">            <span class="keyword">if</span> (A - add &gt;= it-&gt;second)</span><br><span class="line">            &#123;</span><br><span class="line">                add += it-&gt;second;</span><br><span class="line">                q.erase(--q.<span class="built_in">end</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                it-&gt;second -= A - add;</span><br><span class="line">                add = A;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        q[b] += add;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; ans &lt;&lt; endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; solve() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰ä¸€ä¸ªå®¹é‡ä¸º$c$çš„æ°´ç®±ï¼Œåˆå§‹æ˜¯$c0$.&lt;/p&gt;
&lt;p&gt;æ¯æ—¶åˆ»ä¼šæ‰$1ml$æ»´æ°´ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰$n$ä¸ªäººï¼Œåœ¨$t_i$æ—¶åˆ»æ¥ï¼Œæœ€å¤šå¸¦æ¥$a_i$æ°´ï¼Œæ¯æ¯«å‡$b_i$å…ƒã€‚&lt;/p&gt;
&lt;p&gt;è¦è®©æ°´ç®±å¯ä»¥åšæŒåˆ°$m$æ—¶åˆ»ã€‚&lt;/p&gt;
&lt;p&gt;æ±‚æœ€å°èŠ±è´¹ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="è´ªå¿ƒ" scheme="http://yoursite.com/tags/%E8%B4%AA%E5%BF%83/"/>
    
  </entry>
  
  <entry>
    <title>æ•°å­¦å…¬å¼</title>
    <link href="http://yoursite.com/2020/12/31/%E4%B8%80%E4%BA%9B%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/"/>
    <id>http://yoursite.com/2020/12/31/%E4%B8%80%E4%BA%9B%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</id>
    <published>2020-12-31T02:47:00.000Z</published>
    <updated>2020-11-01T08:12:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¿˜è®°å¤ªå¤šäº†..<br><a id="more"></a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¿˜è®°å¤ªå¤šäº†..&lt;br&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>ä¹±ä¸ƒå…«ç³Ÿé¢˜è§£</title>
    <link href="http://yoursite.com/2020/12/31/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F%E9%A2%98%E8%A7%A3/"/>
    <id>http://yoursite.com/2020/12/31/%E4%B9%B1%E4%B8%83%E5%85%AB%E7%B3%9F%E9%A2%98%E8%A7%A3/</id>
    <published>2020-12-31T02:47:00.000Z</published>
    <updated>2020-12-25T14:31:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>é¸½å­çš„é¢˜è§£å¤ªå¤šäº†ã€‚åªå¥½ç›´æ¥å†™ã€‚</p><!-- TOC --><ul><li><a href="#gym">GYM</a><ul><li><a href="#2019-ccpc-å“ˆå°”æ»¨">2019-CCPC-å“ˆå°”æ»¨</a><ul><li><a href="#b-binary-numbers">B. Binary Numbers</a></li><li><a href="#e-exchanging-gifts">E. Exchanging Gifts</a></li><li><a href="#i-interesting-permutation">I. Interesting Permutation</a></li><li><a href="#l-lru-algorithm">L. LRU Algorithm</a></li></ul></li><li><a href="#300iq-contest-1">300iq Contest 1</a><ul><li><a href="#bbest-subsequence">B.Best Subsequence</a></li><li><a href="#ccool-pairs">C.Cool Pairs</a></li><li><a href="#d-dates">D. Dates</a></li><li><a href="#f-free-edges">F. Free Edges</a></li><li><a href="#k-knowledge">K. Knowledge</a></li></ul></li><li><a href="#icpc-asia-east-continent-final">ICPC Asia-East Continent Final</a><ul><li><a href="#hking">H.King</a></li></ul></li></ul></li><li><a href="#é›…ç¤¼é›†è®­">é›…ç¤¼é›†è®­</a><ul><li><a href="#loj6029-é›…ç¤¼é›†è®­-2017-day1å¸‚åœº">LOJ6029. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å¸‚åœº</a></li><li><a href="#loj6030-é›…ç¤¼é›†è®­-2017-day1çŸ©é˜µ">LOJ6030. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€çŸ©é˜µ</a></li><li><a href="#loj6031-é›…ç¤¼é›†è®­-2017-day1å­—ç¬¦ä¸²">LOJ6031. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å­—ç¬¦ä¸²</a></li><li><a href="#loj6032-é›…ç¤¼é›†è®­-2017-day2æ°´ç®±">LOJ6032. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ°´ç®±</a></li><li><a href="#loj6033-é›…ç¤¼é›†è®­-2017-day2æ£‹ç›˜æ¸¸æˆ">LOJ6033. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ£‹ç›˜æ¸¸æˆ</a></li><li><a href="#loj6034-é›…ç¤¼é›†è®­-2017-day2çº¿æ®µæ¸¸æˆ">LOJ6034. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€çº¿æ®µæ¸¸æˆ</a></li><li><a href="#loj6035-é›…ç¤¼é›†è®­-2017-day4æ´—è¡£æœ">LOJ6035. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€æ´—è¡£æœ</a></li><li><a href="#loj6036-é›…ç¤¼é›†è®­-2017-day4ç¼–ç ">LOJ6036. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€ç¼–ç </a></li><li><a href="#loj6038-é›…ç¤¼é›†è®­-2017-day5è¿œè¡Œ">LOJ6038. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€è¿œè¡Œ</a></li><li><a href="#loj6039-é›…ç¤¼é›†è®­-2017-day5ç å®">LOJ6039. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€ç å®</a></li><li><a href="#loj6040-é›…ç¤¼é›†è®­-2017-day5çŸ©é˜µ">LOJ6040. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€çŸ©é˜µ</a></li><li><a href="#loj6041-é›…ç¤¼é›†è®­-2017-day7äº‹æƒ…çš„ç›¸ä¼¼åº¦">LOJ6041. ã€Œé›…ç¤¼é›†è®­ 2017 Day7ã€äº‹æƒ…çš„ç›¸ä¼¼åº¦</a></li><li><a href="#loj6045-é›…ç¤¼é›†è®­-2017-day8ä»·">LOJ6045. ã€Œé›…ç¤¼é›†è®­ 2017 Day8ã€ä»·</a></li></ul></li><li><a href="#codeforces">Codeforces</a><ul><li><a href="#cf1358f-tasty-cookie">CF1358F Tasty Cookie</a></li><li><a href="#cf1367f2-flying-sort-hard-version">CF1367F2 Flying Sort (Hard Version)</a></li><li><a href="#cf1368e-ski-accidents">CF1368E Ski Accidents</a></li><li><a href="#cf1374e2-reading-books-hard-version">CF1374E2 Reading Books (hard version)</a></li><li><a href="#cf1380g-circular-dungeon">CF1380G Circular Dungeon</a></li><li><a href="#cf1384d-gamegame">CF1384D. GameGame</a></li><li><a href="#cf1387b1-village-minimum">CF1387B1 Village (Minimum)</a></li><li><a href="#cf1387b2-village-maximum">CF1387B2 Village (Maximum)</a></li><li><a href="#cf1399e2-weights-division-hard-version">CF1399E2 Weights Division (hard version)</a></li><li><a href="#cf1354c2-not-so-simple-polygon-embedding">CF1354C2. Not So Simple Polygon Embedding</a></li><li><a href="#cf1354f-summoning-minions">CF1354F. Summoning Minions</a></li><li><a href="#cf1354g-find-a-gift">CF1354G. Find a Gift</a></li><li><a href="#cf1421e-swedish-heroes">CF1421E. Swedish Heroes</a></li><li><a href="#cf1353f-decreasing-heights">CF1353F. Decreasing Heights</a></li><li><a href="#cf1353e-k-periodic-garland">CF1353E. K-periodic Garland</a></li><li><a href="#cf1427e--xum">CF1427E . Xum</a></li><li><a href="#cf1344drÃ©sumÃ©-review">CF1344D.RÃ©sumÃ© Review</a></li><li><a href="#cf1344c-quantifier-question">CF1344C Quantifier Question</a></li><li><a href="#cf1363f-rotating-substrings">CF1363F Rotating Substrings</a></li><li><a href="#cf1408e-avoid-rainbow-cycles">CF1408E Avoid Rainbow Cycles</a></li><li><a href="#cf1408f-two-different">CF1408F Two Different</a></li><li><a href="#cf1422f-boring-queries">CF1422F Boring Queries</a></li><li><a href="#cf1437g---death-dbms">CF1437G - Death DBMS</a></li><li><a href="#cf1436f-sum-over-subsets">CF1436F. Sum Over Subsets</a></li><li><a href="#cf1443f---identify-the-operations">CF1443F - Identify the Operations</a></li><li><a href="#cf1443e---long-permutation">CF1443E - Long Permutation</a></li><li><a href="#cf19d">CF19D</a></li><li><a href="#cf204e-little-elephant-and-strings">CF204E Little Elephant and Strings</a></li><li><a href="#cf793c-mice-problem">CF793C Mice problem</a></li><li><a href="#cf1285e-delete-a-segment">CF1285E Delete a Segment</a></li><li><a href="#cf1451e-bitwise-queries">CF1451E Bitwise Queries</a></li><li><a href="#cf1452e-two-editorials">CF1452E Two Editorials</a></li><li><a href="#cf1158b-the-minimal-unique-substring">CF1158B The minimal unique substring</a></li><li><a href="#cf1158c-permutation-recovery">CF1158C Permutation recovery</a></li><li><a href="#cf1251e2-voting-hard-version">CF1251E2 Voting (Hard Version)</a></li><li><a href="#cf1283f-diy-garland">CF1283F DIY Garland</a></li><li><a href="#cf1461f-mathematical-expression">CF1461F Mathematical Expression</a></li><li><a href="#cf1462f-the-treasure-of-the-segments">CF1462F The Treasure of The Segments</a></li><li><a href="#cf1463e-plan-of-lectures">CF1463E Plan of Lectures</a></li><li><a href="#cf1464b-grime-zoo">CF1464B Grime Zoo</a></li><li><a href="#cf1464c-poman-numbers">CF1464C Poman Numbers</a></li></ul></li><li><a href="#æ´›è°·">æ´›è°·</a><ul><li><a href="#p4103-heoi2014å¤§å·¥ç¨‹">P4103 [HEOI2014]å¤§å·¥ç¨‹</a></li><li><a href="#p5504-jsoi2011æŸ æª¬">P5504 [JSOI2011]æŸ æª¬</a></li><li><a href="#p2542-ahoi2005-èˆªçº¿è§„åˆ’">P2542 [AHOI2005] èˆªçº¿è§„åˆ’</a></li></ul></li><li><a href="#atcoder">Atcoder</a><ul><li><a href="#atcoder-grand-contest-048">AtCoder Grand Contest 048</a></li><li><a href="#acl-beginner-contest">ACL Beginner Contest</a><ul><li><a href="#f---heights-and-pairs">F - Heights and Pairs</a></li></ul></li></ul></li><li><a href="#ç‰›å®¢">ç‰›å®¢</a><ul><li><a href="#icpcå°ç±³é‚€è¯·èµ›2">ICPCå°ç±³é‚€è¯·èµ›2</a><ul><li><a href="#a2020">A.2020</a></li><li><a href="#isubsequence-pair">I.Subsequence Pair</a></li></ul></li></ul></li></ul><!-- /TOC --><a id="more"></a><h1 id="GYM"><a href="#GYM" class="headerlink" title="GYM"></a>GYM</h1><h2 id="2019-CCPC-å“ˆå°”æ»¨"><a href="#2019-CCPC-å“ˆå°”æ»¨" class="headerlink" title="2019-CCPC-å“ˆå°”æ»¨"></a>2019-CCPC-å“ˆå°”æ»¨</h2><h3 id="B-Binary-Numbers"><a href="#B-Binary-Numbers" class="headerlink" title="B. Binary Numbers"></a>B. Binary Numbers</h3><p>$f(a,b)$å³$a,b$çš„æœ€é•¿å…¬å…±å‰ç¼€é•¿åº¦ï¼Œç„¶åæš´åŠ›æ‰“è¡¨ï¼Œå¯ä»¥çŸ¥é“$a,b$è¶Šç›¸è¿‘ï¼Œ$f(a,b)è¶Šå¤§$ï¼Œä»æ¯ä¸ªåŒºé—´é‡Œé€‰å‡ºä¸€ä¸ªä»£è¡¨æ•°å­—$A i$ï¼Œå¦‚æœå¯¹äºæ‰€æœ‰åŒºé—´$i$ï¼Œæ»¡è¶³$f ( A_i , k ) â‰¥ f ( A_j , k )$,$L_iâ‰¤kâ‰¤R_i$ã€‚</p><p>æ˜¾ç„¶æ ¹æ®å•è°ƒæ€§</p><ul><li>$f ( A_{i-1} , R_{i-1} ) â‰¥ f ( A_{i} , R_{i-1})$</li></ul><ul><li>$f ( A_i , L_i ) â‰¥ f ( A_{i-1} , L_i )$</li></ul><p>$f ( A_{i-1} , L_i ),f ( A_{i-1} , R_{i-1} )$å½“ä½œ$dp[i-1][][]$çš„çŠ¶æ€å»è½¬ç§»ï¼Œæ ¹æ®ä¸¤ä¸ªæ¡ä»¶çœ‹æ˜¯å¦è½¬ç§»ï¼Œä»¥åŠæ›´æ–°çŠ¶æ€å³å¯ã€‚</p><h3 id="E-Exchanging-Gifts"><a href="#E-Exchanging-Gifts" class="headerlink" title="E. Exchanging Gifts"></a>E. Exchanging Gifts</h3><p><strong>è¯·å…ˆææ¸…æ¥šï¼ŒåŸºæœ¬æœ€å¤§å¿«ä¹å€¼å¦‚ä½•æ±‚</strong>ã€‚</p><p>ä¸¤ä¸ªæ“ä½œå¯ä»¥æƒ³æˆä¸€é¢—æ ‘ï¼Œç„¶åæ ¹æ®æœ€åéœ€è¦çš„å‘ä¸‹ç±»ä¼¼$dp$,æœ€åå¾—åˆ°æŸäº›æ•°çš„æ•°é‡ã€‚</p><p>å°±æ˜¯æ¯”è¾ƒæœ€å¤§å€¼å’Œæ€»å’Œä¹‹é—´å¤§å°çš„åˆ†ç±»è®¨è®ºã€‚</p><h3 id="I-Interesting-Permutation"><a href="#I-Interesting-Permutation" class="headerlink" title="I. Interesting Permutation"></a>I. Interesting Permutation</h3><p>è€ƒè™‘æ¯æ¬¡å°±ç›¸å½“äºä¸€ä¸ªåŒºé—´é•¿åº¦ï¼Œ$tmp=$å¯æ’ç©ºä½</p><ul><li>$h_{i+1}=h_i$,$ans=ans\times tmp,tmp-1$</li><li>$h_{i+1}&gt;h_i$,$ans=2\times ans,tmp=tmp+h_{i+1}-h_i-1$,è¡¨ç¤ºæ–°çš„æ•°å¯ä»¥æ’å‰é¢å’Œåé¢ã€‚å¹¶ä¸”æ›´æ–°å¯æ’ç©ºä½ã€‚</li></ul><h3 id="L-LRU-Algorithm"><a href="#L-LRU-Algorithm" class="headerlink" title="L. LRU Algorithm"></a>L. LRU Algorithm</h3><p>æ‰¾åˆ°è§„å¾‹å‘ç°ï¼Œå†…å­˜å…¶å®æ— æ‰€è°“ï¼Œå‡è®¾å†…å­˜æ— é™å¤§ï¼Œé‚£ä¹ˆå¯¹äºæœ‰å†…å­˜å»å‰é¢$k$ä¸ªå³å¯ï¼Œè½»æ¾å¯ä»¥é¢„å¤„ç†$hash[n][k]$ï¼Œç„¶åæ¯æ¬¡æš´åŠ›æŸ¥æ‰¾å³å¯ã€‚æ³¨æ„$0$ã€‚</p><h2 id="300iq-Contest-1"><a href="#300iq-Contest-1" class="headerlink" title="300iq Contest 1"></a>300iq Contest 1</h2><h3 id="B-Best-Subsequence"><a href="#B-Best-Subsequence" class="headerlink" title="B.Best Subsequence"></a>B.Best Subsequence</h3><p>é€†å‘æ€ç»´å–åˆ å‡ºç›¸é‚»æœ€å¤§çš„ä¸€å®šæœ€ä¼˜ã€‚ç”¨$set$æ¨¡æ‹Ÿå³å¯ã€‚</p><h3 id="C-Cool-Pairs"><a href="#C-Cool-Pairs" class="headerlink" title="C.Cool Pairs"></a>C.Cool Pairs</h3><p>è½¬åŒ–æˆ$a_i&lt; -b_j=z_j$ï¼Œè¿™ç±»æ„é€ å…ˆè€ƒè™‘$k=0$,ç›´æ¥$z_j=-n$ï¼Œå†å°†$a_i$æŒ‰ç…§é¡ºåºå˜$[-n,-1]$ã€‚ç„¶åæ…¢æ…¢è°ƒæ•´$z_j$å¤§å°ã€‚</p><ul><li>å¦‚æœä¸å¤Ÿï¼Œç›´æ¥è®¾$z_j=1$,å°±å¯ä»¥è¦†ç›–$j-1$ä¸ª$a_i$ã€‚</li><li>å¦‚æœå¤Ÿäº†ï¼Œå°†$i&lt;j$çš„$a_i$ï¼Œæ’ä¸ªåºæ‰¾åˆ°ç¬¬$k$å°çš„$a$,$z_j$ç›´æ¥ç­‰äºå°±å¥½äº†ï¼Œå¹¶ä¸”ç»“æŸï¼Œç”±äº$a_i$æ˜¯è´Ÿçš„ï¼Œä¿è¯$z_j$å•è°ƒé€’å‡ã€‚</li></ul><h3 id="D-Dates"><a href="#D-Dates" class="headerlink" title="D. Dates"></a>D. Dates</h3><p>æ¯ä¸ªå¦¹å­åŒ¹é…ä¸€ä¸ªæ—¶é—´åŒºé—´ï¼Œæ¯ä¸ªæ—¶é—´æœ€å¤šé€‰æ‹©ğ‘ğ‘–ä¸ªå¦¹å­ï¼Œæ¯ä¸ªå¦¹å­æœ‰ä¸€ä¸ªå¿«ä¹å€¼ï¼Œæœ€å¤§åŒ–æ€»å¿«ä¹å€¼ã€‚</p><p>ç”±äºä¸€ä¸ªå¦¹å­æœ€å¤šåªä¼šå ç”¨å…¶ä»–å¦¹å­çš„çº¦ä¼šæ—¶é—´ï¼Œæ‰€ä»¥è´ªå¿ƒçš„é€‰æ‹©å¿«ä¹å€¼æ€»æ²¡é”™ã€‚</p><p>é‚£ä¹ˆé¢˜æ„å°±å˜æˆé€‰æ‹©å¦¹å­æ˜¯å¦å¯ä»¥ä¿è¯èƒ½æˆåŠŸè¿‡åŒ¹é…ã€‚</p><p>å¯¹äºä»»æ„åŒºé—´$[i,j]$ï¼ŒåŒºé—´$[i,j]$ä¸­é€‰ä¸­å¦¹å­çš„æ•°é‡éœ€è¦å°äºç­‰äºè¿™ä¸ªåŒºé—´å’Œã€‚</p><p>æ­¤æ—¶ç›¸å½“äºåˆ¤æ–­æ˜¯å¦æ‰€æœ‰å­é›†çš„é‚»åŸŸï¼ˆå³ä¸å…¶ç›¸é‚»çš„ç‚¹æ„æˆçš„é›†åˆï¼‰å¤§å°éƒ½æ¯”å­é›†æœ¬èº«å¤§ã€‚ç”±äº$L_i\leq L_{i+1},R_i\leq R_{i+1}$ï¼Œå·¦ä¾§çš„åŒºé—´çš„æƒ…å†µåªæœ‰$n^2$ç§ã€‚</p><p>$c[j]-c[i-1]\leq s[r_j]-s[l_i-1]$</p><p>$c[j]-s[r_j]\leq c[i-1]-s[l_i-1]$</p><p>è€ƒè™‘æˆ‘åŠ å…¥ä¸€ä¸ªé€‰ä¸­ä¸€ä¸ªå¦¹å­çš„æ—¶å€™å·¦ä¾§$[j,n]$ä¼šå‘ç”Ÿå˜åŒ–ã€‚å³ä¾§$[j+1,n]$ä¼šå‘ç”Ÿå˜åŒ–ã€‚åˆ¤æ–­å˜åŒ–çš„é‚£ç«¯æ˜¯å¦å‘ç”Ÿå·¦ä¾§æœ€å¤§å€¼$[j,n]$æ˜¯å¦å¤§äºå³ä¾§æœ€å°å€¼$[1,j]$äº†ã€‚</p><p>ä¸ç„¶æ’¤å›æ“ä½œã€‚</p><h3 id="F-Free-Edges"><a href="#F-Free-Edges" class="headerlink" title="F. Free Edges"></a>F. Free Edges</h3><p>é—®è‡³å°‘åˆ æ‰å¤šå°‘æ¡è¾¹åå›¾ä¸­ä¸å­˜åœ¨ç¯ã€‚å¹¶èŒ¶å‡ çå‡ æŠŠæ‰¾ä¸€æ‰¾å°±å¥½äº†</p><h3 id="K-Knowledge"><a href="#K-Knowledge" class="headerlink" title="K. Knowledge"></a>K. Knowledge</h3><p>æ¯æ¬¡å¯ä»¥åˆ åŠ æ‰$aa$,$bb$,$ababab$ã€‚</p><p>å‘ç°ä»»ä½•å­—ç¬¦ä¸²éƒ½å¯ä»¥å˜æˆä¸€ä¸ªæœ€çŸ­æ— æ³•å˜çŸ­å­—ç¬¦ä¸²<br>æ‰¾åˆ°å…³é”®çš„å‡ ä¸ªå˜åŒ–</p><ul><li>$aa\rightarrow$</li><li>$bbb\rightarrow$</li><li>$abba \rightarrow bab$</li><li>$ababa\rightarrow bb$</li><li>$abba\rightarrow bab$</li><li>$baba\rightarrow abb$</li></ul><p>å¤šå†™ä¸€ç‚¹å°±å¥½äº†ï¼Œç„¶åå‘ç°å°±$12$ä¸ªä¸ºåŸºåº•çš„å­—ç¬¦ä¸²ã€‚</p><p>ç„¶åå³ä»$k$é•¿åº¦çš„å­—ç¬¦ä¸²å˜æˆ$s$,è€ƒè™‘$12$ä¸ªçš„äº’ç›¸å˜æ¢å…³ç³»ï¼Œç›¸å½“ä¸èµ°è·¯å¾„ä¸€æ ·ï¼ŒæŸ¥çœ‹ä»$x$èµ°åˆ°$y$æœ‰å‡ ç§èµ°æ³•ï¼Œè¿™é‡Œå°±æ˜¯ä»ç©ºå­—ç¬¦ä¸²èµ°$k$æ­¥ï¼Œæœ‰å¤šå°‘ç§å˜æˆ$s$çš„è·¯å¾„ç§ç±»ï¼ŒçŸ©é˜µå¿«é€Ÿå¹‚å³å¯ã€‚</p><h2 id="ICPC-Asia-East-Continent-Final"><a href="#ICPC-Asia-East-Continent-Final" class="headerlink" title="ICPC Asia-East Continent Final"></a>ICPC Asia-East Continent Final</h2><h3 id="H-King"><a href="#H-King" class="headerlink" title="H.King"></a>H.King</h3><p>æ‰¾åˆ°$qa_i \equiv a_{i+1} \pmod p$,$\geq n/2$çš„æœ€é•¿å­åºåˆ—ã€‚<br>$q\equiv a_{i+1}a^{-1}_i \pmod p$</p><p>$\geq n/2$çš„æœ€é•¿å­åºåˆ—ã€‚å¿…å®šå­˜åœ¨ç›¸é‚»çš„$a_i$ã€‚</p><p>éšæœºåŒ–æšä¸¾å³å¯ã€‚</p><h1 id="é›…ç¤¼é›†è®­"><a href="#é›…ç¤¼é›†è®­" class="headerlink" title="é›…ç¤¼é›†è®­"></a>é›…ç¤¼é›†è®­</h1><h2 id="LOJ6029-ã€Œé›…ç¤¼é›†è®­-2017-Day1ã€å¸‚åœº"><a href="#LOJ6029-ã€Œé›…ç¤¼é›†è®­-2017-Day1ã€å¸‚åœº" class="headerlink" title="LOJ6029. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å¸‚åœº"></a>LOJ6029. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å¸‚åœº</h2><p>å½“çº¿æ®µæ ‘ä¸Šçš„ç‚¹$max[pos]-min[pos]&lt; d$å°±ä¼šå˜æˆå‡æ³•ï¼Œè€Œ$\sum a_i+d$ï¼Œåªä¼šæ”¹å˜ä¸¤ä¸ª$max-min$ã€‚å³æˆ‘æœ€å¤šéœ€è¦é™¤$qlog(q\times 10^4)$ã€‚<br>éœ€è¦ä¸€ä¸ªæ”¯æŒæœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼ŒåŒºé—´å’Œçš„çº¿æ®µæ ‘å³å¯ã€‚</p><h2 id="LOJ6030-ã€Œé›…ç¤¼é›†è®­-2017-Day1ã€çŸ©é˜µ"><a href="#LOJ6030-ã€Œé›…ç¤¼é›†è®­-2017-Day1ã€çŸ©é˜µ" class="headerlink" title="LOJ6030. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€çŸ©é˜µ"></a>LOJ6030. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€çŸ©é˜µ</h2><p>å…ˆæ„é€ ä¸€è¡Œéƒ½æ˜¯#,ç„¶åå¡«å……ç«–å³å¯ã€‚ï¼ˆæ³¨æ„éœ€è¦æ³¨æ„å·²ç»$ok$çš„ç«–ï¼Œä»¥åŠå¡«å……æ­¤è¡Œåªéœ€è¦æœ‰è¿™è¡Œçš„ç«–ï¼Œæˆ–è€…<strong>èŠ±è´¹ä¸€æ¬¡æ„é€ è¿™ä¸ªç«–</strong></p><h2 id="LOJ6031-ã€Œé›…ç¤¼é›†è®­-2017-Day1ã€å­—ç¬¦ä¸²"><a href="#LOJ6031-ã€Œé›…ç¤¼é›†è®­-2017-Day1ã€å­—ç¬¦ä¸²" class="headerlink" title="LOJ6031. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å­—ç¬¦ä¸²"></a>LOJ6031. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å­—ç¬¦ä¸²</h2><p>$qk\leq 10^5$</p><ul><li><p>$k\leq 300$ï¼Œæš´åŠ›è·³æ‰€æœ‰å­ä¸²ï¼Œç„¶åæš´åŠ›äºŒåˆ†è¯¢é—®$mp[l][r]ï¼Œåœ¨[a,b]$ä¸­æœ‰å‡ ä¸ª,å¯ä»¥ç¦»çº¿åšåˆ°$O(qk^2)$ï¼Œåœ¨çº¿å°±æ˜¯$O(qk^2\log n)$</p></li><li><p>$q\leq300$,ä»$1$èµ°å­ä¸²ä¿è¯åç¼€é‚£ç§ï¼Œæ¯èµ°åˆ°$r$ï¼Œéœ€æœ‰æ‰€æœ‰çš„$l$,è¿™ä¸ªæ—¶å€™å€å¢å¾€ä¸Šè·³å¯»æ‰¾$siz$æœ€å¤§ã€‚$O(qm\log n)$</p></li></ul><h2 id="LOJ6032-ã€Œé›…ç¤¼é›†è®­-2017-Day2ã€æ°´ç®±"><a href="#LOJ6032-ã€Œé›…ç¤¼é›†è®­-2017-Day2ã€æ°´ç®±" class="headerlink" title="LOJ6032. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ°´ç®±"></a>LOJ6032. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ°´ç®±</h2><p>æŒ‰ç…§é«˜åº¦æ’åºï¼Œï¼ˆæ³¨æ„è¿™é‡Œéœ€è¦å…ˆåˆå¹¶å†å¤„ç†é‚£äº›æ¡ä»¶),$ans[x]$è¡¨ç¤º$x$ä¸ªå—çš„ç­”æ¡ˆï¼Œ$f[x]$è¡¨ç¤ºç›®å‰ä¸ºæ­¢æœ‰æ°´éœ€æ±‚çš„æ•°é‡ã€‚</p><ul><li>è€ƒè™‘åˆå¹¶ï¼Œåˆå¹¶ç­”æ¡ˆå³å¯ã€‚</li><li>è€ƒè™‘æœ‰æ°´ï¼Œåˆ™$f[find(x)]$++,æ›´æ–°ç­”æ¡ˆ$ans[x]$</li><li>è€ƒè™‘æ— æ°´ï¼Œåˆ™ç›´æ¥æ›´æ–°$ans[x]$</li></ul><h2 id="LOJ6033-ã€Œé›…ç¤¼é›†è®­-2017-Day2ã€æ£‹ç›˜æ¸¸æˆ"><a href="#LOJ6033-ã€Œé›…ç¤¼é›†è®­-2017-Day2ã€æ£‹ç›˜æ¸¸æˆ" class="headerlink" title="LOJ6033. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ£‹ç›˜æ¸¸æˆ"></a>LOJ6033. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ£‹ç›˜æ¸¸æˆ</h2><p>äºŒåˆ†å›¾åšå¼ˆï¼Œå³æ‰¾åˆ°é‚£äº›ç‚¹æ˜¯éå¿…é¡»ç‚¹ã€‚å³åˆ é™¤äº†ä¹‹åå¯¹æœ€å¤§åŒ¹é…æ²¡å½±å“ã€‚è€ƒè™‘ä¸€ä¸ªéåŒ¹é…ç‚¹ğ‘¥ï¼Œå‡å¦‚å®ƒè¿å‘äº†ä¸€ä¸ªåŒ¹é…ç‚¹ğ‘¦ï¼Œé‚£ä¹ˆå®ƒå°±èƒ½æ›¿æ¢æ‰å½“å‰å½“å‰å’Œè¿™ä¸ªåŒ¹é…ç‚¹åŒ¹é…çš„ç‚¹ğ‘§ï¼Œè€Œè¿™æ—¶ğ‘§ä¹Ÿå¯ä»¥è¿›è¡ŒåŒæ ·çš„æ“ä½œã€‚</p><p>é¦–å…ˆæ ¹æ®æ—¶é—´æˆ³çš„åŒˆç‰™åˆ©ç®—æ³•å¯ä»¥æ‰¾åˆ°æ‰€æœ‰å¯èƒ½çš„åŒ¹é…ç‚¹ï¼Œç„¶åæ‰¾éåŒ¹é…ç‚¹ã€‚</p><p>äºæ˜¯æˆ‘ä»¬ä»æ¯ä¸ªéåŒ¹é…ğ‘¥å‡ºå‘è¿›è¡Œğ‘‘ğ‘“ğ‘ ï¼Œé€”ç»çš„å’Œğ‘¥åŒä¸€é›†åˆçš„ç‚¹éƒ½æ»¡è¶³è¦æ±‚ã€‚</p><h2 id="LOJ6034-ã€Œé›…ç¤¼é›†è®­-2017-Day2ã€çº¿æ®µæ¸¸æˆ"><a href="#LOJ6034-ã€Œé›…ç¤¼é›†è®­-2017-Day2ã€çº¿æ®µæ¸¸æˆ" class="headerlink" title="LOJ6034. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€çº¿æ®µæ¸¸æˆ"></a>LOJ6034. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€çº¿æ®µæ¸¸æˆ</h2><p>æè¶…çº¿æ®µæ ‘æ¨¡ç‰ˆé¢˜ã€‚</p><h2 id="LOJ6035-ã€Œé›…ç¤¼é›†è®­-2017-Day4ã€æ´—è¡£æœ"><a href="#LOJ6035-ã€Œé›…ç¤¼é›†è®­-2017-Day4ã€æ´—è¡£æœ" class="headerlink" title="LOJ6035. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€æ´—è¡£æœ"></a>LOJ6035. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€æ´—è¡£æœ</h2><p>è€ƒè™‘åªæ´—è¡£æœï¼Œåˆ™ç”¨ä¼˜å…ˆé˜Ÿåˆ—ç»´æŠ¤å½“å‰æœ€å°æ´—è¡£æ—¶é—´ã€‚å°±å¯ä»¥å¾—åˆ°æ´—$k$é—´è¡£æœéœ€è¦çš„æœ€çŸ­æ—¶é—´ã€‚åŒæ ·å¤„ç†çƒ˜å¹²è¡£æœçš„æ—¶é—´ã€‚</p><p>è€ƒè™‘åˆ°æ‰€æœ‰è¡£æœéƒ½è¢«çƒ˜å¹²åçƒ˜å¹²æœºå…¨éƒ¨æ˜¯ç©ºçš„ï¼Œå¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹å€’è¿‡æ¥ï¼Œè¿™æ ·å­å°±å’Œæ´—è¡£æœä¸€æ ·ã€‚å³å½“$i$è¡£æœæ´—å®Œåï¼Œé€‰å¦‚æœå½“ç¬¬$p_i$çƒ˜å¹²çš„åˆ™æ—¶é—´</p><script type="math/tex; mode=display">\max(a_1+b_{p_1},a_2+b_{p_2}....a_n+b_{p_n})</script><p>é¡ºåºå’Œå¤§äºç­‰äºä¹±åºå’Œå¤§äºç­‰äºé€†åºå’Œ,æ±‚ä¸ªé€†åºå’Œå³å¯ã€‚</p><h2 id="LOJ6036-ã€Œé›…ç¤¼é›†è®­-2017-Day4ã€ç¼–ç "><a href="#LOJ6036-ã€Œé›…ç¤¼é›†è®­-2017-Day4ã€ç¼–ç " class="headerlink" title="LOJ6036. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€ç¼–ç "></a>LOJ6036. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€ç¼–ç </h2><p>å¯ä»¥å¾—åˆ°ä¸€ä¸ª$O(n^2)$çš„2-SATã€‚<br>è€ƒè™‘å¦‚ä½•ä¼˜åŒ–</p><p>é¦–å…ˆæŒ‰ç…§é•¿åº¦æ’åºï¼Œå°±å¯ä»¥å‡å°‘ä¸å¿…è¦çš„åˆ†ç±»è®¨è®ºã€‚</p><p>å¦‚æœæœ‰éå†åˆ°å‰ç¼€ï¼Œé‚£ä¹ˆè¿æ¥ä¸¤ä¸ªç‚¹è¡¨ç¤ºä¸èƒ½åŒæ—¶æˆç«‹ã€‚</p><p>åœ¨æœ€åä¸èƒ½æŠŠè¿™ä¸ªæƒ…å†µç›´æ¥å‹å…¥ç»ˆæ­¢èŠ‚ç‚¹ï¼Œä¼šå¯¼è‡´æŸä¸ªèŠ‚ç‚¹å¤ªå¤šç‚¹ã€‚è€ƒè™‘æ¯æ¬¡æ–°å»ºç‚¹ï¼Œ$new$ä¸èƒ½ä¸$old$åŒæ—¶æˆç«‹ï¼Œä½†éœ€è¦å’Œ$tmp$åŒæ—¶æˆç«‹ã€‚</p><h2 id="LOJ6038-ã€Œé›…ç¤¼é›†è®­-2017-Day5ã€è¿œè¡Œ"><a href="#LOJ6038-ã€Œé›…ç¤¼é›†è®­-2017-Day5ã€è¿œè¡Œ" class="headerlink" title="LOJ6038. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€è¿œè¡Œ"></a>LOJ6038. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€è¿œè¡Œ</h2><p>åªå¯èƒ½æ˜¯ç›´å¾„ä¸Šçš„ç‚¹ï¼Œç”¨LCTå’Œå¹¶æŸ¥é›†åŠ¨æ€ç»´æŠ¤ç›´å¾„å³å¯ã€‚</p><h2 id="LOJ6039-ã€Œé›…ç¤¼é›†è®­-2017-Day5ã€ç å®"><a href="#LOJ6039-ã€Œé›…ç¤¼é›†è®­-2017-Day5ã€ç å®" class="headerlink" title="LOJ6039. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€ç å®"></a>LOJ6039. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€ç å®</h2><p>å¯¹äº$C$ä¸€æ ·çš„ç‰©å“ï¼Œæˆ‘ä»¬è¦é€‰è‚¯å®šæ˜¯è¦å…ˆé€‰ä»·å€¼å¤§çš„ï¼Œæ‰€ä»¥$sum$æ•°ç»„æ˜¯ä¸€ä¸ªä¸Šå‡¸çš„</p><p>$i&lt;j$ä¸”$i$çš„å†³ç­–ç‚¹ä¸º$p$ï¼Œå³æœ‰ä»»æ„$s&lt;p$æ»¡è¶³ $dp[s]+sum[s,i]&lt;dp[p]+sum[p,i]$,ç„¶åå†³ç­–å•è°ƒæ€§å³å¯ã€‚ </p><h2 id="LOJ6040-ã€Œé›…ç¤¼é›†è®­-2017-Day5ã€çŸ©é˜µ"><a href="#LOJ6040-ã€Œé›…ç¤¼é›†è®­-2017-Day5ã€çŸ©é˜µ" class="headerlink" title="LOJ6040. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€çŸ©é˜µ"></a>LOJ6040. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€çŸ©é˜µ</h2><p>  å’•å’•</p><h2 id="LOJ6041-ã€Œé›…ç¤¼é›†è®­-2017-Day7ã€äº‹æƒ…çš„ç›¸ä¼¼åº¦"><a href="#LOJ6041-ã€Œé›…ç¤¼é›†è®­-2017-Day7ã€äº‹æƒ…çš„ç›¸ä¼¼åº¦" class="headerlink" title="LOJ6041. ã€Œé›…ç¤¼é›†è®­ 2017 Day7ã€äº‹æƒ…çš„ç›¸ä¼¼åº¦"></a>LOJ6041. ã€Œé›…ç¤¼é›†è®­ 2017 Day7ã€äº‹æƒ…çš„ç›¸ä¼¼åº¦</h2><p>å»ºå¥½linkæ ‘ä¹‹åã€‚</p><ul><li>ç»™å®šä¸€æ£µæ ‘ï¼Œæ¯ä¸ªç‚¹æœ‰ä¸€ä¸ªæƒå€¼$(ğ‘šğ‘¥ğ‘™ğ‘’ğ‘›)$ï¼Œè¯¢é—®ç¼–å·åœ¨ä¸€æ®µåŒºé—´å†…çš„ç‚¹ä¸¤ä¸¤ä¹‹é—´$ğ‘™ğ‘ğ‘$æƒå€¼çš„æœ€å¤§å€¼ã€‚</li></ul><p>ç¦»çº¿æ¥çœ‹ï¼Œå¯¹äºä¸€ä¸ªç‚¹ä»–åˆ°æ ¹èŠ‚ç‚¹çš„éƒ½è¦æ‰“ä¸Šæ ‡è®°ï¼Œå¦‚æœä¸‹æ¬¡è®¿é—®åˆ°åˆ™è¡¨ç¤ºå­˜åœ¨$lca$.å…¶å®å°±æ˜¯åŠ¨æ€ç»´æŠ¤æ‰€æœ‰çš„$lca$å‡ºç°çš„æ—¶æœºã€‚</p><p>è‹¥é‡åˆ°äº†ä»¥å‰æ‰“çš„æ ‡è®°ï¼Œåˆ™è¯¥èŠ‚ç‚¹ä¸ºæ—§æ ‡è®°ä¸æ–°æ ‡è®°çš„$lca$ ã€‚è´ªå¿ƒå¯å¾—åº”æŠŠæ ‡è®°å°½é‡<strong>è¦†ç›–ä¸ºè¾ƒå¤§çš„å€¼</strong>ï¼Œå·²ç»åªä¼šç»´æŠ¤$[i,r]$ä¹‹é—´åŒºé—´ã€‚</p><h2 id="LOJ6045-ã€Œé›…ç¤¼é›†è®­-2017-Day8ã€ä»·"><a href="#LOJ6045-ã€Œé›…ç¤¼é›†è®­-2017-Day8ã€ä»·" class="headerlink" title="LOJ6045. ã€Œé›…ç¤¼é›†è®­ 2017 Day8ã€ä»·"></a>LOJ6045. ã€Œé›…ç¤¼é›†è®­ 2017 Day8ã€ä»·</h2><hr><h1 id="Codeforces"><a href="#Codeforces" class="headerlink" title="Codeforces"></a>Codeforces</h1><h2 id="CF1358F-Tasty-Cookie"><a href="#CF1358F-Tasty-Cookie" class="headerlink" title="CF1358F Tasty Cookie"></a>CF1358F Tasty Cookie</h2><ul><li>ç¿»è½¬$a$æ•°åˆ—</li><li>å°†$a$æ•°åˆ—å˜æˆä»–çš„å‰ç¼€å’Œ</li></ul><p>å‰ç¼€å’Œä¸æ–­å¢å¤§å¾—å¾ˆå¿«ã€‚$n\geq 3$æ¨¡æ‹Ÿå³å¯ï¼Œä½ é—®æˆ‘å’‹æ¨¡æ‹Ÿï¼Œ$std$,æ»¡è¶³å•è°ƒå¢å°±å·®åˆ†ï¼Œä¸æ»¡è¶³å°±å€’ç½®ï¼Œå¦åˆ™å°±$-1$ã€‚</p><p>$n=2$,å°±ç‰¹åˆ«éº»çƒ¦ã€‚</p><ul><li>æ ¹æ®ä¸Šé¢˜ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæœ¬æ¥å·®åˆ†çš„éƒ¨åˆ†å¿«é€Ÿå·®åˆ†ï¼Œ</li><li>å¦‚æœå¿«é€Ÿå·®åˆ†è¿‡ç¨‹ä¸­å‡ºç°$a$æ•°ç»„ï¼Œä¸¤ä¸¤ç‰¹åˆ¤ã€‚</li><li>ä»¥ä¸Šæƒ…å†µéƒ½æ²¡æœ‰å¹¶ä¸”è¢«å·®åˆ†åˆ°æŸä¸ªæ•°$=0$,$-1$</li></ul><p>ä¹‹åå°±æ˜¯çœ‹æ¸…é¢˜æ„å†™æ•´é½</p><h2 id="CF1367F2-Flying-Sort-Hard-Version"><a href="#CF1367F2-Flying-Sort-Hard-Version" class="headerlink" title="CF1367F2 Flying Sort (Hard Version)"></a>CF1367F2 Flying Sort (Hard Version)</h2><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸­é—´çš„æ•°å­—æ˜¯ä¸èƒ½æ’è¿›å»çš„ï¼Œæ‰€ä»¥è¿™ç»„æ•°æ˜¯åœ¨æ’åºåä»ç›¸é‚»çš„æ•°ï¼Œåˆ™è¦æ‰¾åˆ°æœ€é•¿çš„å­åºåˆ—ã€‚</p><p>å¯¹äºç›¸åŒæ•°å­—çš„è€ƒç©¶ã€‚</p><ul><li>å¦‚æœä¸€ä¸ªæ•°å½“ç¬¬ä¸€ä½ä»¥åŠæœ€åä¸€ä½ï¼Œæ•°é‡æ˜¯å¯ä»¥ä»»æ„ã€‚</li><li>å¦åˆ™å¿…é¡»å…¨éƒ¨æ•°å­—åŠ è¿›å»ã€‚</li></ul><p>å…ˆç¦»æ•£åŒ–ä¸€ä¸‹ã€‚<br>æˆ‘ä»¬å¯ä»¥è¿™æ ·$dp$,$dp[i]$ï¼Œè¡¨ç¤º$[1,i]$æœ€é•¿çš„ä¸ä¸¥æ ¼å¢åºåˆ—</p><ul><li>æŠŠ$a[i]-1$å½“ä¸­é—´çš„æ•°å­—ï¼Œåˆ™$dp[i]=dp[l[a[i]-1]+cnt[a[i]-1]$</li><li>æŠŠ$a[i]-1$å½“ç¬¬ä¸€çš„æ•°å­—ï¼Œåˆ™$dp[i]=cnt[a[i]-1]+1$</li><li>æŠŠ$a[i]$å½“æœ€åä¸€ä½çš„æ•°å­—ï¼Œåˆ™$dp[i]=dp[pre[a[i]]]+1$</li></ul><h2 id="CF1368E-Ski-Accidents"><a href="#CF1368E-Ski-Accidents" class="headerlink" title="CF1368E Ski Accidents"></a>CF1368E Ski Accidents</h2><p>æœ‰ $n$ ä¸ªé¡¶ç‚¹ï¼Œä»¥åŠ $m$æ¡æœ‰å‘è¾¹ï¼Œæ‰€æœ‰æœ‰å‘è¾¹$(u,v)$ å‡æ»¡è¶³ $u&lt;v$ ï¼Œä¸”æ‰€æœ‰é¡¶ç‚¹çš„å‡ºåº¦éƒ½ä¸è¶…è¿‡ $2$ ï¼Œè¦æ±‚ä»ä¸­åˆ å»ä¸è¶…è¿‡ $\frac{4}{7}$ä¸ªé¡¶ç‚¹ï¼Œä½¿å¾—å›¾ä¸­ä¸å­˜åœ¨é•¿åº¦è¶…è¿‡$1$ çš„è·¯å¾„ã€‚</p><p>å¦‚æœæ˜¯å®Œå…¨äºŒå‰æ ‘æ˜¾ç„¶å¯ä»¥çš„$4/7$ã€‚è€ƒè™‘åå‘å»ºè¾¹ï¼Œå¦‚æœæ‰¾åˆ°é•¿åº¦ä¸º $2$çš„è·¯å¾„çš„é¡¶ç‚¹æ—¶ï¼Œå°†é¡¶ç‚¹ $i$ åˆ æ‰å³å¯,å¹¶ä¸”ç”±äºé¢˜ç›®æ‰€ç»™$u&lt;v$ï¼Œå°±ä¸ä¼šæœ‰åæ•ˆæ€§äº†ã€‚</p><h2 id="CF1374E2-Reading-Books-hard-version"><a href="#CF1374E2-Reading-Books-hard-version" class="headerlink" title="CF1374E2 Reading Books (hard version)"></a>CF1374E2 Reading Books (hard version)</h2><p>æ€è·¯å¾ˆæ˜æ˜¾ï¼Œå…ˆç¦»æ•£åŒ–ç¦»çº¿ï¼Œåé¢åšæƒå€¼çº¿æ®µæ ‘ç¬¬$k$å¤§ã€‚åˆ«æŠŠçº¿æ®µæ ‘å†™é”™äº†ã€‚</p><h2 id="CF1380G-Circular-Dungeon"><a href="#CF1380G-Circular-Dungeon" class="headerlink" title="CF1380G Circular Dungeon"></a>CF1380G Circular Dungeon</h2><p>è‡ªå·±åšå‡ºæ¥çš„ï¼ŒæŒ‰ç…§å®ç®±å¤§å°å»åˆ†é…é‡åˆ°$k$ä¸ªä¹‹å‰çš„ä»·å€¼ã€‚è¿™é‡Œå¯ä»¥æå‰é¢„å¤„ç†ï¼Œå‰ç¼€å’Œå³å¯ã€‚æ³¨æ„ä¸‹æ— æ³•$(n-i)\mod i \not = 0$å³å¯ã€‚</p><h2 id="CF1384D-GameGame"><a href="#CF1384D-GameGame" class="headerlink" title="CF1384D. GameGame"></a>CF1384D. GameGame</h2><p>å¯¹äºæ¯ä½æ¥è¯´å¦‚æœå¼‚æˆ–ä½$0$,åˆ™è¿™ä½æ²¡å½±å“ã€‚</p><p>è€ƒè™‘æœ€é«˜ä½å¼‚æˆ–ä¸ä¸º$0$,å¿…å®šåœ¨æ­¤æœ‰å†³æˆ˜ï¼Œä¸”å¿…å®šæœ‰å¥‡æ•°ä¸ª$1$ã€‚è§‚å¯Ÿä¸‹å¯å¾—å¦‚æœéƒ½æ˜¯$1$,åˆ™$cnt\mod 4=1$ã€‚æˆ–è€…$cnt\mod 4=2,(n-cnt)\mod 2=1$ï¼Œæ‹¿åˆ°å¥‡æ•°ä¸ª$1$ä¹‹åæœ‰$0$æ‹¿ã€‚</p><h2 id="CF1387B1-Village-Minimum"><a href="#CF1387B1-Village-Minimum" class="headerlink" title="CF1387B1 Village (Minimum)"></a>CF1387B1 Village (Minimum)</h2><p>ç®€å•çš„æ ‘å½¢$dp$ã€‚</p><h2 id="CF1387B2-Village-Maximum"><a href="#CF1387B2-Village-Maximum" class="headerlink" title="CF1387B2 Village (Maximum)"></a>CF1387B2 Village (Maximum)</h2><p>ç­”æ¡ˆæ˜¾è€Œæ˜“è§$\sum min(n - siz[i], siz[i])$ã€‚</p><p>çœ‹æ€ä¹ˆåˆç†åˆ†é…ã€‚$min(n - siz[i], siz[i])\leq n/2$ï¼Œä¹Ÿå°±æ˜¯è·¯å¾„å¿…é¡»ç»è¿‡é‡å¿ƒ</p><p>åˆ™ç­”æ¡ˆä¸€å®šäº§ç”Ÿåœ¨é‡å¿ƒçš„å­æ ‘é‡Œï¼Œ$siz[i]\leq n/2$,ä¹Ÿä¸€å®šæ˜¯é‡å¿ƒçš„æ¯ä¸ªå­æ ‘é‡Œçš„ç‚¹äº’ç›¸åŒ¹é…ã€‚</p><p>è¿™ä¸ªåºåˆ—çš„ç¬¬$i$é¡¹å’Œç¬¬$i+\lfloor\frac{n}{2}\rfloor$ï¼ŒåŒ¹é…ï¼Œæ³¨æ„$n\&amp;1$ï¼Œæœ‰ä¸ªç‚¹ä¼šä¿æŒä¸å˜ï¼Œå…¶å®æ­¤æ—¶äº¤æ¢ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œéšä¾¿æ‰¾ä¸ªç‚¹äº’æ¢å³å¯ã€‚</p><h2 id="CF1399E2-Weights-Division-hard-version"><a href="#CF1399E2-Weights-Division-hard-version" class="headerlink" title="CF1399E2 Weights Division (hard version)"></a>CF1399E2 Weights Division (hard version)</h2><p>åˆ†ç±»èŠ±è´¹ç¡¬å¸çš„ä»·å€¼æ¯ä¸ªè¾¹æƒè®¡ç®—$/2$ç»™äºˆçš„ä»·å€¼ã€‚å¯ä»¥æå‰$n\log$å¤„ç†ï¼Œåæ­£é™¤æˆ‘ä¹‹å‰ä¸€å®šè¦é™¤æˆ‘ä¹‹å‰çš„ã€‚</p><p>å°±å˜æˆèŠ±è´¹ç¡¬å¸$1$ï¼Œæ‰€ä»¥ç›´æ¥æšä¸¾ä¸€ä¸ªçš„ç§ç±»ä½¿ç”¨çš„æ•°é‡ï¼Œå†äºŒåˆ†æˆ–è€…å•è°ƒé˜Ÿåˆ—å¦ä¸€ä¸ªã€‚</p><h2 id="CF1354C2-Not-So-Simple-Polygon-Embedding"><a href="#CF1354C2-Not-So-Simple-Polygon-Embedding" class="headerlink" title="CF1354C2. Not So Simple Polygon Embedding"></a>CF1354C2. Not So Simple Polygon Embedding</h2><p>æ±‚$n$ä¸ºå¥‡æ•°ï¼Œ$n$ä¸ºå¶æ•°</p><ul><li>å¯ä»¥å˜æˆæ‰©å¤§å˜æˆå¶æ•°ï¼Œå¶æ•°å°±æ˜¯éå¸¸ç®€å•ã€‚</li><li>é€‰æ‹©$\frac{pi}{2n}$ï¼Œ<strong>ä¸è¦è¢«å…­è¾¹å½¢è¿·æƒ‘è®¡ç®—</strong>ã€‚</li></ul><h2 id="CF1354F-Summoning-Minions"><a href="#CF1354F-Summoning-Minions" class="headerlink" title="CF1354F. Summoning Minions"></a>CF1354F. Summoning Minions</h2><p>è§£é‡Šä¸€ä¸‹ä¸ºå•¥æ˜¯ä¸€å®šæ˜¯å‰$k-1$å¼ æ”¾ä¸‹ï¼Œç„¶å$n-k$å¼ æ”¾äº†å°±æ‹¿èµ°ï¼Œæœ€åä¸€å¼ å†æ”¾ä¸‹ã€‚</p><p>é¦–å…ˆæ— è®ºæ€ä¹ˆæ”¾ç»ˆç©¶æ˜¯$\sum a_i+(k-1)\sum b_i+\sum (j-1)b_j$ã€‚</p><p>è¿™æ ·è‚¯å®šæ˜¯æœ€ä¼˜çš„ï¼Œç„¶åå…¶å®å°±æ˜¯æšä¸¾æ‰€æœ‰æœ€åç•™åœ¨æ¡Œå­ä¸Šçš„$C_n^k$å¼ æƒå€¼å°±å®šäº†ã€‚ä¸€å®šä¸ä¼šé”™è¿‡æœ€ä¼˜è§£ï¼Œç„¶åçŸ¥é“äº†å°±ç®€å•çš„äºŒç»´$dp$ã€‚</p><h2 id="CF1354G-Find-a-Gift"><a href="#CF1354G-Find-a-Gift" class="headerlink" title="CF1354G. Find a Gift"></a>CF1354G. Find a Gift</h2><p>æ³¨æ„$k\leq \frac{n}{2}$ï¼Œå°±å¯ä»¥éšæœºåŒ–ç¡®å®š$1$æ˜¯å¦ä¸ºç¤¼ç‰©äº†ã€‚åªè¦å‡ºç°å°çš„ä¸€å®šæ˜¯ç¤¼ç‰©ã€‚æ˜¾ç„¶éšæœºåŒ–$k$,å¦‚æœæ˜¯ç¤¼ç‰©ä¸€å®šä¼šå‡ºç°$2$ã€‚å¦åˆ™æ˜¯çŸ³å¤´æ˜¯ä¸ä¼šå‡ºç°$2$çš„ã€‚</p><p>ç„¶åå°±å¯ä»¥é€šè¿‡ä¸€æ¬¡æ¬¡å€å¢ç¡®å®š$[1,2^k]$æ˜¯å¦ä¸ºçŸ³å­ï¼Œ ä¹Ÿå¯ä»¥å‘ç°$(2^k,<br>2^{k+1}]$ï¼Œç„¶åæ—¢ç„¶æˆ‘çŸ¥é“æœ‰å¯ä»¥å¯¹æ¯”çš„ä»»ä½•å°äºåŒºé—´çš„çŸ³å¤´,å°±å¯ä»¥è½»æ¾ç”¨äºŒåˆ†æ‰¾åˆ°æœ€å·¦ç«¯çš„ç¤¼ç‰©åœ¨å“ªäº†ã€‚</p><h2 id="CF1421E-Swedish-Heroes"><a href="#CF1421E-Swedish-Heroes" class="headerlink" title="CF1421E. Swedish Heroes"></a>CF1421E. Swedish Heroes</h2><p>æ‰¾åˆ°è§„å¾‹ä¸€å®šæ˜¯æ­£è´Ÿäº¤æ›¿ï¼Œå¹¶ä¸”å‘ç°åªéœ€è¦$(n+\sum [p_i=-1])\mod 3=1$ã€‚å¹¶ä¸”ä¸èƒ½ä¸º$+-+-+$è¿™æ ·æ˜¾ç„¶ä¸å¯èƒ½ã€‚è®¾$m=\sum [p_i=-1]$,$dp[n][m][last][flag]$,$last=$æœ€åä¸€ä¸ª$a_i$çš„æ­£è´Ÿï¼Œæ˜¯å¦å½“å‰ä¸º$+-+-$</p><h2 id="CF1353F-Decreasing-Heights"><a href="#CF1353F-Decreasing-Heights" class="headerlink" title="CF1353F. Decreasing Heights"></a>CF1353F. Decreasing Heights</h2><p>ä¸€å®šæœ‰å…ƒç´ ä¸å˜ï¼Œç›´æ¥æšä¸¾ä¸å˜çš„$O(n^4)dp$</p><h2 id="CF1353E-K-periodic-Garland"><a href="#CF1353E-K-periodic-Garland" class="headerlink" title="CF1353E. K-periodic Garland"></a>CF1353E. K-periodic Garland</h2><p>çœ‹é”™é¢˜æ„+å¤±è¯¯ï¼Œç±»ä¼¼äºæ±‚å­æ®µæœ€å¤§å’Œä¸€æ ·å³å¯ã€‚æ³¨æ„$dp$å¯ä»¥é‡å¤´å¼€å§‹ï¼Œä¹Ÿå¯ä»¥æ¥åé¢çš„ã€‚</p><h2 id="CF1427E-Xum"><a href="#CF1427E-Xum" class="headerlink" title="CF1427E . Xum"></a>CF1427E . Xum</h2><p>é€šè¿‡ç»™å®šçš„$a$,$a$ä¸ºå¥‡æ•°ï¼Œæ“ä½œ$\oplus, +$æ„é€ å‡ºä¸€ä¸ª$1$,æ˜¾ç„¶$ax-by=1$å³å¯ã€‚æ„é€ ä¸€ä¸ªäº’è´¨çš„$y$å³å¯ï¼Œæš´åŠ›æšä¸¾$(a\times(2k+1)\oplus a)$ï¼Œç„¶åæ³¨æ„èŒƒå›´$ax\leq 10^{12}$ï¼Œ$x\times t$è¿™ä¸ªå¥½æ„é€ ã€‚æ³¨æ„æ§åˆ¶å¤§å°ã€‚</p><h2 id="CF1344D-Resume-Review"><a href="#CF1344D-Resume-Review" class="headerlink" title="CF1344D.RÃ©sumÃ© Review"></a>CF1344D.RÃ©sumÃ© Review</h2><p>æš´åŠ›å¾ˆå¥½æƒ³ï¼ŒæŠŠ$a_i-3x^2+3x-1$ï¼Œæ”¾åˆ°ä¼˜å…ˆé˜Ÿåˆ—é‡Œé¢ä¸€ä¸ªä¸€ä¸ªå–ã€‚</p><p>è€Œè¿™é‡Œå·§å¦™æšä¸¾äº†æœ€åç»“æŸçš„$\Delta f(i,x)$ï¼Œå¯ä»¥åˆ¤æ–­æ¯ä¸ªæœ€å¤šå¯ä»¥å–å¤šå°‘ã€‚ï¼ˆè¿™é‡Œå†ç”¨äºŒåˆ†ï¼‰ã€‚</p><p>ç„¶åç»†èŠ‚å°±éœ€è¦ï¼Œå› ä¸ºå¯èƒ½æœ‰å¥½å‡ ä¸ªç›¸åŒçš„å€¼ï¼Œæ‰€ä»¥äºŒåˆ†æ—¶å€™å¾€å¤§çš„æ–¹å‘å–ç­”æ¡ˆï¼Œå³æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å°½å¯èƒ½å°çš„å€¼ï¼Œç„¶åç”±äºå¯èƒ½å¤šäº†ä½¿ç”¨æ¬¡æ•°ï¼Œæ‰¾åˆ°$=ans$,â€”ã€‚</p><h2 id="CF1344C-Quantifier-Question"><a href="#CF1344C-Quantifier-Question" class="headerlink" title="CF1344C Quantifier Question"></a>CF1344C Quantifier Question</h2><p>é¢˜æ„å¾ˆæ¶å¿ƒï¼Œæ³¨æ„$x$æˆç«‹æ˜¯æœ‰é¡ºåºçš„ï¼Œæ˜¾ç„¶æœ‰ç¯ä¸å¯èƒ½ã€‚ç„¶åæ‰€æœ‰å­˜åœ¨ä¸€å®šå¯èƒ½ï¼Œç„¶åå‘ç°å¦‚æœå‡ºç°ä¸€ä¸ªä»»æ„ï¼Œé€’æ¨åˆ°æˆ‘çš„å’Œæˆ‘é€’æ¨çš„éƒ½è¦å˜æˆå­˜åœ¨ï¼Œåˆå› ä¸º$a&lt;b,b&lt;c,a&lt;c$,å…·æœ‰ä¼ é€’æ€§ï¼Œå°±æ˜¯è¯´è·‘è¿™ä¸ªæœ‰å‘å›¾è·‘åˆ°çš„ç‚¹éƒ½è¦å˜æˆå­˜åœ¨ï¼ˆåˆ«å¿˜è®°è·‘åå›¾ã€‚ç„¶åæˆ‘ä»¬å‘ç°åªè¦è¢«ä»»æ„ä¸€ä¸ªå›¾è·‘åˆ°çš„èŠ‚ç‚¹ï¼Œä»–çš„å€¼ä¹Ÿç¡®å®šäº†ï¼Œæˆ‘çš„åå›¾å’Œæ­£å›¾é‚£äº›ä¹Ÿä¸èƒ½ä»»æ„äº†ï¼Œè¦åšä¸€æ ·çš„æ“ä½œã€‚</p><h2 id="CF1363F-Rotating-Substrings"><a href="#CF1363F-Rotating-Substrings" class="headerlink" title="CF1363F Rotating Substrings"></a>CF1363F Rotating Substrings</h2><p>ç»™å®šä¸¤ä¸ªé•¿åº¦ä¸º $n$ çš„å­—ç¬¦ä¸² $s$ï¼Œ$t$ã€‚å®šä¹‰ä¸€æ¬¡æ“ä½œä¸ºé€‰æ‹© $s$ çš„ä¸€ä¸ªå­ä¸² $s_{l, l +1, \dots, r}$<br>â€‹<br> ï¼Œç„¶åå°†ä¹‹ä¿®æ”¹ä¸º $s_{r, l, l + 1, l + 2, \dots, r - 1 }$s<br>è¯·æ±‚åŠ©ä½¿ $s$ ä¸ $t$ ç›¸ç­‰çš„æœ€å°æ“ä½œæ¬¡æ•°ã€‚æ— è§£è¾“å‡º $-1$ã€‚</p><p>$S$çš„å‰$i$ä¸ªå­—ç¬¦å’Œ$T$çš„å‰$j$ä¸ªå­—ç¬¦åŒ¹é…çš„æœ€å°èŠ±è´¹</p><p>æ¯ä¸€ä¸ªæ“ä½œå¯ä»¥è®©ä¸€ä¸ªå­—ç¬¦æåˆ°å‰é¢çš„ä»»ä½•ä½ç½®ï¼Œå¹¶ä¸èƒ½æåˆ°åˆ°åé¢ï¼Œæœ€å°‘çš„æ“ä½œæ¬¡æ•°æ˜¯$n$ - ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚</p><p>ä½†æ˜¯å¯¹äº$acbd,adbc$ã€‚åŒ¹é…åˆ°ç¬¬ä¸‰ä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œæ˜¾ç„¶ä¸èƒ½æŠŠ$c$æ”¾åˆ°åé¢å»ã€‚è¿™ä¸ªæ—¶å€™åœ¨åšæœ€é•¿å…¬å…±å­åºåˆ—ã€‚æˆ‘ä»¬éœ€è¦åŠ ä¸Šä¸€ä¸ªæ¡ä»¶ï¼Œ$s$çš„æ¯ä¸ªå­—æ¯åç¼€æ•°é‡å¿…é¡»æ¯”$t$å¤šå³å¯ã€‚</p><h2 id="CF1408E-Avoid-Rainbow-Cycles"><a href="#CF1408E-Avoid-Rainbow-Cycles" class="headerlink" title="CF1408E Avoid Rainbow Cycles"></a>CF1408E Avoid Rainbow Cycles</h2><p>å¦‚æœæˆ‘ä¿ç•™æŸä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªé›†åˆå°±ä¼šå’Œæ‰€æœ‰æœ‰è¿™ä¸ªå…ƒç´ çš„ç‚¹è¿è¾¹ã€‚æˆ‘ä»¬æŠŠé›†åˆå½“æˆä¸€ä¸ªç‚¹ï¼Œé‚£ä¹ˆå½“ä¸¤ä¸ªé›†åˆåŒæ—¶é€‰æ‹©ä¸€ä¸ª$x$ï¼Œ$x$è¿é›†åˆ$A$,é›†åˆ$B$è¿$x$,$A-B$ï¼Œå³æœ€åè¦æä¸€ä¸ªæœ€å¤§ç”Ÿæˆæ ‘å³å¯ã€‚</p><h2 id="CF1408F-Two-Different"><a href="#CF1408F-Two-Different" class="headerlink" title="CF1408F Two Different"></a>CF1408F Two Different</h2><p>æ¨¡æ‹Ÿæ—¶ï¼Œæ˜¾ç„¶$2^n$çš„é•¿åº¦æš´åŠ›æ¨¡æ‹Ÿï¼Œå°±ä¼šå…¨éƒ¨å˜æˆä¸€ä¸ªã€‚ç„¶åå¯¹å‰©ä¸‹çš„è´ªå¿ƒåˆ†é…ã€‚</p><p>ä½†æ˜¯ç›´æ¥æ­£åšä¸€éï¼Œååšä¸€éå°±å¥½äº†ã€‚(æˆ‘æ˜¯å‚»é€¼)</p><h2 id="CF1422F-Boring-Queries"><a href="#CF1422F-Boring-Queries" class="headerlink" title="CF1422F Boring Queries"></a>CF1422F Boring Queries</h2><p>åœ¨çº¿åŒºé—´$lcm$</p><p>  è§£1</p><ul><li><p>å¯¹äºå°äºç­‰$\sqrt{2\cdot 10^5}$çš„è´¨å› å­ï¼Œç›´æ¥å„å¼€ä¸€ä¸ªçº¿æ®µæ ‘æš´åŠ›ç»´æŠ¤ï¼Œéœ€è¦åŠ¨æ€ä»¥åŠå¸¸æ•°ä¼˜åŒ–</p></li><li><p>å¯¹äºå¤§äº $\sqrt{2\cdot 10^5}$<br>çš„è´¨å› å­ï¼Œæ¯ä¸ªå…ƒç´ è‡³å¤šæœ‰ä¸€ä¸ªã€‚è¿™æœ‰ç‚¹åƒç»´æŠ¤åŒºé—´ä¸åŒé¢œè‰²ä¸ªæ•°ï¼Œ$\sum [last_x&lt;l]$åªä¸è¿‡æ¯ä¸ªé¢œè‰²è¿˜å¸¦äº†æƒå€¼ï¼ˆå¼ºåˆ¶åœ¨çº¿ï¼‰</p></li><li><p>ç‰ˆæœ¬$r$è¿™ä¸ªçº¿æ®µæ ‘ç»´æŠ¤çš„æ˜¯ç‚¹$x$ï¼Œç»´æŠ¤çš„æ˜¯$last[t]=x$,çš„$t$çš„æ‰€æœ‰ä¹˜ç§¯ã€‚</p><p>è§£2</p></li></ul><p>æ ¹æ®è§£$1$å»åšé¢„å¤„ç†ç¬¬ $i$ç‰ˆæœ¬çš„çº¿æ®µæ ‘æ—¶ï¼Œå°† $i$ ä½ç½®çš„æƒå€¼ä¹˜ä¸Š $a_i$çš„å¤§è´¨å› å­ï¼Œä¸ºäº†é˜²æ­¢äºŒæ¬¡è®¡ç®—ï¼Œå¹¶å°†$a_i$ä¸Šæ¬¡å‡ºç°çš„ä½ç½®é™¤æ‰è¯¥è´¨å› å­ã€‚</p><ul><li>ç‰ˆæœ¬$r$è¿™ä¸ªçº¿æ®µæ ‘ç»´æŠ¤çš„æ˜¯ä½ç½®$x$,åœ¨$[1,r]$ä¸Šçš„ä¹˜ç§¯ã€‚</li></ul><h2 id="CF1437G-Death-DBMS"><a href="#CF1437G-Death-DBMS" class="headerlink" title="CF1437G - Death DBMS"></a>CF1437G - Death DBMS</h2><p>$AC$è‡ªåŠ¨æœºä¸Šæ ‘é“¾å‰–åˆ†æœ€å¤§å€¼ï¼Œæˆ–è€…æ ‡è®°æ°¸ä¹…åŒ–çº¿æ®µæ ‘ç»´æŠ¤å­æ ‘ç‚¹çš„æœ€å¤§å€¼ã€‚</p><h2 id="CF1436F-Sum-Over-Subsets"><a href="#CF1436F-Sum-Over-Subsets" class="headerlink" title="CF1436F. Sum Over Subsets"></a>CF1436F. Sum Over Subsets</h2><p>ç”¨$jiangly$çš„è¯è¯´çœ‹åˆ°$\gcd=1$,ä¸€å®šæƒ³åˆ°è«æ¯”ä¹Œæ–¯å®¹æ–¥è¿™ç§ä¸œè¥¿ã€‚</p><p>ç„¶åæƒ³æƒ³æ²¡æœ‰é™åˆ¶å’‹åšã€‚</p><ul><li>$a_i\times a_i$äº§ç”Ÿè´¡çŒ®ã€‚é€‰æ‹©ä¸€ä¸ª$(k-1)$æ˜¯è¢«è¸¢æ‰çš„ï¼Œç„¶åéšä¾¿é€‰$2^{k-2}$</li><li>$a_i\times a_j$äº§ç”Ÿè´¡çŒ®ã€‚ï¼ˆæ˜¯æœ‰é¡ºåºçš„é‚£ç§ï¼‰ï¼Œ$2^{k-3}(k-2)[a_i,a_j\in A]+^{k-3}(k-2)[a_j\in A,a_i\in B]$ã€‚</li></ul><p>ç»´æŠ¤ä¸€ä¸‹ä¸¤ä¸ªä¹˜ç§¯çš„$\sum$å³å¯ã€‚</p><h2 id="CF1443F-Identify-the-Operations"><a href="#CF1443F-Identify-the-Operations" class="headerlink" title="CF1443F - Identify the Operations"></a>CF1443F - Identify the Operations</h2><p>å…ˆè€ƒè™‘å¦‚ä½•å¤„ç†ä¸åˆæ³•çš„æƒ…å†µã€‚æ¯æ¬¡åˆ è§‚å¯Ÿæ˜¯å¦ä¸¤è¾¹éƒ½æ˜¯ä¸éœ€è¦çš„æ•°ã€‚</p><p>æ­£è§£å…¶å®å¾ˆç®€å•ï¼Œè§‚å¯Ÿæ‹¿å‡ºæŸä¸ªæ•°ä¹‹åï¼Œæ­¤æ—¶è¿™ä¸ªæ•°å°±æˆäº†ä¸å¿…è¦çš„æ•°ã€‚å¦‚æœä¸‹æ¬¡æƒ³æ‹¿è¢«ç§»èµ°çš„æ•°ï¼Œå…¶å®é—´æ¥åœ¨æ‹¿$pos_{b_i}$ï¼Œå¹¶ä¸”ä¸€å®šæ‹¿çš„åˆ°ï¼Œç„¶åæ¨¡æ‹Ÿä¸€ä¸‹å°±æ²¡äº†ã€‚</p><h2 id="CF1443E-Long-Permutation"><a href="#CF1443E-Long-Permutation" class="headerlink" title="CF1443E - Long Permutation"></a>CF1443E - Long Permutation</h2><p>å¤§æ°´é¢˜ï¼Œé€†åº·æ‰˜å±•å¼€å¾—ç»´æŠ¤å$14$ä¸ªæ•°å°±å¥½äº†ã€‚</p><ul><li>æé†’æˆ‘è¦å‡†å¤‡ä»–ä¸¤æ¿å­äº†ã€‚ä¸¤è€…éƒ½å¯ä»¥åšåˆ°$n\log n$ã€‚</li></ul><h2 id="CF19D"><a href="#CF19D" class="headerlink" title="CF19D"></a>CF19D</h2><p>è¿™é¢˜å‘Šè¯‰æˆ‘ä»¬çº¿æ®µæ ‘ä¸ŠåŒºé—´äºŒåˆ†æ—¶é—´å¤æ‚åº¦ä¸å¤§ã€‚</p><h2 id="CF204E-Little-Elephant-and-Strings"><a href="#CF204E-Little-Elephant-and-Strings" class="headerlink" title="CF204E Little Elephant and Strings"></a>CF204E Little Elephant and Strings</h2><p>é”å®šå­—ç¬¦ä¸²çš„æ¯ä¸ª$r$,å°±å¯ä»¥çŸ¥é“è¿™ä¸ªåç¼€æ˜¯å¦å­˜åœ¨$k$ä¸ªé‡å¤ã€‚</p><p>ç„¶åæ ‡è®°ä¸‹ï¼ŒæŸä¸ªç»“ç‚¹å¯ä»¥è´¡çŒ®çš„å°±æ˜¯ç»“ç‚¹åˆ°æ ¹æœ€å¤§æœ‰æ ‡è®°çš„$len$ï¼Œçå‡ æŠŠç»´æŠ¤å³å¯ã€‚</p><h2 id="CF793C-Mice-problem"><a href="#CF793C-Mice-problem" class="headerlink" title="CF793C Mice problem"></a>CF793C Mice problem</h2><p>é˜´é—´é¢˜ã€‚</p><p>æˆ‘ä»¬åªè¦æŠŠæ¯ä¸€ä¸ªè€é¼ åœ¨çŸ©å½¢é‡Œçš„æ—¶é—´æ®µç®—å‡ºæ¥ç„¶åå–äº¤é›†ï¼Œè‹¥äº¤é›†éç©ºåˆ™è¾“å‡ºäº¤é›†ä¸­çš„ä»»æ„ç‚¹å³å¯ã€‚<br>ä½†æ˜¯æœ‰å¾ˆå¤šæ¶å¿ƒçš„ç‚¹ã€‚</p><ul><li>å‡ºç°ä¸è¾¹çš„çº¿æ®µä¸€æ ·çš„ç›´çº¿ï¼Œæ°¸è¿œä¸èƒ½äº¤åœ¨çŸ©é˜µå†…ã€‚</li><li>å¦‚æœæœ€åäº¤é›†åœ¨ä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œä¹Ÿæ°¸è¿œä¸èƒ½åœ¨çŸ©é˜µå†…ã€‚</li><li>å¦‚æœæœ‰ä¸åŠ¨ç‚¹è¦ç‰¹æ®Šåˆ¤æ–­ã€‚</li></ul><h2 id="CF1285E-Delete-a-Segment"><a href="#CF1285E-Delete-a-Segment" class="headerlink" title="CF1285E Delete a Segment"></a>CF1285E Delete a Segment</h2><p>ä½ è¦æ±‚å‡º æ­£å¥½åˆ å»ä¸€æ¡çº¿æ®µåï¼Œå¹¶é›† æœ€å¤šåŒ…æ‹¬å¤šå°‘æ¡çº¿æ®µã€‚</p><ul><li><p>å¦‚æœä¸åˆ ï¼Œå°±æŠŠæ‰€æœ‰çº¿æ®µæ’ä¸ªåºåŠ å…¥ï¼Œç„¶ååˆ¤å¦‚æœåŠ å…¥çš„å·¦ç«¯ç‚¹å°äºå½“å‰æœ€å¤§å³ç«¯ç‚¹åˆ™ï¼Œå‡ºç°äº†ä¸€ä¸ªæ–°çš„çº¿æ®µã€‚è€ƒè™‘$dp[i][r][2]$æ˜¾ç„¶ç©ºé—´ä¸å¤Ÿï¼Œä½†æ˜¯å‘ç°åˆ ä¸€æ¡è¾¹ï¼Œå¯¹æšä¸¾åˆ°ä¸€ä¸ªç‚¹çš„$r$äº§ç”Ÿ$2$ä¸ªçŠ¶æ€ã€‚ç›´æ¥æš´åŠ›$map$ä¿æŒå³å¯ã€‚</p></li><li><p>è€ƒè™‘è®¡ç®—å»æ‰æ¯æ¡çº¿æ®µçš„è´¡çŒ®ï¼Œæ˜¾ç„¶å¦‚æœå‡ºç°$[[\ ],[\ ]]$è¿™ç§æƒ…å†µè¿™æ¡çº¿æ®µçš„è´¡çŒ®æ˜¯+2çš„ï¼Œæ¨å¹¿åˆ°ä¸€èˆ¬å½¢å¼ï¼Œå¦‚æœåœ¨æ‹¬å·åŒ¹é…ä¸­é‡åˆ°$set$é‡Œåªæœ‰ä¸€ä¸ªæ‹¬å·$[$æ˜¾ç„¶å»æ‰æˆ‘æ˜¯å¯ä»¥è®©ä¹‹åçš„æ‹¬å·ä¸ä¹‹å‰æ‹¬å·åˆ†ç¦»ã€‚ä½†æ˜¯è¦è®°ä½åŠ å…¥ä¸€ä¸ªæ‹¬å·ä»–è‡ªå·±è¿™ä¸ªå¹¶é›†ä¹Ÿä¼šæ¶ˆå¤±ï¼Œç„¶åç”¨$set$ç»´æŠ¤å³å¯ï¼ˆä¸»è¦$set$å¥½åˆ é™¤ï¼‰</p></li></ul><h2 id="CF1451E-Bitwise-Queries"><a href="#CF1451E-Bitwise-Queries" class="headerlink" title="CF1451E Bitwise Queries"></a>CF1451E Bitwise Queries</h2><p>å…¶å®å°±æ˜¯æ¢ç©¶å¦‚ä½•åœ¨$4$æ¬¡è¯¢é—®æ‰¾åˆ°$a,b,c$</p><p>é¦–å…ˆè®°ä½$a+b=a\oplus b+2(a\&amp;b)$</p><p>è§‚å¯Ÿé¢˜ç›®éƒ½æ˜¯$[0,2^n)$ã€‚</p><p>å‡è®¾æœ‰é‡å¤é‚£å°±å¾ˆç®€å•ã€‚</p><p>å¦‚æœæ²¡æœ‰é‡å¤</p><ul><li><p>å¯ä»¥ç™½ç¥¨ä¸€ä¸ªè¯¢é—®ï¼Œä¸€å®šå­˜åœ¨$a_i \oplus a_j=2^n$,å¹¶ä¸”æ­¤æ—¶$a_i \&amp;  a_j=2^n$</p></li><li><p>æˆ–è€…ç›´æ¥ç¡®å®šæ ¹æ®å¼‚æˆ–1çš„å’Œå¼‚æˆ–2çš„æ¨å¯¼å‡ºå³å¯ã€‚</p></li></ul><h2 id="CF1452E-Two-Editorials"><a href="#CF1452E-Two-Editorials" class="headerlink" title="CF1452E Two Editorials"></a>CF1452E Two Editorials</h2><p>äºŒç»´å·®åˆ†ç»†èŠ‚é¢˜ï¼Œåªæ˜¯åœºä¸Šæ‘¸é±¼äº†ã€‚è¿™é‡Œåªæ˜¯å‘Šè¯‰è‡ªå·±åˆ«æ‘¸é±¼</p><h2 id="CF1158B-The-minimal-unique-substring"><a href="#CF1158B-The-minimal-unique-substring" class="headerlink" title="CF1158B The minimal unique substring"></a>CF1158B The minimal unique substring</h2><p>æ‰“è¡¨å¾—åˆ°çš„ï¼Œå¾ªç¯$(n-k)/2$ä¸ª$1$+$0$,å³å¯ã€‚</p><p>è€ƒè™‘$110110110$æ­¤æ—¶æ¯åŠ å¾ªç¯$k=k+1$,è®¾$x$ä¸ª1</p><script type="math/tex; mode=display">n-2(x+1)+2=k,x=(n+k)/2</script><h2 id="CF1158C-Permutation-recovery"><a href="#CF1158C-Permutation-recovery" class="headerlink" title="CF1158C Permutation recovery"></a>CF1158C Permutation recovery</h2><p>è€ƒè™‘æœ€ç®€å•$val_{nxt[i]}&gt;i,i&gt;jï¼Œ j\in[i+1,nxt[i]-1]$</p><p>è¿å¥½è¾¹ï¼Œæœ‰çº¿æ®µæ ‘ä¼˜åŒ–ä¸€ä¸‹è¾¹ï¼Œå°±å¯ä»¥æ‹“æ‰‘æ’åºï¼Œå°±åšå®Œäº†ã€‚</p><h2 id="CF1251E2-Voting-Hard-Version"><a href="#CF1251E2-Voting-Hard-Version" class="headerlink" title="CF1251E2 Voting (Hard Version)"></a>CF1251E2 Voting (Hard Version)</h2><p>å¾ˆå·§å¦™çš„è´ªå¿ƒï¼Œä»è·Ÿéšå¤§è´ªå¿ƒå»è€ƒè™‘ï¼Œå¦‚æœå‘ç°æˆ‘å°±ç®—æŠŠåé¢å…¨éƒ¨é€‰å®Œï¼Œè¿˜ä¸èƒ½å…è´¹è·Ÿéšï¼Œå°±éœ€è¦ä»å‰©ä¸‹é‡Œé€‰æœ€å°çš„ï¼Œä¿è¯åé¢éƒ½é€‰å®Œå°±å¯ä»¥å…è´¹è·Ÿéšäº†ã€‚</p><h2 id="CF1283F-DIY-Garland"><a href="#CF1283F-DIY-Garland" class="headerlink" title="CF1283F DIY Garland"></a>CF1283F DIY Garland</h2><p>å¯ä»¥çŸ¥é“å¶å­ç»“ç‚¹ï¼Œæ ¹ç»“ç‚¹ï¼Œä»¥åŠ<strong>æ¯ä¸ªç‚¹çš„å‡ºåº¦</strong>ã€‚ä»å°çš„é€‰ï¼Œä¸€å®šé€‰å¶å­ç»“ç‚¹é‡Œé¢æœ€å°çš„é‚£ä¸ªç»“ç‚¹ï¼Œè¿™é‡Œæ³¨æ„å½“ç‚¹çš„å‡ºåº¦ä¸º$0$ï¼Œæ‰èƒ½æ”¾å…¥å †é‡Œï¼Œã€‚ä»”ç»†æ€è€ƒæƒ³æƒ³å³å¯ã€‚</p><h2 id="CF1461F-Mathematical-Expression"><a href="#CF1461F-Mathematical-Expression" class="headerlink" title="CF1461F Mathematical Expression"></a>CF1461F Mathematical Expression</h2><p>å¤§åŠ›åˆ†ç±»è®¨è®ºã€‚</p><p>åªéœ€è¦å¤„ç†$*+$</p><p>ç”¨$0$åˆ†å¼€æ¯ä¸€æ®µã€‚</p><p>æ­¤æ—¶å°±æœ‰ä¸ª$n^2$çš„$dp$ã€‚é¦–å…ˆå»å¤´å°¾$1$ï¼Œä¸€å®šæ˜¯$+$,å¦‚æœæˆ‘ä¸€æ®µä¹‹é—´çš„ä¹˜ç§¯æ˜¯$K$ï¼Œå¦‚æœç”¨$1$åˆ†å¼€ï¼Œæœ€åå°±æ˜¯$2+K/2+n&gt;K$,$K&gt;2n$ç”¨$1$åˆ†å¼€å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚è€ƒè™‘åˆ°æ­¤æ—¶é$1$çš„æœ‰$\log n$ä¸ªã€‚</p><p>å¯¹äº$dp$</p><ul><li>$a[i]=1$,ä¸€å®šé€‰æ‹©$+$ã€‚</li><li>$a[i]\not ={1}$,éœ€è¦é€‰æ‹©ä¹˜æ³•åŒºé—´è½¬ç§»å³å¯$dp[i]=\max{dp[j]+\prod_{t=j+1}^ia[t]}$ã€‚</li></ul><p>æ‹¿ä¸ªæ•°ç»„è®°å½•è¿‡ç¨‹å³å¯å¤æ‚åº¦$O(n\log n)$</p><h2 id="CF1462F-The-Treasure-of-The-Segments"><a href="#CF1462F-The-Treasure-of-The-Segments" class="headerlink" title="CF1462F The Treasure of The Segments"></a>CF1462F The Treasure of The Segments</h2><p>æ±‚çš„æ˜¯åˆ é™¤æœ€å°‘çš„çº¿æ®µä½¿å­˜åœ¨ä¸€æ¡çº¿æ®µèƒ½å¤Ÿå’Œå…¶ä»–æ‰€æœ‰çº¿æ®µå‡é‡åˆ</p><p>å¯¹äºæ¯æ¡çº¿æ®µæ±‚ä¸€éå³å¯ï¼Œç»Ÿè®¡ä¸€ä¸‹è·Ÿä»–ä¸é‡åˆçš„å°±è¡Œäº†ã€‚</p><h2 id="CF1463E-Plan-of-Lectures"><a href="#CF1463E-Plan-of-Lectures" class="headerlink" title="CF1463E Plan of Lectures"></a>CF1463E Plan of Lectures</h2><p>ä¸€ç›´åœ¨æƒ³å’‹åˆ¤ä¸æ­£ç¡®ã€‚æ˜¾ç„¶éœ€è¦è¾“å‡ºæ–¹æ¡ˆï¼Œç›´æ¥ç¼©ç‚¹æ‹“æ‰‘æ’åºï¼Œä¸ºäº†é˜²æ­¢ç¼©ç‚¹é‡Œé¢åˆä¸åˆæ³•çš„ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨åŸå›¾ä¸Šå†è¿è¾¹å»æ‹“æ‰‘æ’åºï¼Œçœ‹æ˜¯å¦å¯ä»¥å®ç°ã€‚</p><h2 id="CF1464B-Grime-Zoo"><a href="#CF1464B-Grime-Zoo" class="headerlink" title="CF1464B Grime Zoo"></a>CF1464B Grime Zoo</h2><p>å¦‚æœ$1$,$0$çš„æ•°é‡å®šäº†ï¼Œ$01+10$å·²ç»å®šäº†ã€‚<br>é‚£æˆ‘è¦è®©$10$æ›´å¤šï¼Œå‘å®šæ˜¯æŠŠ$1$å¾€å‰æ”¾ï¼Œè·å¾—æ›´å¤š$10$ï¼Œåä¹‹ä¹Ÿæ˜¯ã€‚<br>æ‰€ä»¥åªéœ€è¦çå‡ æŠŠé¢„å¤„ç†å³å¯ã€‚æšä¸¾å‰ç¼€éƒ½æ˜¯$0$ï¼Œåç¼€éƒ½æ˜¯$1$çš„æƒ…å†µã€‚</p><h2 id="CF1464C-Poman-Numbers"><a href="#CF1464C-Poman-Numbers" class="headerlink" title="CF1464C Poman Numbers"></a>CF1464C Poman Numbers</h2><p>æ‰“è¡¨ï¼Œè´ªå¿ƒã€‚</p><hr><h1 id="æ´›è°·"><a href="#æ´›è°·" class="headerlink" title="æ´›è°·"></a>æ´›è°·</h1><h2 id="P4103-HEOI2014-å¤§å·¥ç¨‹"><a href="#P4103-HEOI2014-å¤§å·¥ç¨‹" class="headerlink" title="P4103 [HEOI2014]å¤§å·¥ç¨‹"></a>P4103 [HEOI2014]å¤§å·¥ç¨‹</h2><p>è®°å½•ä¸‹æœ€é•¿è¾¹ï¼Œæœ€å°è¾¹ï¼Œæ¬¡å°è¾¹ï¼Œæ¬¡å¤§è¾¹å³å¯,è™šæ ‘æ¨¡ç‰ˆé¢˜ã€‚</p><h2 id="P5504-JSOI2011-æŸ æª¬"><a href="#P5504-JSOI2011-æŸ æª¬" class="headerlink" title="P5504 [JSOI2011]æŸ æª¬"></a>P5504 [JSOI2011]æŸ æª¬</h2><p>ä¸€ç•ªè¯æ˜å°±å¯ä»¥å‘ç°æœ€ä¼˜çš„ä¸¤ç«¯ä¸€å®šæ˜¯ç›¸åŒæ•°ï¼Œå¦‚æœå·¦å³ç«¯ç‚¹è´å£³å¤§å°ä¸ç›¸ç­‰çš„è¯ï¼Œå¿…ç„¶æœ‰ä¸€ä¸ªç«¯ç‚¹å¯¹ç­”æ¡ˆæ²¡æœ‰è´¡çŒ®ã€‚å¹²å˜›ä¸ç›´æ¥åˆ†å¼€å‘¢ï¼Ÿ</p><p>ä¸Šå‡¸åŒ…ç»´æŠ¤å¯¹äºæ¯ä¸ª$a_i$ã€‚ç„¶åæ–œç‡ä¼˜åŒ–å³å¯å•è°ƒæ ˆï¼ˆPS:å¥½åƒæ²¡å•¥éº»çƒ¦çš„ï¼Œç”šè‡³ç›´æ¥äºŒåˆ†ä¸Šå‡¸åŒ…ä¹Ÿå¯ä»¥ï¼‰ã€‚</p><h2 id="P2542-AHOI2005-èˆªçº¿è§„åˆ’"><a href="#P2542-AHOI2005-èˆªçº¿è§„åˆ’" class="headerlink" title="P2542 [AHOI2005] èˆªçº¿è§„åˆ’"></a>P2542 [AHOI2005] èˆªçº¿è§„åˆ’</h2><p>LCTç»´æŠ¤è¾¹æƒï¼Œç®€å•å¤šäº†ã€‚å¦‚æœè¿æ¥æˆç¯ï¼Œå°±æŠŠè¿™äº›å…¨éƒ¨å˜æˆ$0$.è¿™äº›å°±ä¸ä¼šæ˜¯å…³é”®è·¯å¾„ã€‚</p><hr><h1 id="Atcoder"><a href="#Atcoder" class="headerlink" title="Atcoder"></a>Atcoder</h1><h2 id="AtCoder-Grand-Contest-048"><a href="#AtCoder-Grand-Contest-048" class="headerlink" title="AtCoder Grand Contest 048"></a>AtCoder Grand Contest 048</h2><h2 id="ACL-Beginner-Contest"><a href="#ACL-Beginner-Contest" class="headerlink" title="ACL Beginner Contest"></a>ACL Beginner Contest</h2><h3 id="F-Heights-and-Pairs"><a href="#F-Heights-and-Pairs" class="headerlink" title="F - Heights and Pairs"></a>F - Heights and Pairs</h3><p>å®¹æ–¥æ˜¯æ˜¾ç„¶çš„ã€‚$f(i)$è¡¨ç¤ºä¿è¯$i$å¯¹ç›¸åŒçš„ç­”æ¡ˆã€‚$g(i)$è¡¨ç¤ºéšä¾¿é€‰$i$äººæˆå¯¹çš„æ•°é‡ã€‚$z(i)$è¡¨ç¤ºé€‰$i$å¯¹æƒ…ä¾£çš„æ–¹æ³•ã€‚</p><p>å¯¹äºæ¯ç§$h_i$æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºé€‰å‡º$i$å¯¹çš„æ–¹æ³•,å˜æˆå¤šé¡¹å¼å°±æ˜¯$(k_0x^0+k_1x_1+k_2x^2â€¦)$ï¼Œå¯å‘å¼$NTT$å³å¯ã€‚</p><p>$g(i)=g(i-2)\times C_{i-2}^2/(i/2)$</p><p>$f(i)=g(2n-2i)z(i)$</p><p>$ans=f(0)-f(1)+f(2)-f(3)â€¦$</p><p>å½“ç„¶æƒ³è¦æƒ³çš„æ›´å¿«ï¼ŒäºŒé¡¹å¼åæ¼”å°±ä¸ç”¨æ€è€ƒäº†ã€‚ï¼ˆæ˜¾ç„¶æˆ‘è¦å¤ä¹ ä¸‹ï¼‰</p><hr><h1 id="ç‰›å®¢"><a href="#ç‰›å®¢" class="headerlink" title="ç‰›å®¢"></a>ç‰›å®¢</h1><h2 id="ICPCå°ç±³é‚€è¯·èµ›2"><a href="#ICPCå°ç±³é‚€è¯·èµ›2" class="headerlink" title="ICPCå°ç±³é‚€è¯·èµ›2"></a>ICPCå°ç±³é‚€è¯·èµ›2</h2><h3 id="A-2020"><a href="#A-2020" class="headerlink" title="A.2020"></a>A.2020</h3><p>èµ›æ—¶æ²¡åšï¼Œè€ƒè™‘äºŒåˆ†ï¼Œå…ˆå®‰æ’å‰$k$ä¸ªå†å®‰æ’å$k$ä¸ªï¼Œå°±æ²¡äº†ã€‚</p><h3 id="I-Subsequence-Pair"><a href="#I-Subsequence-Pair" class="headerlink" title="I.Subsequence Pair"></a>I.Subsequence Pair</h3><p>è„‘å­è¿›æ°´é¢˜ï¼Œæƒ³åˆ°$lcs$ç„¶åï¼Œé—®é©¬è€å¸ˆï¼šè¯´ä¸éœ€è¦$LCS$ã€‚</p><p>å…¶å®å°±æ˜¯$lcs$è£¸é¢˜ã€‚</p><ul><li>$\max(dp_{i,j}+m-j)$,å…¬å…±ä¸€æ ·ç›´æ¥è´ªå¿ƒæŸ“$t$å–æœ€é•¿ã€‚</li><li>$\max(dp_{i-1,j-1}+m-j-1+n-j-1)$ï¼Œå¦‚æœå‘ç°$s_i&lt;t_j$,å‘ç°å–å®Œä¹‹åå°±éšä¾¿å–äº†ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é¸½å­çš„é¢˜è§£å¤ªå¤šäº†ã€‚åªå¥½ç›´æ¥å†™ã€‚&lt;/p&gt;
&lt;!-- TOC --&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#gym&quot;&gt;GYM&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#2019-ccpc-å“ˆå°”æ»¨&quot;&gt;2019-CCPC-å“ˆå°”æ»¨&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#b-binary-numbers&quot;&gt;B. Binary Numbers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#e-exchanging-gifts&quot;&gt;E. Exchanging Gifts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#i-interesting-permutation&quot;&gt;I. Interesting Permutation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#l-lru-algorithm&quot;&gt;L. LRU Algorithm&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#300iq-contest-1&quot;&gt;300iq Contest 1&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#bbest-subsequence&quot;&gt;B.Best Subsequence&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#ccool-pairs&quot;&gt;C.Cool Pairs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#d-dates&quot;&gt;D. Dates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#f-free-edges&quot;&gt;F. Free Edges&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#k-knowledge&quot;&gt;K. Knowledge&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#icpc-asia-east-continent-final&quot;&gt;ICPC Asia-East Continent Final&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#hking&quot;&gt;H.King&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#é›…ç¤¼é›†è®­&quot;&gt;é›…ç¤¼é›†è®­&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#loj6029-é›…ç¤¼é›†è®­-2017-day1å¸‚åœº&quot;&gt;LOJ6029. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å¸‚åœº&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6030-é›…ç¤¼é›†è®­-2017-day1çŸ©é˜µ&quot;&gt;LOJ6030. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€çŸ©é˜µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6031-é›…ç¤¼é›†è®­-2017-day1å­—ç¬¦ä¸²&quot;&gt;LOJ6031. ã€Œé›…ç¤¼é›†è®­ 2017 Day1ã€å­—ç¬¦ä¸²&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6032-é›…ç¤¼é›†è®­-2017-day2æ°´ç®±&quot;&gt;LOJ6032. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ°´ç®±&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6033-é›…ç¤¼é›†è®­-2017-day2æ£‹ç›˜æ¸¸æˆ&quot;&gt;LOJ6033. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€æ£‹ç›˜æ¸¸æˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6034-é›…ç¤¼é›†è®­-2017-day2çº¿æ®µæ¸¸æˆ&quot;&gt;LOJ6034. ã€Œé›…ç¤¼é›†è®­ 2017 Day2ã€çº¿æ®µæ¸¸æˆ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6035-é›…ç¤¼é›†è®­-2017-day4æ´—è¡£æœ&quot;&gt;LOJ6035. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€æ´—è¡£æœ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6036-é›…ç¤¼é›†è®­-2017-day4ç¼–ç &quot;&gt;LOJ6036. ã€Œé›…ç¤¼é›†è®­ 2017 Day4ã€ç¼–ç &lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6038-é›…ç¤¼é›†è®­-2017-day5è¿œè¡Œ&quot;&gt;LOJ6038. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€è¿œè¡Œ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6039-é›…ç¤¼é›†è®­-2017-day5ç å®&quot;&gt;LOJ6039. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€ç å®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6040-é›…ç¤¼é›†è®­-2017-day5çŸ©é˜µ&quot;&gt;LOJ6040. ã€Œé›…ç¤¼é›†è®­ 2017 Day5ã€çŸ©é˜µ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6041-é›…ç¤¼é›†è®­-2017-day7äº‹æƒ…çš„ç›¸ä¼¼åº¦&quot;&gt;LOJ6041. ã€Œé›…ç¤¼é›†è®­ 2017 Day7ã€äº‹æƒ…çš„ç›¸ä¼¼åº¦&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#loj6045-é›…ç¤¼é›†è®­-2017-day8ä»·&quot;&gt;LOJ6045. ã€Œé›…ç¤¼é›†è®­ 2017 Day8ã€ä»·&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#codeforces&quot;&gt;Codeforces&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#cf1358f-tasty-cookie&quot;&gt;CF1358F Tasty Cookie&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1367f2-flying-sort-hard-version&quot;&gt;CF1367F2 Flying Sort (Hard Version)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1368e-ski-accidents&quot;&gt;CF1368E Ski Accidents&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1374e2-reading-books-hard-version&quot;&gt;CF1374E2 Reading Books (hard version)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1380g-circular-dungeon&quot;&gt;CF1380G Circular Dungeon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1384d-gamegame&quot;&gt;CF1384D. GameGame&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1387b1-village-minimum&quot;&gt;CF1387B1 Village (Minimum)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1387b2-village-maximum&quot;&gt;CF1387B2 Village (Maximum)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1399e2-weights-division-hard-version&quot;&gt;CF1399E2 Weights Division (hard version)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1354c2-not-so-simple-polygon-embedding&quot;&gt;CF1354C2. Not So Simple Polygon Embedding&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1354f-summoning-minions&quot;&gt;CF1354F. Summoning Minions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1354g-find-a-gift&quot;&gt;CF1354G. Find a Gift&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1421e-swedish-heroes&quot;&gt;CF1421E. Swedish Heroes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1353f-decreasing-heights&quot;&gt;CF1353F. Decreasing Heights&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1353e-k-periodic-garland&quot;&gt;CF1353E. K-periodic Garland&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1427e--xum&quot;&gt;CF1427E . Xum&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1344drÃ©sumÃ©-review&quot;&gt;CF1344D.RÃ©sumÃ© Review&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1344c-quantifier-question&quot;&gt;CF1344C Quantifier Question&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1363f-rotating-substrings&quot;&gt;CF1363F Rotating Substrings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1408e-avoid-rainbow-cycles&quot;&gt;CF1408E Avoid Rainbow Cycles&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1408f-two-different&quot;&gt;CF1408F Two Different&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1422f-boring-queries&quot;&gt;CF1422F Boring Queries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1437g---death-dbms&quot;&gt;CF1437G - Death DBMS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1436f-sum-over-subsets&quot;&gt;CF1436F. Sum Over Subsets&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1443f---identify-the-operations&quot;&gt;CF1443F - Identify the Operations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1443e---long-permutation&quot;&gt;CF1443E - Long Permutation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf19d&quot;&gt;CF19D&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf204e-little-elephant-and-strings&quot;&gt;CF204E Little Elephant and Strings&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf793c-mice-problem&quot;&gt;CF793C Mice problem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1285e-delete-a-segment&quot;&gt;CF1285E Delete a Segment&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1451e-bitwise-queries&quot;&gt;CF1451E Bitwise Queries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1452e-two-editorials&quot;&gt;CF1452E Two Editorials&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1158b-the-minimal-unique-substring&quot;&gt;CF1158B The minimal unique substring&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1158c-permutation-recovery&quot;&gt;CF1158C Permutation recovery&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1251e2-voting-hard-version&quot;&gt;CF1251E2 Voting (Hard Version)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1283f-diy-garland&quot;&gt;CF1283F DIY Garland&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1461f-mathematical-expression&quot;&gt;CF1461F Mathematical Expression&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1462f-the-treasure-of-the-segments&quot;&gt;CF1462F The Treasure of The Segments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1463e-plan-of-lectures&quot;&gt;CF1463E Plan of Lectures&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1464b-grime-zoo&quot;&gt;CF1464B Grime Zoo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#cf1464c-poman-numbers&quot;&gt;CF1464C Poman Numbers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#æ´›è°·&quot;&gt;æ´›è°·&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#p4103-heoi2014å¤§å·¥ç¨‹&quot;&gt;P4103 [HEOI2014]å¤§å·¥ç¨‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#p5504-jsoi2011æŸ æª¬&quot;&gt;P5504 [JSOI2011]æŸ æª¬&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#p2542-ahoi2005-èˆªçº¿è§„åˆ’&quot;&gt;P2542 [AHOI2005] èˆªçº¿è§„åˆ’&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#atcoder&quot;&gt;Atcoder&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#atcoder-grand-contest-048&quot;&gt;AtCoder Grand Contest 048&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#acl-beginner-contest&quot;&gt;ACL Beginner Contest&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#f---heights-and-pairs&quot;&gt;F - Heights and Pairs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#ç‰›å®¢&quot;&gt;ç‰›å®¢&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#icpcå°ç±³é‚€è¯·èµ›2&quot;&gt;ICPCå°ç±³é‚€è¯·èµ›2&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#a2020&quot;&gt;A.2020&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#isubsequence-pair&quot;&gt;I.Subsequence Pair&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- /TOC --&gt;
    
    </summary>
    
    
    
      <category term="è®­ç»ƒè®°å½•" scheme="http://yoursite.com/tags/%E8%AE%AD%E7%BB%83%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>è¦å¤±ä¸šäº†</title>
    <link href="http://yoursite.com/2020/12/31/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2020/12/31/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/</id>
    <published>2020-12-31T02:47:00.000Z</published>
    <updated>2021-01-22T12:24:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¦å¤±ä¸šäº†</p><a id="more"></a><!-- TOC --><ul><li><a href="#è®¡ç®—æœºç½‘ç»œ">è®¡ç®—æœºç½‘ç»œ</a><ul><li><a href="#osi">OSI</a></li><li><a href="#è¾“å…¥urlä¹‹å">è¾“å…¥URLä¹‹å</a><ul><li><a href="#æ„å»ºè¯·æ±‚">æ„å»ºè¯·æ±‚</a></li></ul></li><li><a href="#tcp-ip">TCP IP</a><ul><li><a href="#åŒºåˆ«">åŒºåˆ«</a></li><li><a href="#tcpçš„å¯é è¿æ¥-æŠ¥æ–‡çš„å¾€è¿”æ—¶é—´rtt">TCPçš„å¯é è¿æ¥ æŠ¥æ–‡çš„å¾€è¿”æ—¶é—´RTT</a><ul><li><a href="#æ ¡éªŒå’Œ">æ ¡éªŒå’Œï¼š</a></li><li><a href="#ç¡®è®¤åº”ç­”ackæœºåˆ¶">ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æœºåˆ¶ï¼š</a></li><li><a href="#è¶…æ—¶é‡ä¼ ">è¶…æ—¶é‡ä¼ ï¼š</a></li><li><a href="#è¿æ¥ç®¡ç†æœºåˆ¶">è¿æ¥ç®¡ç†æœºåˆ¶</a></li><li><a href="#æµé‡æ§åˆ¶">æµé‡æ§åˆ¶ï¼š</a></li><li><a href="#æ‹¥å¡æ§åˆ¶">æ‹¥å¡æ§åˆ¶ï¼š</a></li><li><a href="#åœæ­¢ç­‰å¾…åè®®">åœæ­¢ç­‰å¾…åè®®</a></li></ul></li><li><a href="#tcpä¸‰æ¬¡æ¡æ‰‹">TCPä¸‰æ¬¡æ¡æ‰‹</a><ul><li><a href="#tcpå››æ¬¡æ¡æ‰‹">TCPå››æ¬¡æ¡æ‰‹</a></li></ul></li><li><a href="#ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹å…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹">ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ</a></li><li><a href="#ä¸ºä»€ä¹ˆtime_waitçŠ¶æ€éœ€è¦ç»è¿‡2mslæœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´æ‰èƒ½è¿”å›åˆ°closeçŠ¶æ€">ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ</a></li><li><a href="#http">http</a></li></ul></li><li><a href="#http-1">HTTP</a><ul><li><a href="#æŠ¥æ–‡æ„æˆ">æŠ¥æ–‡æ„æˆ</a><ul><li><a href="#å“åº”æŠ¥æ–‡">å“åº”æŠ¥æ–‡</a></li></ul></li><li><a href="#http-çŠ¶æ€ç ">HTTP çŠ¶æ€ç </a></li><li><a href="#http10å’Œhttp11çš„åŒºåˆ«">HTTP1.0å’ŒHTTP1.1çš„åŒºåˆ«</a></li><li><a href="#http-å’Œ-https-çš„åŒºåˆ«">http å’Œ https çš„åŒºåˆ«</a><ul><li><a href="#https-ä¼˜ç‚¹-ç¼ºç‚¹">https ä¼˜ç‚¹ ç¼ºç‚¹</a></li></ul></li><li><a href="#getå’Œpostçš„åŒºåˆ«">GETå’ŒPOSTçš„åŒºåˆ«</a></li></ul></li><li><a href="#ip-macåœ°å€">IP MACåœ°å€</a><ul><li><a href="#tcpip-æ•°æ®é“¾è·¯äº¤äº’è¿‡ç¨‹">TCP/IP æ•°æ®é“¾è·¯äº¤äº’è¿‡ç¨‹ã€‚</a></li></ul></li></ul></li><li><a href="#æ•°æ®åº“">æ•°æ®åº“</a><ul><li><a href="#redis">redis</a><ul><li><a href="#ä¸mongodb-æ•°æ®åº“">ä¸mongodb æ•°æ®åº“</a></li><li><a href="#æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</a></li></ul></li></ul></li><li><a href="#c">C++</a><ul><li><a href="#è™šå‡½æ•°ä»¥åŠå¤šæ€">è™šå‡½æ•°ä»¥åŠå¤šæ€</a></li><li><a href="#ææ„å‡½æ•°-è™šå‡½æ•°">ææ„å‡½æ•° è™šå‡½æ•°</a></li><li><a href="#å…³äºè™šå‡½æ•°çš„å¸¸è§é—®é¢˜">å…³äºè™šå‡½æ•°çš„å¸¸è§é—®é¢˜</a><ul><li><a href="#è™šå‡½æ•°çš„ä»£ä»·">è™šå‡½æ•°çš„ä»£ä»·</a></li><li><a href="#é‚£äº›å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°">é‚£äº›å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Ÿ</a></li><li><a href="#è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°çš„åŒºåˆ«">è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="#è±å½¢ç»§æ‰¿çš„å†…å­˜ç»“æ„å¦‚ä½•è§£å†³è±å½¢ç»§æ‰¿å­˜åœ¨çš„é—®é¢˜">è±å½¢ç»§æ‰¿çš„å†…å­˜ç»“æ„ï¼Ÿå¦‚ä½•è§£å†³è±å½¢ç»§æ‰¿å­˜åœ¨çš„é—®é¢˜ï¼Ÿ</a></li><li><a href="#è™šææ„å‡½æ•°çš„ä½œç”¨çˆ¶ç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆä¸€å®šè¦è®¾ç½®æˆè™šå‡½æ•°">è™šææ„å‡½æ•°çš„ä½œç”¨ï¼Ÿçˆ¶ç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆä¸€å®šè¦è®¾ç½®æˆè™šå‡½æ•°ï¼Ÿ</a></li><li><a href="#æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä¸ºä»€ä¹ˆä¸å¯ä»¥è°ƒç”¨è™šå‡½æ•°">æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä¸ºä»€ä¹ˆä¸å¯ä»¥è°ƒç”¨è™šå‡½æ•°ï¼Ÿ</a></li><li><a href="#æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½ä¸ºè™šå‡½æ•°ä»€ä¹ˆæƒ…å†µä¸‹ææ„å‡½æ•°å¿…é¡»ä¸ºè™šå‡½æ•°">æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½ä¸ºè™šå‡½æ•°ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ææ„å‡½æ•°å¿…é¡»ä¸ºè™šå‡½æ•°ï¼Ÿ</a></li></ul></li><li><a href="#å­—èŠ‚å¯¹é½">å­—èŠ‚å¯¹é½</a><ul><li><a href="#å­—èŠ‚å¯¹é½çš„ç»†èŠ‚å’Œç¼–è¯‘å™¨å®ç°ç›¸å…³ä½†ä¸€èˆ¬è€Œè¨€æ»¡è¶³ä¸‰ä¸ªå‡†åˆ™">å­—èŠ‚å¯¹é½çš„ç»†èŠ‚å’Œç¼–è¯‘å™¨å®ç°ç›¸å…³ï¼Œä½†ä¸€èˆ¬è€Œè¨€ï¼Œæ»¡è¶³ä¸‰ä¸ªå‡†åˆ™ï¼š</a></li></ul></li><li><a href="#cä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µ">C++ä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µ</a></li><li><a href="#newå’Œmallocçš„åŒºåˆ«">newå’Œmallocçš„åŒºåˆ«</a><ul><li><a href="#å±æ€§">å±æ€§</a></li><li><a href="#å‚æ•°">å‚æ•°</a></li><li><a href="#è¿”å›ç±»å‹">è¿”å›ç±»å‹</a></li><li><a href="#åˆ†é…å¤±è´¥">åˆ†é…å¤±è´¥</a></li><li><a href="#è‡ªå®šä¹‰ç±»å‹">è‡ªå®šä¹‰ç±»å‹</a></li><li><a href="#é‡è½½">é‡è½½</a></li><li><a href="#å†…å­˜åŒºåŸŸ">å†…å­˜åŒºåŸŸ</a><ul><li><a href="#å·¦å€¼å’Œå³å€¼çš„åŒºåˆ«å³å€¼å¼•ç”¨çš„æ¦‚å¿µåŠå…¶åº”ç”¨åœºæ™¯">å·¦å€¼å’Œå³å€¼çš„åŒºåˆ«ï¼Œå³å€¼å¼•ç”¨çš„æ¦‚å¿µåŠå…¶åº”ç”¨åœºæ™¯</a></li></ul></li><li><a href="#å·¦å€¼lvalue">å·¦å€¼(lvalue)ï¼š</a></li><li><a href="#å³å€¼rvalue">å³å€¼(rvalue)ï¼š</a></li><li><a href="#å·¦å³å€¼è½¬æ¢">å·¦å³å€¼è½¬æ¢</a><ul><li><a href="#å·¦å€¼å¼•ç”¨">å·¦å€¼å¼•ç”¨</a></li><li><a href="#å³å€¼å¼•ç”¨">å³å€¼å¼•ç”¨</a></li></ul></li><li><a href="#å³å€¼å¼•ç”¨çš„ç”¨é€”">å³å€¼å¼•ç”¨çš„ç”¨é€”</a></li></ul></li><li><a href="#freeä¸deleteçš„åŒºåˆ«">freeä¸deleteçš„åŒºåˆ«</a></li><li><a href="#å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ">å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</a><ul><li><a href="#é™æ€å‡½æ•°">é™æ€å‡½æ•°</a></li><li><a href="#ç±»çš„é™æ€æˆå‘˜">ç±»çš„é™æ€æˆå‘˜</a></li></ul></li><li><a href="#castè½¬æ¢">castè½¬æ¢</a></li><li><a href="#dynamic_cast">dynamic_cast</a></li><li><a href="#reinterpret_cast">reinterpret_cast</a></li><li><a href="#æŒ‡é’ˆä¸å¼•ç”¨">æŒ‡é’ˆä¸å¼•ç”¨</a></li><li><a href="#virtualå…³é”®å­—çš„ä½œç”¨">virtualå…³é”®å­—çš„ä½œç”¨</a></li><li><a href="#resize-reserve">resize reserve</a></li><li><a href="#æ™ºèƒ½æŒ‡é’ˆ">æ™ºèƒ½æŒ‡é’ˆ</a></li><li><a href="#é™æ€å‡½æ•°ä¸è™šå‡½æ•°çš„åŒºåˆ«">é™æ€å‡½æ•°ä¸è™šå‡½æ•°çš„åŒºåˆ«</a></li><li><a href="#é‡è½½-é‡å†™">é‡è½½ é‡å†™</a></li><li><a href="#è™šå‡½æ•°å’Œå¤šæ€">è™šå‡½æ•°å’Œå¤šæ€</a></li><li><a href="#newdelete-mallocfree-çš„åŒºåˆ«">new/delete malloc/free çš„åŒºåˆ«</a></li><li><a href="#è™šå‡½æ•°è¡¨å…·ä½“æ˜¯æ€ä¹ˆå®ç°è¿è¡Œæ—¶å¤šæ€çš„">è™šå‡½æ•°è¡¨å…·ä½“æ˜¯æ€ä¹ˆå®ç°è¿è¡Œæ—¶å¤šæ€çš„ï¼Ÿ</a></li></ul></li><li><a href="#æ“ä½œç³»ç»Ÿ">æ“ä½œç³»ç»Ÿ</a><ul><li><a href="#ç”¨æˆ·æ€ä¸å†…æ ¸æ€">ç”¨æˆ·æ€ä¸å†…æ ¸æ€</a></li><li><a href="#ä¸Šä¸‹æ–‡åˆ‡æ¢">ä¸Šä¸‹æ–‡åˆ‡æ¢</a></li><li><a href="#è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¦‚å¿µ">è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¦‚å¿µ</a><ul><li><a href="#è¿›ç¨‹">è¿›ç¨‹</a></li><li><a href="#çº¿ç¨‹">çº¿ç¨‹</a></li><li><a href="#åŒºåˆ«-1">åŒºåˆ«</a></li><li><a href="#è¿›ç¨‹è°ƒåº¦ç®—æ³•">è¿›ç¨‹è°ƒåº¦ç®—æ³•</a></li><li><a href="#è¿›ç¨‹é—´é€šä¿¡æ–¹å¼">è¿›ç¨‹é—´é€šä¿¡æ–¹å¼</a><ul><li><a href="#æ™®é€šç®¡é“pipe">æ™®é€šç®¡é“PIPE</a></li><li><a href="#å‘½åç®¡é“fifo">å‘½åç®¡é“FIFO</a></li><li><a href="#ç³»ç»Ÿipc">ç³»ç»ŸIPC</a></li></ul></li><li><a href="#çº¿ç¨‹é—´é€šä¿¡æ–¹å¼">çº¿ç¨‹é—´é€šä¿¡æ–¹å¼</a></li></ul></li><li><a href="#linux-è™šæ‹Ÿåœ°å€ç©ºé—´">Linux è™šæ‹Ÿåœ°å€ç©ºé—´</a><ul><li><a href="#å¥½å¤„">å¥½å¤„</a></li></ul></li><li><a href="#ä»£ä»·">ä»£ä»·</a></li><li><a href="#å¹¶å‘-å¹¶è¡Œ">å¹¶å‘ å¹¶è¡Œ</a></li><li><a href="#osç¼ºé¡µç½®æ¢ç®—æ³•">OSç¼ºé¡µç½®æ¢ç®—æ³•</a></li><li><a href="#æ­»é”">æ­»é”</a><ul><li><a href="#å¿…è¦æ¡ä»¶">å¿…è¦æ¡ä»¶</a></li></ul></li><li><a href="#è§£å†³æ–¹æ³•">è§£å†³æ–¹æ³•</a></li><li><a href="#epoll">epoll</a></li><li><a href="#tcpå’Œudpå¯ä»¥åŒæ—¶ç›‘å¬ç›¸åŒçš„ç«¯å£å—">TCPå’ŒUDPå¯ä»¥åŒæ—¶ç›‘å¬ç›¸åŒçš„ç«¯å£å—</a></li><li><a href="#cookieå’Œsessionæœ‰ä»€ä¹ˆåŒºåˆ«">COOKIEå’ŒSESSIONæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li></ul></li></ul><!-- /TOC --><h1 id="è®¡ç®—æœºç½‘ç»œ"><a href="#è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="è®¡ç®—æœºç½‘ç»œ"></a>è®¡ç®—æœºç½‘ç»œ</h1><h2 id="OSI"><a href="#OSI" class="headerlink" title="OSI"></a>OSI</h2><p>ä¸ƒå±‚åˆ’åˆ†ä¸º</p><ul><li>åº”ç”¨å±‚(HTTPï¼ŒFTPï¼ŒDNS) æ–‡ä»¶ä¼ è¾“ï¼Œç”µå­é‚®ä»¶ï¼Œæ–‡ä»¶æœåŠ¡ï¼Œè™šæ‹Ÿç»ˆç«¯ </li><li>è¡¨ç¤ºå±‚ï¼ˆJPEGï¼ŒASIIï¼‰æ•°æ®æ ¼å¼åŒ–ï¼Œä»£ç è½¬æ¢ï¼Œæ•°æ®åŠ å¯†</li><li>ä¼šè¯å±‚ï¼ˆRPCï¼ŒNFSï¼‰ è§£é™¤æˆ–å»ºç«‹ä¸åˆ«çš„æ¥ç‚¹çš„è”ç³»</li><li>ä¼ è¾“å±‚ï¼ˆTCPï¼ŒUDPï¼‰ æä¾›ç«¯å¯¹ç«¯çš„æ¥å£</li><li>ç½‘ç»œå±‚ (IPï¼ŒARPï¼ŒICMP) ä¸ºæ•°æ®åŒ…é€‰æ‹©è·¯ç”±</li><li>æ•°æ®é“¾è·¯å±‚(MACï¼ŒVLANï¼ŒPPP) ä¼ è¾“æœ‰åœ°å€çš„å¸§ä»¥åŠé”™è¯¯æ£€æµ‹åŠŸèƒ½</li><li>ç‰©ç†å±‚ã€‚</li></ul><p>äº”å±‚åˆ’åˆ†ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚ã€‚</p><p>å››å±‚åˆ’åˆ†ä¸ºï¼šåº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€ç½‘ç»œæ¥å£å±‚ã€‚</p><h2 id="è¾“å…¥URLä¹‹å"><a href="#è¾“å…¥URLä¹‹å" class="headerlink" title="è¾“å…¥URLä¹‹å"></a>è¾“å…¥URLä¹‹å</h2><ul><li><p>æµè§ˆå™¨æŸ¥æ‰¾åŸŸåå¯¹åº”çš„IPåœ°å€<br>DNSæŸ¥æ‰¾è¿‡ç¨‹ä¸ºï¼š<br>æµè§ˆå™¨ç¼“å­˜-&gt;ç³»ç»Ÿç¼“å­˜-&gt;è·¯ç”±å™¨ç¼“å­˜-&gt;ISP DNSç¼“å­˜-&gt;é€’å½’æœç´¢<br>é€’å½’æœç´¢è¿‡ç¨‹ä¸ºï¼šä»æ ¹åŸŸåæœåŠ¡å™¨åˆ°é¡¶çº§åŸŸåæœåŠ¡å™¨åˆ°ä½ æŸ¥è¯¢çš„åŸŸåæœåŠ¡å™¨ã€‚</p></li><li><p>æµè§ˆå™¨æ‰“å¼€TCPè¿æ¥ï¼ˆé»˜è®¤ç«¯å£ä¸º80ï¼‰ï¼Œå‘è¯¥IPçš„æœåŠ¡å™¨å‘é€ä¸€æ¡HTTPè¯·æ±‚ï¼Œå¦‚æœæµè§ˆå™¨å­˜å‚¨äº†è¯¥åŸŸåä¸‹çš„cookieï¼Œé‚£ä¹ˆcookieä¹Ÿä¼šæ”¾å…¥httpè¯·æ±‚ä¸­</p></li><li>æœåŠ¡å™¨ç»™æµè§ˆå™¨è¿›è¡Œä¸€ä¸ª301æ°¸ä¹…é‡å®šå‘å“åº”ã€‚è¯¥IPå¯¹åº”çš„æœåŠ¡å™¨å¾ˆå¯èƒ½æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œæ¯”å¦‚ä½ è¾“å…¥â€œ<a href="http://baidu.comâ€,è€Œä¸æ˜¯â€œhttp://www.baidu.comâ€,æŒ‰é“ç†è¿™ä¸¤ä¸ªç½‘å€å¯¹åº”çš„æ˜¯åŒä¸€ä¸ªç½‘é¡µï¼Œå› æ­¤é€šè¿‡ä»£ç†æœåŠ¡å™¨çš„æ–¹å¼è¿›è¡Œé‡å®šå‘ç›¸åº”ï¼Œè®©è¿™ä¸¤ä¸ªç½‘å€è®¿é—®çš„æ˜¯åŒä¸€ä¸ªç½‘é¡µã€‚" target="_blank" rel="noopener">http://baidu.comâ€,è€Œä¸æ˜¯â€œhttp://www.baidu.comâ€,æŒ‰é“ç†è¿™ä¸¤ä¸ªç½‘å€å¯¹åº”çš„æ˜¯åŒä¸€ä¸ªç½‘é¡µï¼Œå› æ­¤é€šè¿‡ä»£ç†æœåŠ¡å™¨çš„æ–¹å¼è¿›è¡Œé‡å®šå‘ç›¸åº”ï¼Œè®©è¿™ä¸¤ä¸ªç½‘å€è®¿é—®çš„æ˜¯åŒä¸€ä¸ªç½‘é¡µã€‚</a></li><li>TCPè¿æ¥</li><li>æµè§ˆå™¨æ ¹æ®é‡å®šå‘åœ°å€å†æ¬¡è¿›è¡ŒHTTPè¯·æ±‚ã€‚</li><li>æœåŠ¡å™¨åˆ†æHTTPè¯·æ±‚ï¼Œç”ŸæˆHTTPå“åº”ï¼Œå°†å“åº”å‘ç»™å®¢æˆ·ç«¯ã€‚</li><li>æµè§ˆå™¨æ”¶åˆ°å“åº”å†…å®¹ä¹‹åï¼Œç”Ÿæˆä¸»é¡µæ¡†æ¶ï¼ŒåŒæ—¶å‘æœåŠ¡ç«¯ç»§ç»­å‘é€è¯·æ±‚ï¼Œè¯·æ±‚çš„å†…å®¹æ˜¯ä¸»é¡µé‡Œçš„ä¸€äº›èµ„æºï¼Œæ¯”å¦‚è¯´å›¾ç‰‡ã€è§†é¢‘ç­‰ã€‚</li><li>å¯¹äºé™æ€çš„é¡µé¢å†…å®¹ï¼Œæµè§ˆå™¨é€šå¸¸è¿›è¡Œç¼“å­˜ï¼Œå¯¹äºåŠ¨æ€çš„å†…å®¹é€šå¸¸ä¸ç¼“å­˜ï¼Œç¼“å­˜çš„æ—¶é—´ä¹Ÿæ˜¯æœ‰æœŸé™çš„ã€‚</li><li>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œå› ä¸ºæœ‰äº›é¡µé¢æ˜¾ç¤ºå®Œæˆä¹‹åå®¢æˆ·ç«¯ä»éœ€è¦ä¸æœåŠ¡ç«¯ä¿æŒè”ç³»ã€‚</li><li>æ•´ä¸ªè¿‡ç¨‹ç»“æŸä¹‹åï¼Œæµè§ˆå™¨å…³é—­TCPè¿æ¥ã€‚</li></ul><h3 id="æ„å»ºè¯·æ±‚"><a href="#æ„å»ºè¯·æ±‚" class="headerlink" title="æ„å»ºè¯·æ±‚"></a>æ„å»ºè¯·æ±‚</h3><ul><li>åº”ç”¨å±‚è¿›è¡ŒDNSè§£æ</li><li>åº”ç”¨å±‚ç”ŸæˆHTTPè¯·æ±‚æŠ¥æ–‡</li><li>ä¼ è¾“å±‚å»ºç«‹TCPè¿æ¥ å› TCPæ˜¯ä¸€ä¸ªå¯é çš„ä¼ è¾“æ§åˆ¶åè®®ï¼Œä¼ è¾“å±‚è¿˜ä¼šåŠ å…¥åºåˆ—å·ã€ç¡®è®¤å·ã€çª—å£å¤§å°ã€æ ¡éªŒå’Œç­‰å‚æ•°ï¼Œå…±æ·»åŠ 20å­—èŠ‚çš„å¤´éƒ¨ä¿¡æ¯</li><li>ç½‘ç»œå±‚ä½¿ç”¨IPåè®®æ¥é€‰æ‹©è·¯çº¿</li></ul><h2 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP IP"></a>TCP IP</h2><h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><ul><li>TCPæ˜¯é¢å‘è¿æ¥çš„ï¼Œå¯é æ€§é«˜ï¼ŒUDPæ˜¯åŸºäºéè¿æ¥çš„ï¼Œå¯é æ€§ä½ã€‚</li><li>TCPä¸‰æ¬¡æ¡æ‰‹å»¶è¿Ÿé«˜ï¼Œå®æ—¶æ€§è¾ƒå¼ºã€‚</li><li>åœ¨ä¼ è¾“ç›¸åŒå¤§å°æ•°æ®æ—¶ï¼ŒTCPé¦–éƒ¨å¼€é”€å¤§ï¼ŒæŠ¥å¤´æ›´å¤æ‚ï¼Œå®é™…ä¿æŠ¤æ•°æ®è¾ƒå°‘ã€‚ ä½†TCPæä¾›è¶…æ—¶é‡ä¼ æœºåˆ¶ï¼Œä¿è¯ä¸ä¼šå‡ºç°ä¸¢åŒ…ä¹±åºã€‚UDPæœ‰ä¸¢åŒ…ã€‚</li><li>TCPæä¾›åŒå…¨å·¥é€šä¿¡ï¼Œæ¯æ¡TCPçš„è¿æ¥åªèƒ½ç‚¹åˆ°ç‚¹ã€‚UDPæ”¯æŒä¸€å¯¹å¤šï¼Œå¤šå¯¹ä¸€ï¼Œå¤šå¯¹å¤šçš„äº¤äº’é€šä¿¡ã€‚</li><li>æ•°æ®é“¾è·¯å±‚å®ç°ç½‘ç»œç›¸é‚»ç»“ç‚¹é—´å¯é çš„æ•°æ®é€šä¿¡</li><li>ç‰©ç†å±‚ä¼ è¾“æ•°æ®</li></ul><p>æ„å»ºTCPè¯·æ±‚ä¼šå¢åŠ å¤§é‡çš„ç½‘ç»œæ—¶å»¶ï¼Œå¸¸ç”¨çš„ä¼˜åŒ–æ–¹å¼å¦‚ä¸‹æ‰€ç¤º</p><ul><li><p>èµ„æºæ‰“åŒ…ï¼Œåˆå¹¶è¯·æ±‚</p></li><li><p>å¤šä½¿ç”¨ç¼“å­˜ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“</p></li><li><p>ä½¿ç”¨keep-aliveå»ºç«‹æŒä¹…è¿æ¥</p></li><li><p>ä½¿ç”¨å¤šä¸ªåŸŸåï¼Œå¢åŠ æµè§ˆå™¨çš„èµ„æºå¹¶å‘åŠ è½½æ•°ï¼Œæˆ–è€…ä½¿ç”¨HTTP2çš„ç®¡é“åŒ–è¿æ¥çš„å¤šè·¯å¤ç”¨æŠ€æœ¯</p></li></ul><h3 id="TCPçš„å¯é è¿æ¥-æŠ¥æ–‡çš„å¾€è¿”æ—¶é—´RTT"><a href="#TCPçš„å¯é è¿æ¥-æŠ¥æ–‡çš„å¾€è¿”æ—¶é—´RTT" class="headerlink" title="TCPçš„å¯é è¿æ¥ æŠ¥æ–‡çš„å¾€è¿”æ—¶é—´RTT"></a>TCPçš„å¯é è¿æ¥ æŠ¥æ–‡çš„å¾€è¿”æ—¶é—´RTT</h3><p>åº”ç”¨æ•°æ®è¢«åˆ†å‰²æˆTCPè®¤ä¸ºæœ€é€‚åˆå‘é€çš„æ•°æ®å—ã€‚ </p><h4 id="æ ¡éªŒå’Œï¼š"><a href="#æ ¡éªŒå’Œï¼š" class="headerlink" title="æ ¡éªŒå’Œï¼š"></a>æ ¡éªŒå’Œï¼š</h4><p>å‘é€çš„æ•°æ®åŒ…çš„äºŒè¿›åˆ¶ç›¸åŠ ç„¶åå–åï¼Œç›®çš„æ˜¯æ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„ä»»ä½•å˜åŒ–ã€‚å¦‚æœæ”¶åˆ°æ®µçš„æ£€éªŒå’Œæœ‰å·®é”™ï¼ŒTCPå°†ä¸¢å¼ƒè¿™ä¸ªæŠ¥æ–‡æ®µå’Œä¸ç¡®è®¤æ”¶åˆ°æ­¤æŠ¥æ–‡æ®µã€‚ </p><h4 id="ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æœºåˆ¶ï¼š"><a href="#ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æœºåˆ¶ï¼š" class="headerlink" title="ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æœºåˆ¶ï¼š"></a>ç¡®è®¤åº”ç­”ï¼ˆACKï¼‰æœºåˆ¶ï¼š</h4><p>TCPå°†æ¯ä¸ªå­—èŠ‚çš„æ•°æ®éƒ½è¿›è¡Œäº†ç¼–å·ï¼Œå³ä¸ºåºåˆ—å·ã€‚ç¡®è®¤åºå·=åºå·+1<br>æ¥æ”¶æ–¹æ”¶åˆ°æŠ¥æ–‡å°±ä¼šç¡®è®¤ï¼ˆç´¯ç§¯ç¡®è®¤ï¼šå¯¹æ‰€æœ‰æŒ‰åºæ¥æ”¶çš„æ•°æ®çš„ç¡®è®¤ï¼‰<br>TCPç»™å‘é€çš„æ¯ä¸€ä¸ªåŒ…è¿›è¡Œç¼–å·ï¼Œæ¥æ”¶æ–¹å¯¹æ•°æ®åŒ…è¿›è¡Œæ’åºï¼ŒæŠŠæœ‰åºæ•°æ®ä¼ é€ç»™åº”ç”¨å±‚ã€‚ </p><h4 id="è¶…æ—¶é‡ä¼ ï¼š"><a href="#è¶…æ—¶é‡ä¼ ï¼š" class="headerlink" title="è¶…æ—¶é‡ä¼ ï¼š"></a>è¶…æ—¶é‡ä¼ ï¼š</h4><p>å½“TCPå‘å‡ºä¸€ä¸ªæ®µåï¼Œå®ƒå¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç­‰å¾…ç›®çš„ç«¯ç¡®è®¤æ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡æ®µã€‚å¦‚æœä¸èƒ½åŠæ—¶æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œå°†é‡å‘è¿™ä¸ªæŠ¥æ–‡æ®µã€‚ </p><p>å¦‚æœä¸»æœºAæœªæ”¶åˆ°Bå‘æ¥çš„ç¡®è®¤åº”ç­”ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºACKä¸¢äº†ã€‚å› æ­¤ä¸»æœºBä¼šæ”¶åˆ°å¾ˆå¤šé‡å¤çš„æ•°æ®ï¼Œé‚£ä¹ˆï¼ŒTCPåè®®éœ€è¦èƒ½å¤Ÿè¯†åˆ«å‡ºé‚£äº›åŒ…æ˜¯é‡å¤çš„åŒ…ï¼Œå¹¶ä¸”æŠŠé‡å¤çš„åŒ…ä¸¢å¼ƒï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ç”¨å‰é¢æåˆ°çš„åºåˆ—å·ï¼Œå¾ˆå®¹æ˜“åšåˆ°å»é‡çš„æ•ˆæœ</p><p>è¶…æ—¶é‡ä¼ çš„æ—¶é—´è®¾ç½®çš„å¤ªçŸ­ï¼Œä¼šå¼•èµ·å¾ˆå¤šæŠ¥æ–‡çš„ä¸å¿…è¦é‡ä¼ ï¼›<br>æ—¶é—´è®¾ç½®çš„è¿‡é•¿ï¼Œåˆä¼šä½¿ç½‘ç»œçš„ç©ºé—²æ—¶é—´å¢å¤§ï¼Œé™ä½ä¼ è¾“æ•ˆç‡ï¼›<br>TCPé‡‡ç”¨äº†ä¸€ç§è‡ªé€‚åº”ç®—æ³•ï¼Œå®ƒè®°å½•ä¸€ä¸ªæŠ¥æ–‡å‘å‡ºçš„æ—¶é—´ï¼Œä»¥åŠæ”¶åˆ°ç›¸åº”ç¡®è®¤çš„æ—¶é—´ï¼Œè€…ä¸¤ä¸ªæ—¶é—´ä¹‹å·®å°±æ˜¯æŠ¥æ–‡çš„å¾€è¿”æ—¶é—´RTTï¼›<br>æœ€ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„æ—¶é—´ï¼Œä¿è¯ç¡®è®¤åº”ç­”ä¸€å®šèƒ½åœ¨è¿™ä¸ªæ—¶é—´å†…è¿”å›<br>Linuxä¸­ï¼Œè¶…æ—¶ä»¥500sä¸ºä¸€ä¸ªå•ä½è¿›è¡Œæ§åˆ¶ï¼Œæ¯æ¬¡åˆ¤å®šè¶…æ—¶é‡å‘çš„è¶…æ—¶æ—¶é—´éƒ½æ˜¯500msçš„æ•´æ•°å€ï¼›å¦‚æœé‡å‘ä¸€æ¬¡ä»ç„¶å¾—ä¸åˆ°åº”ç­”ï¼Œç­‰å¾…2<em>500msåå†è¿›è¡Œé‡ä¼ ï¼›å¦‚æœä»ç„¶å¾—ä¸åˆ°åº”ç­”ï¼Œç­‰å¾…4</em>500msè¿›è¡Œé‡ä¼ ï¼Œä¾æ¬¡ç±»æ¨ï¼Œä»¥æŒ‡æ•°å½¢å¼é€’å¢;ç´¯ç§¯åˆ°ä¸€å®šçš„é‡ä¼ æ¬¡æ•°ï¼ŒTCPè®¤ä¸ºç½‘ç»œæˆ–è€…å¯¹ç«¯ä¸»æœºå‡ºç°å¼‚å¸¸ï¼Œå¼ºåˆ¶å…³é—­è¿æ¥ã€‚</p><h4 id="è¿æ¥ç®¡ç†æœºåˆ¶"><a href="#è¿æ¥ç®¡ç†æœºåˆ¶" class="headerlink" title="è¿æ¥ç®¡ç†æœºåˆ¶"></a>è¿æ¥ç®¡ç†æœºåˆ¶</h4><p>TCPæ˜¯é¢å‘è¿æ¥çš„ï¼Œè¿›è¡Œå¯é æ€§ä¼ è¾“</p><h4 id="æµé‡æ§åˆ¶ï¼š"><a href="#æµé‡æ§åˆ¶ï¼š" class="headerlink" title="æµé‡æ§åˆ¶ï¼š"></a>æµé‡æ§åˆ¶ï¼š</h4><p>è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«</p><p>TCPè¿æ¥çš„æ¯ä¸€æ–¹éƒ½æœ‰å›ºå®šå¤§å°çš„ç¼“å†²ç©ºé—´ï¼ŒTCPçš„æ¥æ”¶ç«¯åªå…è®¸å‘é€ç«¯å‘é€æ¥æ”¶ç«¯ç¼“å†²åŒºèƒ½æ¥çº³çš„æ•°æ®ã€‚å½“æ¥æ”¶æ–¹æ¥ä¸åŠå¤„ç†å‘é€æ–¹çš„æ•°æ®ï¼Œèƒ½æç¤ºå‘é€æ–¹é™ä½å‘é€çš„é€Ÿç‡ï¼Œé˜²æ­¢åŒ…ä¸¢å¤±ã€‚TCPä½¿ç”¨çš„æµé‡æ§åˆ¶åè®®æ˜¯å¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£åè®®ã€‚</p><p>æµé‡æ§åˆ¶çš„å®ç°æ–¹æ³•ï¼šæ¥æ”¶ç«¯å°†è‡ªå·±å¯æ¥å—çš„ç¼“å†²åŒºå¤§å°æ”¾å…¥TCPé¦–éƒ¨ä¸­çš„â€çª—å£å¤§å°å­—æ®µâ€ï¼Œé€šè¿‡ACKé€šçŸ¥å‘é€ç«¯ï¼›çª—å£å¤§å°å­—æ®µè¶Šå¤§ï¼Œè¯´æ˜ç½‘ç»œçš„ååé‡è¶Šé«˜ï¼›æ¥æ”¶ç«¯ä¸€æ—¦å‘ç°è‡ªå·±çš„ç¼“å†²åŒºå¿«æ»¡äº†ï¼Œå°±ä¼šå°†çª—å£å¤§å°è®¾ç½®æˆä¸€ä¸ªæ›´å°çš„å€¼ç»™å‘é€ç«¯ï¼›å‘é€ç«¯æ¥å—åˆ°è¿™ä¸ªçª—å£ä¹‹åï¼Œå°±ä¼šå‡æ…¢è‡ªå·±çš„å‘é€é€Ÿç‡ï¼›å¦‚æœæ¥å—ç¼“å†²åŒºæ»¡äº†ï¼Œå°±ä¼šå°†çª—å£è®¾ç½®ä¸º0ï¼Œè¿™æ—¶å‘é€æ–¹ä¸åœ¨å‘é€æ•°æ®ï¼Œä½†æ˜¯éœ€è¦å®šæœŸå‘é€ä¸€ä¸ªçª—å£æ¢æµ‹æ•°æ®æ®µï¼Œä½¿æ¥æ”¶ç«¯æŠŠçª—å£å¤§å°å‘Šè¯‰å‘é€ç«¯ã€‚</p><p>æ¥æ”¶æ–¹æœ‰å³æ—¶çª—å£ï¼ˆæ»‘åŠ¨çª—å£ï¼‰ï¼ŒéšACKæŠ¥æ–‡å‘é€</p><ul><li>æ•°æ®åŒ…åœ¨ä¼ é€è¿‡ç¨‹ä¸­ä¸¢å¤±äº†<br>å½“å‘é€ç«¯çš„æŸä¸€æ®µæŠ¥æ–‡ä¸¢å¤±åï¼Œå‘é€ç«¯ä¼šä¸€ç›´æ”¶åˆ°1001è¿™æ ·çš„ACKï¼›å¦‚æœå‘é€ç«¯ä¸»æœºè¿ç»­ä¸‰æ¬¡æ”¶åˆ°åŒæ ·çš„â€1001â€è¿™æ ·çš„åº”ç­”ï¼Œå°±ä¼šå°†å¯¹åº”çš„æ•°æ®1001-2000é‡æ–°å‘é€ï¼›å½“æˆåŠŸæ¥æ”¶åˆ°1001ä¹‹åï¼Œå†æ¬¡è¿”å›çš„ACKå°±æ˜¯6001äº†ï¼Œæ¥æ”¶ç«¯åœ¨ä¹‹å‰å°±å·²ç»æ”¶åˆ°ï¼ˆ2001-7000ï¼‰äº†ï¼Œè¢«æ”¾åˆ°äº†æ¥æ”¶ç«¯æ“ä½œç³»ç»Ÿå†…æ ¸çš„æ¥å—ç¼“å†²åŒºä¸­ã€‚è¿™ç§æœºåˆ¶è¢«ç§°ä½œå¿«é‡ä¼ </li><li>æ•°æ®åŒ…å·²ç»é€’è¾¾ï¼ŒACKä¸¢äº†<br>éƒ¨åˆ†ACKä¸¢å¤±äº†ä¸è¦ç´§ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡åç»­çš„ACKè¿›è¡Œç¡®è®¤ã€‚</li></ul><h4 id="æ‹¥å¡æ§åˆ¶ï¼š"><a href="#æ‹¥å¡æ§åˆ¶ï¼š" class="headerlink" title="æ‹¥å¡æ§åˆ¶ï¼š"></a>æ‹¥å¡æ§åˆ¶ï¼š</h4><p>å½“ç½‘ç»œæ‹¥å¡æ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚</p><p>æ…¢å¼€å§‹ ã€ æ‹¥å¡é¿å… ã€å¿«é‡ä¼  å’Œ å¿«æ¢å¤</p><h4 id="åœæ­¢ç­‰å¾…åè®®"><a href="#åœæ­¢ç­‰å¾…åè®®" class="headerlink" title="åœæ­¢ç­‰å¾…åè®®"></a>åœæ­¢ç­‰å¾…åè®®</h4><p>ä¹Ÿæ˜¯ä¸ºäº†å®ç°å¯é ä¼ è¾“çš„ï¼Œå®ƒçš„åŸºæœ¬åŸç†å°±æ˜¯æ¯å‘å®Œä¸€ä¸ªåˆ†ç»„å°±åœæ­¢å‘é€ï¼Œç­‰å¾…å¯¹æ–¹ç¡®è®¤ã€‚åœ¨æ”¶åˆ°ç¡®è®¤åå†å‘ä¸‹ä¸€ä¸ªåˆ†ç»„</p><h3 id="TCPä¸‰æ¬¡æ¡æ‰‹"><a href="#TCPä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="TCPä¸‰æ¬¡æ¡æ‰‹"></a>TCPä¸‰æ¬¡æ¡æ‰‹</h3><p>TCPçš„å‡ ä¸ªçŠ¶æ€ (SYN, FIN, ACK, PSH, RST, URG)</p><ul><li><p>SYN æ˜¯ TCP/IP å»ºç«‹è¿æ¥æ—¶ä½¿ç”¨çš„æ¡æ‰‹ä¿¡å·ã€‚åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹æ­£å¸¸çš„ TCP ç½‘ç»œè¿æ¥æ—¶ï¼Œ å®¢æˆ·æœºé¦–å…ˆå‘å‡ºä¸€ä¸ª SYN æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ SYN-ACK åº”ç­”è¡¨ç¤ºæ¥æ”¶åˆ°äº†è¿™ä¸ªæ¶ˆæ¯ï¼Œæœ€åå®¢æˆ·æœºå† ä»¥ ACK)æ¶ˆæ¯å“åº”ã€‚è¿™æ ·åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´æ‰èƒ½å»ºç«‹ èµ·å¯é çš„TCPè¿æ¥ï¼Œæ•°æ®æ‰å¯ä»¥åœ¨å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€’ã€‚</p></li><li><p>FINè¡¨ç¤ºå…³é—­è¿æ¥ï¼Œ</p></li><li><p>ACK Acknowledgement[,åœ¨æ•°æ®é€šä¿¡ä¼ è¾“ä¸­ï¼Œæ¥æ”¶ç«™å‘ç»™å‘é€ç«™çš„ä¸€ç§ä¼ è¾“æ§åˆ¶ å­—ç¬¦ã€‚å®ƒè¡¨ç¤ºç¡®è®¤å‘æ¥çš„æ•°æ®å·²ç»æ¥å—æ— è¯¯ã€‚ ]</p><p>åŒæ–¹é€šä¿¡æ— è¯¯å¿…é¡»æ˜¯ä¸¤è€…äº’ç›¸å‘é€ä¿¡æ¯éƒ½æ— è¯¯ã€‚ä¼ äº† SYNï¼Œè¯æ˜å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„é€šé“æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æ¥æ”¶æ–¹åˆ°å‘é€æ–¹çš„é€šé“è¿˜éœ€è¦ ACK ä¿¡å·æ¥è¿›è¡ŒéªŒè¯ã€‚</p><h4 id="TCPå››æ¬¡æ¡æ‰‹"><a href="#TCPå››æ¬¡æ¡æ‰‹" class="headerlink" title="TCPå››æ¬¡æ¡æ‰‹"></a>TCPå››æ¬¡æ¡æ‰‹</h4></li></ul><h3 id="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿æ¥çš„æ—¶å€™æ˜¯ä¸‰æ¬¡æ¡æ‰‹ï¼Œå…³é—­çš„æ—¶å€™å´æ˜¯å››æ¬¡æ¡æ‰‹ï¼Ÿ</h3><p>ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯å»ºç«‹å¯é çš„é€šä¿¡ä¿¡é“ï¼Œè¯´åˆ°é€šè®¯ï¼Œç®€å•æ¥è¯´å°±æ˜¯æ•°æ®çš„å‘é€ä¸æ¥æ”¶ï¼Œè€Œä¸‰æ¬¡æ¡æ‰‹æœ€ä¸»è¦çš„ç›®çš„å°±æ˜¯åŒæ–¹ç¡®è®¤è‡ªå·±ä¸å¯¹æ–¹çš„å‘é€ä¸æ¥æ”¶æ˜¯æ­£å¸¸çš„ã€‚</p><p>ä»»ä½•ä¸€æ–¹éƒ½å¯ä»¥åœ¨æ•°æ®ä¼ é€ç»“æŸåå‘å‡ºè¿æ¥é‡Šæ”¾çš„é€šçŸ¥ï¼Œå¾…å¯¹æ–¹ç¡®è®¤åè¿›å…¥åŠå…³é—­çŠ¶æ€ã€‚å½“å¦ä¸€æ–¹ä¹Ÿæ²¡ æœ‰æ•°æ®å†å‘é€çš„æ—¶å€™ï¼Œåˆ™å‘å‡ºè¿æ¥é‡Šæ”¾é€šçŸ¥ï¼Œå¯¹æ–¹ç¡®è®¤åå°±å®Œå…¨å…³é—­äº†TCPè¿æ¥ã€‚</p><p>ä¸¾ä¸ªä¾‹å­:A å’Œ B æ‰“ç”µè¯ï¼Œé€šè¯å³å°†ç»“æŸåï¼ŒA è¯´â€œæˆ‘æ²¡å•¥è¦è¯´çš„äº†â€ï¼ŒBå›ç­”â€œæˆ‘çŸ¥é“äº†â€ï¼Œä½†æ˜¯ B å¯ èƒ½è¿˜ä¼šæœ‰è¦è¯´çš„è¯ï¼ŒA ä¸èƒ½è¦æ±‚ B è·Ÿç€è‡ªå·±çš„èŠ‚å¥ç»“æŸé€šè¯ï¼Œäºæ˜¯ B å¯èƒ½åˆå·´æ‹‰å·´æ‹‰è¯´äº†ä¸€é€šï¼Œæœ€å B è¯´â€œæˆ‘è¯´å®Œäº†â€ï¼ŒA å›ç­”â€œçŸ¥é“äº†â€ï¼Œè¿™æ ·é€šè¯æ‰ç®—ç»“æŸã€‚</p><h3 id="ä¸ºä»€ä¹ˆTIME-WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL-æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´-æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆTIME-WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL-æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´-æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ"></a>ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSL(æœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´)æ‰èƒ½è¿”å›åˆ°CLOSEçŠ¶æ€ï¼Ÿ</h3><p>ç­”ï¼šè™½ç„¶æŒ‰é“ç†ï¼Œå››ä¸ªæŠ¥æ–‡éƒ½å‘é€å®Œæ¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›å…¥CLOSEçŠ¶æ€äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¿…é¡»å‡è±¡ç½‘ç»œæ˜¯ä¸å¯é çš„ï¼Œæœ‰å¯ä»¥æœ€åä¸€ä¸ªACKä¸¢å¤±ã€‚æ‰€ä»¥TIME_WAITçŠ¶æ€å°±æ˜¯ç”¨æ¥é‡å‘å¯èƒ½ä¸¢å¤±çš„ACKæŠ¥æ–‡ã€‚åœ¨Clientå‘é€å‡ºæœ€åçš„ACKå›å¤ï¼Œä½†è¯¥ACKå¯èƒ½ä¸¢å¤±ã€‚Serverå¦‚æœæ²¡æœ‰æ”¶åˆ°ACKï¼Œå°†ä¸æ–­é‡å¤å‘é€FINç‰‡æ®µã€‚æ‰€ä»¥Clientä¸èƒ½ç«‹å³å…³é—­ï¼Œå®ƒå¿…é¡»ç¡®è®¤Serveræ¥æ”¶åˆ°äº†è¯¥ACKã€‚Clientä¼šåœ¨å‘é€å‡ºACKä¹‹åè¿›å…¥åˆ°TIME_WAITçŠ¶æ€ã€‚Clientä¼šè®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œç­‰å¾…2MSLçš„æ—¶é—´ã€‚å¦‚æœåœ¨è¯¥æ—¶é—´å†…å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientä¼šé‡å‘ACKå¹¶å†æ¬¡ç­‰å¾…2MSLã€‚æ‰€è°“çš„2MSLæ˜¯ä¸¤å€çš„MSL(Maximum Segment Lifetime)ã€‚MSLæŒ‡ä¸€ä¸ªç‰‡æ®µåœ¨ç½‘ç»œä¸­æœ€å¤§çš„å­˜æ´»æ—¶é—´ï¼Œ2MSLå°±æ˜¯ä¸€ä¸ªå‘é€å’Œä¸€ä¸ªå›å¤æ‰€éœ€çš„æœ€å¤§æ—¶é—´ã€‚å¦‚æœç›´åˆ°2MSLï¼ŒClientéƒ½æ²¡æœ‰å†æ¬¡æ”¶åˆ°FINï¼Œé‚£ä¹ˆClientæ¨æ–­ACKå·²ç»è¢«æˆåŠŸæ¥æ”¶ï¼Œåˆ™ç»“æŸTCPè¿æ¥ã€‚</p><h3 id="http"><a href="#http" class="headerlink" title="http"></a>http</h3><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><h3 id="æŠ¥æ–‡æ„æˆ"><a href="#æŠ¥æ–‡æ„æˆ" class="headerlink" title="æŠ¥æ–‡æ„æˆ"></a>æŠ¥æ–‡æ„æˆ</h3><ul><li>è¯·æ±‚æ–¹æ³•  </li><li>è¯·æ±‚url</li><li>HTTPç‰ˆæœ¬å’Œåè®® </li><li>æŠ¥æ–‡å¤´éƒ¨</li><li>æŠ¥æ–‡ä½“</li></ul><h4 id="å“åº”æŠ¥æ–‡"><a href="#å“åº”æŠ¥æ–‡" class="headerlink" title="å“åº”æŠ¥æ–‡"></a>å“åº”æŠ¥æ–‡</h4><ul><li>çŠ¶æ€è¡Œï¼ˆHTTPç‰ˆæœ¬ çŠ¶æ€ç  çŠ¶æ€ç åŸå› ï¼‰å“åº”å¤´éƒ¨</li><li>å“åº”å†…å®¹</li></ul><h3 id="HTTP-çŠ¶æ€ç "><a href="#HTTP-çŠ¶æ€ç " class="headerlink" title="HTTP çŠ¶æ€ç "></a>HTTP çŠ¶æ€ç </h3><ul><li>1å¼€å¤´ï¼šä¿¡æ¯çŠ¶æ€ç </li><li>2å¼€å¤´ï¼šæˆåŠŸçŠ¶æ€ç  </li><li>3å¼€å¤´ï¼šé‡å®šå‘çŠ¶æ€ç </li><li>4å¼€å¤´ï¼šå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç  403 æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚å•æ‹’ç»æä¾›è¯·æ±‚</li><li><p>5å¼€å¤´ï¼šæœåŠ¡ç«¯é”™è¯¯çŠ¶æ€ç  </p><h3 id="HTTP1-0å’ŒHTTP1-1çš„åŒºåˆ«"><a href="#HTTP1-0å’ŒHTTP1-1çš„åŒºåˆ«" class="headerlink" title="HTTP1.0å’ŒHTTP1.1çš„åŒºåˆ«"></a>HTTP1.0å’ŒHTTP1.1çš„åŒºåˆ«</h3></li><li><p>HTTP 1.1æ”¯æŒé•¿è¿æ¥å’Œè¯·æ±‚çš„æµæ°´çº¿å¤„ç†ã€‚HTTP 1.0è§„å®šæµè§ˆå™¨ä¸æœåŠ¡å™¨åªä¿æŒçŸ­æš‚çš„è¿æ¥ï¼Œæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒæœåŠ¡å™¨å®Œæˆè¯·æ±‚å¤„ç†åç«‹å³æ–­å¼€TCPè¿æ¥ï¼ŒæœåŠ¡å™¨ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ã€‚</p></li><li>HTTP 1.1å¢åŠ hostå­—æ®µ</li><li>èŠ‚çº¦å¸¦å®½</li></ul><h3 id="http-å’Œ-https-çš„åŒºåˆ«"><a href="#http-å’Œ-https-çš„åŒºåˆ«" class="headerlink" title="http å’Œ https çš„åŒºåˆ«"></a>http å’Œ https çš„åŒºåˆ«</h3><ul><li>httpsåè®®éœ€è¦ç”³è¯·è¯ä¹¦</li><li>httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttpsåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ã€‚</li><li>httpç«¯å£(80),httpsç«¯å£(443)ã€‚</li><li>httpçš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼›HTTPSåè®®æ˜¯ç”±SSL+HTTPåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®æ›´åŠ å®‰å…¨</li></ul><h4 id="https-ä¼˜ç‚¹-ç¼ºç‚¹"><a href="#https-ä¼˜ç‚¹-ç¼ºç‚¹" class="headerlink" title="https ä¼˜ç‚¹ ç¼ºç‚¹"></a>https ä¼˜ç‚¹ ç¼ºç‚¹</h4><ul><li>å®‰å…¨</li><li>å¯ä»¥è®¤è¯ç”¨æˆ·å’ŒæœåŠ¡å™¨ï¼Œç¡®ä¿æ•°æ®å‘é€å€’æ­£ç¡®çš„ç”¨æˆ·ä¸Šã€‚</li><li>æ¡æ‰‹å»¶è¿Ÿé«˜</li><li>éƒ¨ç½²æˆæœ¬é«˜</li></ul><h3 id="GETå’ŒPOSTçš„åŒºåˆ«"><a href="#GETå’ŒPOSTçš„åŒºåˆ«" class="headerlink" title="GETå’ŒPOSTçš„åŒºåˆ«"></a>GETå’ŒPOSTçš„åŒºåˆ«</h3><ul><li>GET é€šè¿‡URL ä¼ é€’ï¼ŒPOSTæ”¾åœ¨request body</li><li>GETé•¿åº¦æœ‰é™åˆ¶</li><li>GETæ›´ä¸å®‰å…¨</li><li>GETåªèƒ½è¿›è¡ŒURLç¼–ç ï¼ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li><li>GETè¯·æ±‚å›æµè§ˆå™¨ä¸»åŠ¨Cache ï¼Œè€ŒPOST æ”¯æŒå¤šç»„ç¼–ç æ–¹å¼</li><li>GET è¯·æ±‚å‚æ•°å›å®Œæ•´ä¿ç•™åœ¨æµè§ˆå†å²è®°å½•é‡Œï¼ŒPOSTä¸ä¼šè¢«ä¿ç•™</li><li>æœ¬è´¨éƒ½æ˜¯TCPï¼Œé“¾æ¥</li><li>GETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼ŒPOSTäº§ç”Ÿä¸¤ä¸ªæ•°æ®åŒ…</li></ul><h2 id="IP-MACåœ°å€"><a href="#IP-MACåœ°å€" class="headerlink" title="IP MACåœ°å€"></a>IP MACåœ°å€</h2><ul><li>MACæ˜¯ç¡¬ä»¶åœ°å€,ç”¨æ¥å®šä½ç½‘ç»œè®¾å¤‡çš„ä½ç½®çš„ï¼Œä¸»è¦æœ‰æ•°æ®é“¾è·¯å±‚è´Ÿè´£ã€‚è€ŒIPåœ°å€æ˜¯IPåè®®æä¾›çš„ç»Ÿä¸€åœ°å€æ ¼å¼ï¼Œä¸ºäº’è”ç½‘ä¸Šæ¯ä¸ªç½‘ç»œå’Œæ¯ä¸€å°ä¸»æœºåˆ†é…ä¸€ä¸ªé€»è¾‘åœ°å€ä»¥æ­¤æ¥å±è”½ç‰©ç†åœ°å€çš„å·®å¼‚ã€‚</li></ul><h3 id="TCP-IP-æ•°æ®é“¾è·¯äº¤äº’è¿‡ç¨‹ã€‚"><a href="#TCP-IP-æ•°æ®é“¾è·¯äº¤äº’è¿‡ç¨‹ã€‚" class="headerlink" title="TCP/IP æ•°æ®é“¾è·¯äº¤äº’è¿‡ç¨‹ã€‚"></a>TCP/IP æ•°æ®é“¾è·¯äº¤äº’è¿‡ç¨‹ã€‚</h3><p>ç½‘ç»œå±‚ç­‰æ•°æ®é“¾è¹­ç”¨macåœ°å€ä½œä¸ºé€šä¿¡ç›®æ ‡ï¼Œæ•°æ®åŒ…è¾¾åˆ°ç½‘ç»œç­‰å‡†å¤‡å¾€æ•°æ®é“¾è·¯å±‚å±‚å‘é€çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå»è‡ªå·±çš„ARPç¼“å­˜æ ‡ï¼Œå¯»æ‰¾ç›®æ ‡IPçš„ç›®æ ‡åœ°å€ï¼Œå°±å°†IPçš„macåº•æ± å°è£…å€’é“¾è·¯å±‚æ•°æ®ä¿çš„åŒ…å¤´ã€‚å¦‚æœç¼“å­˜æ²¡æ‰¾æ‰¾åˆ°ï¼Œå°±ä¼šå‘èµ·å¹¿æ’­ï¼Œæ‰€æœ‰æ”¶åˆ°å¹¿æ’­çš„æœºå™¨çœ‹è¿™ä¸ªIPæ˜¯ä¸æ˜¯è‡ªå·±çš„ï¼Œåˆ™ä»¥å•baçš„å½¢å¼å°†è‡ªå·±MACåœ°å€å›å¤ç»™è¯·æ±‚çš„æœºå™¨ã€‚</p><h1 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h1><h2 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h2><h3 id="ä¸mongodb-æ•°æ®åº“"><a href="#ä¸mongodb-æ•°æ®åº“" class="headerlink" title="ä¸mongodb æ•°æ®åº“"></a>ä¸mongodb æ•°æ®åº“</h3><ul><li>å†…å­˜ç®¡ç†æœºåˆ¶ä¸Šï¼Œredis å…¨éƒ¨å­˜åœ¨å†…å­˜ï¼Œå®šæœŸå†™å…¥ç£ç›˜ï¼Œå½“å†…å­˜ä¸å¤Ÿé€‰æ‹©æŒ‡å®šçš„LRUç®—æ³•åˆ é™¤æ•°æ®ã€‚MongoDBæ•°æ®å­˜åœ¨å†…å­˜ï¼Œç”±Linux ç³»ç»Ÿmapå®ä¹ ï¼Œå†…å­˜ä¸å¤Ÿå°†çƒ­ç‚¹æ”¾å…¥å†…å­˜å…¶ä»–å­˜åœ¨ç£ç›˜ã€‚</li><li>æ”¯æŒçš„æ•°æ®ç»“æ„ HASH SET LIST</li></ul><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><ul><li>å­—ç¬¦ä¸²</li><li>åˆ—è¡¨</li><li>å“ˆå¸Œ</li><li>é›†åˆ</li><li>æœ‰åºé›†åˆ</li></ul><h1 id="C"><a href="#C" class="headerlink" title="C++"></a>C++</h1><h2 id="è™šå‡½æ•°ä»¥åŠå¤šæ€"><a href="#è™šå‡½æ•°ä»¥åŠå¤šæ€" class="headerlink" title="è™šå‡½æ•°ä»¥åŠå¤šæ€"></a>è™šå‡½æ•°ä»¥åŠå¤šæ€</h2><p>å¤šæ€çš„å®ç°ä¸»è¦åˆ†ä¸ºé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€ï¼Œé™æ€å¤šæ€ï¼Œé™æ€å¤šæ€ä¸»è¦æ˜¯é‡è£…è½½ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å°±å·²ç»ç¡®å®šï¼›åŠ¨æ€å¤šæ€æ˜¯ç”¨è™šå‡½æ•°æœºåˆ¶å®ç°çš„ï¼Œåœ¨è¿è¡ŒæœŸé—´åŠ¨æ€ç»‘å®šã€‚</p><p>è™šå‡½æ•°çš„å®ç°ï¼šåœ¨æœ‰è™šå‡½æ•°çš„è¡¨ä¸­ï¼Œç±»çš„çš„æœ€å¼€å§‹éƒ¨åˆ†æ˜¯ä¸€ä¸ªè™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œè¡¨ä¸­æ”¾äº†è™šå‡½æ•°çš„åœ°å€ï¼Œå®é™…è™šå‡½æ•°åœ¨ä»£ç æ®µã€‚å½“å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æ—¶å€™ä¹Ÿä¼šç»§æ‰¿å…¶å‡½æ•°è¡¨ï¼Œå½“å­ç±»é‡å†™çˆ¶ç±»ä¸­è™šå‡½æ•°æ—¶å€™ï¼Œä¼šå°†å…¶ç»§æ‰¿åˆ°è™šå‡½æ•°è¡¨ä¸­çš„åœ°å€æ›¿æ¢ä¸ºåŸæ¥é‡æ–°ç³»çš„å‡½æ•°åœ°å€ã€‚ä½¿ç”¨äº†è™šå‡½æ•°ä¼šå¢åŠ è®¿é—®å†…å­˜å¼€é”€ï¼Œé™ä½æ•ˆç‡ã€‚</p><h2 id="ææ„å‡½æ•°-è™šå‡½æ•°"><a href="#ææ„å‡½æ•°-è™šå‡½æ•°" class="headerlink" title="ææ„å‡½æ•° è™šå‡½æ•°"></a>ææ„å‡½æ•° è™šå‡½æ•°</h2><p>åŸºç±»çš„ææ„å‡½æ•°è¦æ˜¯è™šå‡½æ•°çš„åŸå› æ˜¯ï¼Œå¦‚æœåŸºç±»æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»ï¼ŒåŸºç±»çš„ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•°çš„è¯ï¼Œæ˜¯ä¸ä¼šè°ƒç”¨æ´¾ç”Ÿç±»çš„ææ„å‡½æ•°çš„ï¼Œåªä¼šè°ƒç”¨åŸºç±»çš„ææ„å‡½æ•°</p><h2 id="å…³äºè™šå‡½æ•°çš„å¸¸è§é—®é¢˜"><a href="#å…³äºè™šå‡½æ•°çš„å¸¸è§é—®é¢˜" class="headerlink" title="å…³äºè™šå‡½æ•°çš„å¸¸è§é—®é¢˜"></a>å…³äºè™šå‡½æ•°çš„å¸¸è§é—®é¢˜</h2><h3 id="è™šå‡½æ•°çš„ä»£ä»·"><a href="#è™šå‡½æ•°çš„ä»£ä»·" class="headerlink" title="è™šå‡½æ•°çš„ä»£ä»·"></a>è™šå‡½æ•°çš„ä»£ä»·</h3><p>1ï¼‰å¸¦æœ‰è™šå‡½æ•°çš„æ¯ä¸ªç±»ä¼šäº§ç”Ÿä¸€ä¸ªè™šå‡½æ•°è¡¨ï¼Œç”¨æ¥å­˜å‚¨è™šæˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ</p><p>2ï¼‰å¸¦æœ‰è™šå‡½æ•°çš„æ¯ä¸ªç±»éƒ½ä¼šæœ‰ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆ</p><p>3ï¼‰ä¸å†æ˜¯å†…æ•›å‡½æ•°ï¼Œå› ä¸ºå†…æ•›å‡½æ•°å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œæ›¿ä»£ï¼Œè€Œè™šå‡½æ•°è¡¨ç¤ºç­‰å¾…ï¼Œåœ¨è¿è¡Œé˜¶æ®µæ‰èƒ½ç¡®å®šåˆ°è¾¾é‡‡ç”¨å“ªç§å‡½æ•°ï¼Œæ‰€ä»¥è™šå‡½æ•°ä¸æ˜¯å†…æ•›å‡½æ•°</p><h3 id="é‚£äº›å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Ÿ"><a href="#é‚£äº›å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Ÿ" class="headerlink" title="é‚£äº›å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Ÿ"></a>é‚£äº›å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ï¼Ÿ</h3><p>1ï¼‰æ„é€ å‡½æ•°ï¼šå¯¹è±¡çš„è™šå‡½æ•°è¡¨æŒ‡é’ˆéœ€è¦é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–</p><p>2ï¼‰å†…è”å‡½æ•°ï¼šå†…è”å‡½æ•°å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œå‡½æ•°ä½“çš„æ›¿æ¢ï¼Œè€Œè™šå‡½æ•°éœ€è¦åœ¨è¿è¡ŒæœŸé—´è¿›è¡Œç¡®å®š</p><p>3ï¼‰é™æ€å‡½æ•°ï¼šé™æ€å‡½æ•°ä¸å±äºå¯¹è±¡è€Œå±äºç±»ï¼Œå› ä¸ºé™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰thisæŒ‡é’ˆï¼Œæ‰€ä»¥æ— æ³•è®¿é—®å¯¹è±¡çš„è™šè¡¨æŒ‡é’ˆï¼Œä¹Ÿå°±</p><p>æ— æ³•è®¿é—®ç±»çš„è™šå‡½æ•°è¡¨ï¼Œå°†é™æ€å‡½æ•°è®¾ç½®æˆè™šå‡½æ•°ä¹Ÿå°±æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œæ‰€ä»¥c++è¯­æ³•ä¸æ”¯æŒå°†é™æ€å‡½æ•°è®¾ç½®æˆè™šå‡½æ•°</p><p>4ï¼‰å‹å…ƒå‡½æ•°ï¼šå‹å…ƒå‡½æ•°ä¸å±äºç±»ï¼Œä¹Ÿä¸èƒ½è¢«ç»§æ‰¿ï¼Œæ²¡æœ‰ç»§æ‰¿ç‰¹æ€§çš„å‡½æ•°æ²¡æœ‰è™šå‡½æ•°çš„è¯´æ³•</p><p>5ï¼‰ç±»å¤–çš„æ™®é€šå‡½æ•°ï¼šç±»å¤–æ™®é€šå‡½æ•°ä¸æ˜¯ç±»çš„æˆå‘˜å‡½æ•°ï¼ŒåŒæ ·ä¸å…·å¤‡ç»§æ‰¿ç‰¹æ€§ï¼Œä¹Ÿå°±æ²¡æœ‰è™šå‡½æ•°çš„è¯´æ³•</p><h3 id="è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°çš„åŒºåˆ«ï¼Ÿ"><a href="#è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°çš„åŒºåˆ«ï¼Ÿ"></a>è™šå‡½æ•°å’Œçº¯è™šå‡½æ•°çš„åŒºåˆ«ï¼Ÿ</h3><p>1ï¼‰çº¯è™šå‡½æ•°åªæœ‰å®šä¹‰ï¼Œæ²¡æœ‰å®ç°ï¼Œè™šå‡½æ•°æ—¢æœ‰å®šä¹‰ï¼Œåˆæœ‰å®ç°</p><p>2ï¼‰å«æœ‰çº¯è™šå‡½æ•°çš„ç±»ä¸èƒ½å®šä¹‰å¯¹è±¡ï¼Œå«æœ‰è™šå‡½æ•°çš„ç±»å¯ä»¥å®šä¹‰å¯¹è±¡</p><h3 id="è±å½¢ç»§æ‰¿çš„å†…å­˜ç»“æ„ï¼Ÿå¦‚ä½•è§£å†³è±å½¢ç»§æ‰¿å­˜åœ¨çš„é—®é¢˜ï¼Ÿ"><a href="#è±å½¢ç»§æ‰¿çš„å†…å­˜ç»“æ„ï¼Ÿå¦‚ä½•è§£å†³è±å½¢ç»§æ‰¿å­˜åœ¨çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="è±å½¢ç»§æ‰¿çš„å†…å­˜ç»“æ„ï¼Ÿå¦‚ä½•è§£å†³è±å½¢ç»§æ‰¿å­˜åœ¨çš„é—®é¢˜ï¼Ÿ"></a>è±å½¢ç»§æ‰¿çš„å†…å­˜ç»“æ„ï¼Ÿå¦‚ä½•è§£å†³è±å½¢ç»§æ‰¿å­˜åœ¨çš„é—®é¢˜ï¼Ÿ</h3><p> View Code</p><p>1ï¼‰è±å½¢ç»§æ‰¿çš„å†…å­˜ç»“æ„ï¼šç°åœ¨æœ‰Aï¼ŒBï¼ŒCï¼ŒDå››ä¸ªç±»ï¼ŒBï¼ŒCåˆ†åˆ«ç»§æ‰¿Aç±»ï¼ŒDé€šè¿‡å¤šé‡ç»§æ‰¿ç»§æ‰¿äº†BCä¸¤ä¸ªç±»ï¼Œç°åœ¨Dç±»ä¸­æœ‰ä¸¤ä¸ªgetx()ï¼ŒDç±»ä¸çŸ¥é“è°ƒç”¨å“ªä¸€ä¸ªgetx()</p><p>2ï¼‰è±å½¢ç»§æ‰¿çš„è§£å†³åŠæ³•ï¼šè™šç»§æ‰¿</p><p>BCç±»éƒ½ç”¨Virtualæ ‡æ³¨ï¼Œä¿è¯åªæœ‰ä¸€ä¸ªgetx()è¢«åˆ›å»º</p><p> View Code</p><h3 id="è™šææ„å‡½æ•°çš„ä½œç”¨ï¼Ÿçˆ¶ç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆä¸€å®šè¦è®¾ç½®æˆè™šå‡½æ•°ï¼Ÿ"><a href="#è™šææ„å‡½æ•°çš„ä½œç”¨ï¼Ÿçˆ¶ç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆä¸€å®šè¦è®¾ç½®æˆè™šå‡½æ•°ï¼Ÿ" class="headerlink" title="è™šææ„å‡½æ•°çš„ä½œç”¨ï¼Ÿçˆ¶ç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆä¸€å®šè¦è®¾ç½®æˆè™šå‡½æ•°ï¼Ÿ"></a>è™šææ„å‡½æ•°çš„ä½œç”¨ï¼Ÿçˆ¶ç±»çš„ææ„å‡½æ•°ä¸ºä»€ä¹ˆä¸€å®šè¦è®¾ç½®æˆè™šå‡½æ•°ï¼Ÿ</h3><p>çˆ¶ç±»è™šææ„å‡½æ•°å°±æ˜¯ä¸ºäº†é¿å…å†…å­˜æ³„æ¼ï¼Œé˜²æ­¢å­ç±»å†…å­˜å¾—ä¸åˆ°é‡Šæ”¾é€ æˆå†…å­˜æ³„æ¼</p><p>1.å½“çˆ¶ç±»çš„ææ„å‡½æ•°ä¸å£°æ˜æˆè™šææ„å‡½æ•°æ—¶ï¼Œå½“å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œdeleteæ‰çˆ¶ç±»æŒ‡é’ˆï¼Œåªä¼šè°ƒåŠ¨çˆ¶ç±»çš„ææ„å‡½æ•°ï¼Œè€Œä¸ä¼šè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°ï¼Œä»è€Œé€ æˆå­ç±»å¯¹è±¡å†…å­˜æ³„æ¼</p><p>2.å½“çˆ¶ç±»çš„ææ„å‡½æ•°å£°æ˜æˆè™šææ„å‡½æ•°æ—¶ï¼Œå½“å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œçˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œdeleteæ‰çˆ¶ç±»æŒ‡é’ˆï¼Œå…ˆè°ƒåŠ¨çˆ¶ç±»çš„ææ„å‡½æ•°ï¼Œç„¶åè°ƒç”¨å­ç±»çš„ææ„å‡½æ•°ï¼Œä¸å­˜åœ¨å­ç±»å¯¹è±¡å†…å­˜æ³„æ¼çš„é—®é¢˜</p><p>åªè¦å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œåˆ™çˆ¶ç±»çš„è™šå‡½æ•°å¿…é¡»å®šä¹‰æˆè™šå‡½æ•°ï¼</p><h3 id="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä¸ºä»€ä¹ˆä¸å¯ä»¥è°ƒç”¨è™šå‡½æ•°ï¼Ÿ"><a href="#æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä¸ºä»€ä¹ˆä¸å¯ä»¥è°ƒç”¨è™šå‡½æ•°ï¼Ÿ" class="headerlink" title="æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä¸ºä»€ä¹ˆä¸å¯ä»¥è°ƒç”¨è™šå‡½æ•°ï¼Ÿ"></a>æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä¸ºä»€ä¹ˆä¸å¯ä»¥è°ƒç”¨è™šå‡½æ•°ï¼Ÿ</h3><p>èƒŒæ™¯çŸ¥è¯†ï¼š</p><p>1.æ„é€ å­ç±»å¯¹è±¡æ—¶ï¼Œé¦–å…ˆè°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°åˆå§‹åŒ–å¯¹è±¡çš„çˆ¶ç±»éƒ¨åˆ†ï¼Œåœ¨æ‰§è¡Œçˆ¶ç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œå¯¹è±¡çš„å­ç±»éƒ¨åˆ†éƒ½æ˜¯æœªåˆå§‹åŒ–çš„ï¼Œå®é™…ä¸Šæ­¤æ—¶å¯¹è±¡è¿˜ä¸æ˜¯ä¸€ä¸ªå­ç±»å¯¹è±¡</p><p>2.ææ„å­ç±»å¯¹è±¡æ—¶ï¼Œå…ˆææ„å­ç±»éƒ¨åˆ†ï¼Œç„¶åæŒ‰ç…§æ„é€ é¡ºåºé€†åºææ„çˆ¶ç±»éƒ¨åˆ†</p><p>æ‰€ä»¥åœ¨è¿è¡Œå­ç±»çš„æ„é€ å’Œææ„å‡½æ•°æ—¶ï¼Œå¯¹è±¡éƒ½æ˜¯ä¸å®Œæ•´çš„ï¼Œä¸ºäº†é€‚åº”è¿™ç§ä¸å®Œæ•´ï¼Œç¼–è¯‘å™¨è§†å¯¹è±¡ç±»å‹ä¸ºå½“å‰æ„é€ æˆ–ææ„å‡½æ•°æ‰€åœ¨ç±»çš„ç±»å‹ï¼Œç”±æ­¤é€ æˆçš„ç»“æ„å°±æ˜¯ï¼šåœ¨çˆ¶ç±»çš„æ„é€ æˆ–ææ„å‡½æ•°ä¸­ï¼Œä¼šå°†å­ç±»å¯¹è±¡å½“ä½œçˆ¶ç±»å¯¹è±¡çœ‹å¾…</p><p>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹</p><p>å¦‚æœæˆ‘ä»¬åœ¨çˆ¶ç±»çš„æ„é€ æˆ–ææ„å‡½æ•°ä¸­è°ƒç”¨è™šå‡½æ•°ï¼Œè°ƒç”¨çš„å¾€å¾€æ˜¯å½“å‰ç±»çš„è™šå‡½æ•°ï¼Œè¾¾ä¸åˆ°å¤šæ€çš„æ•ˆæœï¼Œè·Ÿæ™®é€šå‡½æ•°è°ƒç”¨æ²¡æœ‰åŒºåˆ«</p><h3 id="æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½ä¸ºè™šå‡½æ•°ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ææ„å‡½æ•°å¿…é¡»ä¸ºè™šå‡½æ•°ï¼Ÿ"><a href="#æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½ä¸ºè™šå‡½æ•°ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ææ„å‡½æ•°å¿…é¡»ä¸ºè™šå‡½æ•°ï¼Ÿ" class="headerlink" title="æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½ä¸ºè™šå‡½æ•°ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ææ„å‡½æ•°å¿…é¡»ä¸ºè™šå‡½æ•°ï¼Ÿ"></a>æ„é€ å‡½æ•°ä¸ºä»€ä¹ˆä¸èƒ½ä¸ºè™šå‡½æ•°ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹ææ„å‡½æ•°å¿…é¡»ä¸ºè™šå‡½æ•°ï¼Ÿ</h3><p>1ï¼‰å› ä¸ºè™šå‡½æ•°è¡¨æŒ‡é’ˆå¿…é¡»åœ¨æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°ä¸èƒ½ä¸ºè™šå‡½æ•°ï¼</p><p>2ï¼‰å½“å­˜åœ¨ç»§æ‰¿å…³ç³»æ—¶ï¼Œçˆ¶ç±»çš„ææ„å‡½æ•°å¿…é¡»ä¸ºè™šå‡½æ•°ï¼Œè¿™æ ·åœ¨çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œdeleteçˆ¶ç±»æŒ‡é’ˆæ—¶ï¼Œå­ç±»å¯¹è±¡æ‰ä¸ä¼šå†…å­˜æ³„æ¼</p><h2 id="å­—èŠ‚å¯¹é½"><a href="#å­—èŠ‚å¯¹é½" class="headerlink" title="å­—èŠ‚å¯¹é½"></a>å­—èŠ‚å¯¹é½</h2><p>è®©å®½åº¦ä¸º2çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆshortç­‰ï¼‰éƒ½ä½äºèƒ½è¢«2æ•´é™¤çš„åœ°å€ä¸Šï¼Œè®©å®½åº¦ä¸º4çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆintç­‰ï¼‰éƒ½ä½äºèƒ½è¢«4æ•´é™¤çš„åœ°å€ä¸Šï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™æ ·ï¼Œä¸¤ä¸ªæ•°ä¸­é—´å°±å¯èƒ½éœ€è¦åŠ å…¥å¡«å……å­—èŠ‚ï¼Œæ‰€ä»¥æ•´ä¸ªç»“æ„ä½“çš„sizeofå€¼å°±å¢é•¿äº†ã€‚</p><h3 id="å­—èŠ‚å¯¹é½çš„ç»†èŠ‚å’Œç¼–è¯‘å™¨å®ç°ç›¸å…³ï¼Œä½†ä¸€èˆ¬è€Œè¨€ï¼Œæ»¡è¶³ä¸‰ä¸ªå‡†åˆ™ï¼š"><a href="#å­—èŠ‚å¯¹é½çš„ç»†èŠ‚å’Œç¼–è¯‘å™¨å®ç°ç›¸å…³ï¼Œä½†ä¸€èˆ¬è€Œè¨€ï¼Œæ»¡è¶³ä¸‰ä¸ªå‡†åˆ™ï¼š" class="headerlink" title="å­—èŠ‚å¯¹é½çš„ç»†èŠ‚å’Œç¼–è¯‘å™¨å®ç°ç›¸å…³ï¼Œä½†ä¸€èˆ¬è€Œè¨€ï¼Œæ»¡è¶³ä¸‰ä¸ªå‡†åˆ™ï¼š"></a>å­—èŠ‚å¯¹é½çš„ç»†èŠ‚å’Œç¼–è¯‘å™¨å®ç°ç›¸å…³ï¼Œä½†ä¸€èˆ¬è€Œè¨€ï¼Œæ»¡è¶³ä¸‰ä¸ªå‡†åˆ™ï¼š</h3><p>1) ç»“æ„ä½“å˜é‡çš„é¦–åœ°å€èƒ½å¤Ÿè¢«å…¶æœ€å®½åŸºæœ¬ç±»å‹æˆå‘˜çš„å¤§å°æ‰€æ•´é™¤ï¼›<br>2) ç»“æ„ä½“æ¯ä¸ªæˆå‘˜ç›¸å¯¹äºç»“æ„ä½“é¦–åœ°å€çš„åç§»é‡ï¼ˆoffsetï¼‰éƒ½æ˜¯æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æˆå‘˜ä¹‹é—´åŠ ä¸Šå¡«å……å­—èŠ‚ï¼ˆinternal addingï¼‰<br>3) ç»“æ„ä½“çš„æ€»å¤§å°ä¸ºç»“æ„ä½“æœ€å®½åŸºæœ¬ç±»å‹æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œå¦‚æœ‰éœ€è¦ç¼–è¯‘å™¨ä¼šåœ¨æœ€æœ«ä¸€ä¸ªæˆå‘˜ä¹‹ååŠ ä¸Šå¡«å……å­—èŠ‚ï¼ˆtrailing paddingï¼‰</p><h2 id="C-ä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µ"><a href="#C-ä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µ" class="headerlink" title="C++ä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µ"></a>C++ä¸­å†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µ</h2><ul><li>åœ¨ç±»çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­æ²¡æœ‰åŒ¹é…çš„è°ƒç”¨newå’Œdeleteå‡½æ•°</li><li>æ²¡æœ‰æ­£ç¡®åœ°æ¸…é™¤åµŒå¥—çš„å¯¹è±¡æŒ‡é’ˆ </li><li>åœ¨é‡Šæ”¾å¯¹è±¡æ•°ç»„æ—¶åœ¨deleteä¸­æ²¡æœ‰ä½¿ç”¨æ–¹æ‹¬å·</li><li>ç¼ºå°‘æ‹·è´æ„é€ å‡½æ•°</li><li>ç¼ºå°‘é‡è½½èµ‹å€¼è¿ç®—ç¬¦</li><li>å…³äºnonmodifyingè¿ç®—ç¬¦é‡è½½çš„å¸¸è§è¿·æ€</li><li>æ²¡æœ‰å°†åŸºç±»çš„ææ„å‡½æ•°å®šä¹‰ä¸ºè™šå‡½æ•°</li></ul><h2 id="newå’Œmallocçš„åŒºåˆ«"><a href="#newå’Œmallocçš„åŒºåˆ«" class="headerlink" title="newå’Œmallocçš„åŒºåˆ«"></a>newå’Œmallocçš„åŒºåˆ«</h2><h4 id="å±æ€§"><a href="#å±æ€§" class="headerlink" title="å±æ€§"></a>å±æ€§</h4><p>new/deleteæ˜¯C++å…³é”®å­—ï¼Œéœ€è¦ç¼–è¯‘å™¨æ”¯æŒã€‚malloc/freeæ˜¯åº“å‡½æ•°ï¼Œéœ€è¦å¤´æ–‡ä»¶æ”¯æŒã€‚</p><h4 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h4><p>ä½¿ç”¨newæ“ä½œç¬¦ç”³è¯·å†…å­˜åˆ†é…æ—¶æ— é¡»æŒ‡å®šå†…å­˜å—çš„å¤§å°ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®ç±»å‹ä¿¡æ¯è‡ªè¡Œè®¡ç®—ã€‚è€Œmallocåˆ™éœ€è¦æ˜¾å¼åœ°æŒ‡å‡ºæ‰€éœ€å†…å­˜çš„å°ºå¯¸ã€‚</p><h4 id="è¿”å›ç±»å‹"><a href="#è¿”å›ç±»å‹" class="headerlink" title="è¿”å›ç±»å‹"></a>è¿”å›ç±»å‹</h4><p>newæ“ä½œç¬¦å†…å­˜åˆ†é…æˆåŠŸæ—¶ï¼Œè¿”å›çš„æ˜¯å¯¹è±¡ç±»å‹çš„æŒ‡é’ˆï¼Œç±»å‹ä¸¥æ ¼ä¸å¯¹è±¡åŒ¹é…ï¼Œæ— é¡»è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ•…newæ˜¯ç¬¦åˆç±»å‹å®‰å…¨æ€§çš„æ“ä½œç¬¦ã€‚è€Œmallocå†…å­˜åˆ†é…æˆåŠŸåˆ™æ˜¯è¿”å›void <em> ï¼Œéœ€è¦é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢å°†void</em>æŒ‡é’ˆè½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„ç±»å‹ã€‚</p><h4 id="åˆ†é…å¤±è´¥"><a href="#åˆ†é…å¤±è´¥" class="headerlink" title="åˆ†é…å¤±è´¥"></a>åˆ†é…å¤±è´¥</h4><p>newå†…å­˜åˆ†é…å¤±è´¥æ—¶ï¼Œä¼šæŠ›å‡ºbac_allocå¼‚å¸¸ã€‚mallocåˆ†é…å†…å­˜å¤±è´¥æ—¶è¿”å›NULLã€‚</p><h4 id="è‡ªå®šä¹‰ç±»å‹"><a href="#è‡ªå®šä¹‰ç±»å‹" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹"></a>è‡ªå®šä¹‰ç±»å‹</h4><p>newä¼šå…ˆè°ƒç”¨operator newå‡½æ•°ï¼Œç”³è¯·è¶³å¤Ÿçš„å†…å­˜ï¼ˆé€šå¸¸åº•å±‚ä½¿ç”¨mallocå®ç°ï¼‰ã€‚ç„¶åè°ƒç”¨ç±»å‹çš„æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–æˆå‘˜å˜é‡ï¼Œæœ€åè¿”å›è‡ªå®šä¹‰ç±»å‹æŒ‡é’ˆã€‚deleteå…ˆè°ƒç”¨ææ„å‡½æ•°ï¼Œç„¶åè°ƒç”¨operator deleteå‡½æ•°é‡Šæ”¾å†…å­˜ï¼ˆé€šå¸¸åº•å±‚ä½¿ç”¨freeå®ç°ï¼‰ã€‚</p><p>malloc/freeæ˜¯åº“å‡½æ•°ï¼Œåªèƒ½åŠ¨æ€çš„ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œæ— æ³•å¼ºåˆ¶è¦æ±‚å…¶åšè‡ªå®šä¹‰ç±»å‹å¯¹è±¡æ„é€ å’Œææ„å·¥ä½œã€‚</p><h4 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h4><p>C++å…è®¸é‡è½½new/deleteæ“ä½œç¬¦ï¼Œç‰¹åˆ«çš„ï¼Œå¸ƒå±€newçš„å°±ä¸éœ€è¦ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼Œè€Œæ˜¯æŒ‡å®šäº†ä¸€ä¸ªåœ°å€ä½œä¸ºå†…å­˜èµ·å§‹åŒºåŸŸï¼Œnewåœ¨è¿™æ®µå†…å­˜ä¸Šä¸ºå¯¹è±¡è°ƒç”¨æ„é€ å‡½æ•°å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼Œå¹¶è¿”å›æ­¤åœ°å€ã€‚è€Œmallocä¸å…è®¸é‡è½½ã€‚</p><h4 id="å†…å­˜åŒºåŸŸ"><a href="#å†…å­˜åŒºåŸŸ" class="headerlink" title="å†…å­˜åŒºåŸŸ"></a>å†…å­˜åŒºåŸŸ</h4><p>newæ“ä½œç¬¦ä»è‡ªç”±å­˜å‚¨åŒºï¼ˆfree storeï¼‰ä¸Šä¸ºå¯¹è±¡åŠ¨æ€åˆ†é…å†…å­˜ç©ºé—´ï¼Œè€Œmallocå‡½æ•°ä»å †ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜ã€‚è‡ªç”±å­˜å‚¨åŒºæ˜¯C++åŸºäºnewæ“ä½œç¬¦çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå‡¡æ˜¯é€šè¿‡newæ“ä½œç¬¦è¿›è¡Œå†…å­˜ç”³è¯·ï¼Œè¯¥å†…å­˜å³ä¸ºè‡ªç”±å­˜å‚¨åŒºã€‚è€Œå †æ˜¯æ“ä½œç³»ç»Ÿä¸­çš„æœ¯è¯­ï¼Œæ˜¯æ“ä½œç³»ç»Ÿæ‰€ç»´æŠ¤çš„ä¸€å—ç‰¹æ®Šå†…å­˜ï¼Œç”¨äºç¨‹åºçš„å†…å­˜åŠ¨æ€åˆ†é…ï¼ŒCè¯­è¨€ä½¿ç”¨mallocä»å †ä¸Šåˆ†é…å†…å­˜ï¼Œä½¿ç”¨freeé‡Šæ”¾å·²åˆ†é…çš„å¯¹åº”å†…å­˜ã€‚è‡ªç”±å­˜å‚¨åŒºä¸ç­‰äºå †ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œå¸ƒå±€newå°±å¯ä»¥ä¸ä½äºå †ä¸­</p><h3 id="å·¦å€¼å’Œå³å€¼çš„åŒºåˆ«ï¼Œå³å€¼å¼•ç”¨çš„æ¦‚å¿µåŠå…¶åº”ç”¨åœºæ™¯"><a href="#å·¦å€¼å’Œå³å€¼çš„åŒºåˆ«ï¼Œå³å€¼å¼•ç”¨çš„æ¦‚å¿µåŠå…¶åº”ç”¨åœºæ™¯" class="headerlink" title="å·¦å€¼å’Œå³å€¼çš„åŒºåˆ«ï¼Œå³å€¼å¼•ç”¨çš„æ¦‚å¿µåŠå…¶åº”ç”¨åœºæ™¯"></a>å·¦å€¼å’Œå³å€¼çš„åŒºåˆ«ï¼Œå³å€¼å¼•ç”¨çš„æ¦‚å¿µåŠå…¶åº”ç”¨åœºæ™¯</h3><h4 id="å·¦å€¼-lvalue-ï¼š"><a href="#å·¦å€¼-lvalue-ï¼š" class="headerlink" title="å·¦å€¼(lvalue)ï¼š"></a>å·¦å€¼(lvalue)ï¼š</h4><p>éä¸´æ—¶æ€§å¯¹è±¡çš„è¡¨è¾¾å¼ã€‚æœ‰åå­—ï¼Œå¯ä»¥å–åœ°å€ã€‚å¦‚ï¼šéåŒ¿åå¯¹è±¡(åŒ…æ‹¬å˜é‡)ï¼Œå‡½æ•°è¿”å›çš„å¼•ç”¨ï¼Œconstå¯¹è±¡ç­‰éƒ½æ˜¯å·¦å€¼ã€‚</p><h4 id="å³å€¼-rvalue-ï¼š"><a href="#å³å€¼-rvalue-ï¼š" class="headerlink" title="å³å€¼(rvalue)ï¼š"></a>å³å€¼(rvalue)ï¼š</h4><p>ä¸´æ—¶æ€§å¯¹è±¡çš„è¡¨è¾¾å¼ï¼Œæ²¡æœ‰åå­—ï¼Œä¸´æ—¶ç”Ÿæˆçš„ï¼Œä¸å¯å–åœ°å€ã€‚å¦‚ï¼šç«‹å³æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼ã€‚</p><h4 id="å·¦å³å€¼è½¬æ¢"><a href="#å·¦å³å€¼è½¬æ¢" class="headerlink" title="å·¦å³å€¼è½¬æ¢"></a>å·¦å³å€¼è½¬æ¢</h4><p>å³å€¼è½¬åŒ–ä¸ºå·¦å€¼ ï¼šç›´æ¥æ–°å»ºå˜é‡ç„¶åèµ‹å€¼å°±å¯ä»¥äº†ã€‚<br>int b=a+1ï¼›å°†a+1è¿™ä¸ªå³å€¼è½¬å˜ä¸ºå·¦å€¼</p><p>å·¦å€¼è½¬åŒ–ä¸ºå³å€¼ï¼š std::move()<br>move (a) ;   å°†aè¿™ä¸ªå·¦å€¼è½¬å˜ä¸ºäº†å³å€¼</p><h3 id="å·¦å€¼å¼•ç”¨"><a href="#å·¦å€¼å¼•ç”¨" class="headerlink" title="å·¦å€¼å¼•ç”¨"></a>å·¦å€¼å¼•ç”¨</h3><p>å·¦å€¼å¼•ç”¨æœ¬è´¨æ˜¯æŒ‡é’ˆå¸¸é‡ï¼Œå·¦å€¼å¼•ç”¨åªèƒ½å¼•ç”¨å·¦å€¼ã€‚</p><p>åŠ  const å°±å¯ä»¥å¸¸å¼•ç”¨</p><h3 id="å³å€¼å¼•ç”¨"><a href="#å³å€¼å¼•ç”¨" class="headerlink" title="å³å€¼å¼•ç”¨"></a>å³å€¼å¼•ç”¨</h3><p>å³å€¼å¼•ç”¨ç»‘å®šåˆ°å³å€¼ï¼Œç»‘å®šåæœ¬æ¥ä¼šè¢«é”€æ¯çš„å³å€¼çš„ç”Ÿå­˜æœŸä¼šå»¶é•¿è‡³ä¸ç»‘å®šåˆ°å®ƒçš„å³å€¼å¼•ç”¨çš„ç”Ÿå­˜æœŸã€‚</p><p>åœ¨æ±‡ç¼–å±‚é¢å³å€¼å¼•ç”¨åšçš„äº‹æƒ…å’Œå¸¸å¼•ç”¨æ˜¯ç›¸åŒçš„ï¼Œå³äº§ç”Ÿä¸´æ—¶é‡æ¥å­˜å‚¨å¸¸é‡ã€‚ä½†æ˜¯ï¼Œå”¯ä¸€ ä¸€ç‚¹çš„åŒºåˆ«æ˜¯ï¼Œå³å€¼å¼•ç”¨å¯ä»¥è¿›è¡Œè¯»å†™æ“ä½œï¼Œè€Œå¸¸å¼•ç”¨åªèƒ½è¿›è¡Œè¯»æ“ä½œã€‚</p><h4 id="å³å€¼å¼•ç”¨çš„ç”¨é€”"><a href="#å³å€¼å¼•ç”¨çš„ç”¨é€”" class="headerlink" title="å³å€¼å¼•ç”¨çš„ç”¨é€”"></a>å³å€¼å¼•ç”¨çš„ç”¨é€”</h4><ul><li>é¿å…æ‹·è´ï¼Œæé«˜æ€§èƒ½ï¼Œå®ç°move()</li><li>é¿å…é‡è½½å‚æ•°çš„å¤æ‚æ€§ï¼Œå®ç°forward()</li></ul><h2 id="freeä¸deleteçš„åŒºåˆ«"><a href="#freeä¸deleteçš„åŒºåˆ«" class="headerlink" title="freeä¸deleteçš„åŒºåˆ«"></a>freeä¸deleteçš„åŒºåˆ«</h2><ol><li><p>delete ç”¨äºé‡Šæ”¾ new åˆ†é…çš„ç©ºé—´ï¼Œfree æœ‰ç”¨é‡Šæ”¾ malloc åˆ†é…çš„ç©ºé—´</p></li><li><p>delete [] ç”¨äºé‡Šæ”¾ new [] åˆ†é…çš„ç©ºé—´</p></li><li><p>delete é‡Šæ”¾ç©ºé—´çš„æ—¶å€™ä¼šè°ƒç”¨ ç›¸åº”å¯¹è±¡çš„ææ„å‡½æ•°</p><p> é¡ºä¾¿è¯´ä¸€ä¸‹newåœ¨åˆ†é…ç©ºé—´çš„æ—¶å€™åŒæ—¶ä¼šè°ƒç”¨å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œå¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨mallocåˆ™åªæ˜¯åˆ†é…å†…å­˜</p></li><li><p>è°ƒç”¨free ä¹‹å‰éœ€è¦æ£€æŸ¥ éœ€è¦é‡Šæ”¾çš„æŒ‡é’ˆæ˜¯å¦ä¸ºç©ºï¼Œä½¿ç”¨delete é‡Šæ”¾å†…å­˜åˆ™ä¸éœ€è¦æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦ä¸ºNULL</p></li><li><p>free å’Œ delete ä¸èƒ½æ··ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´new åˆ†é…çš„å†…å­˜ç©ºé—´æœ€å¥½ä¸è¦ä½¿ç”¨ä½¿ç”¨free æ¥é‡Šæ”¾ï¼Œmalloc åˆ†é…çš„ç©ºé—´ä¹Ÿä¸è¦ä½¿ç”¨ deleteæ¥é‡Šæ”¾</p></li></ol><h2 id="å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ"></a>å †å’Œæ ˆçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</h2><p>1ã€å †æ ˆç©ºé—´åˆ†é…åŒºåˆ«</p><p>æ ˆï¼ˆæ“ä½œç³»ç»Ÿï¼‰ï¼šç”±æ“ä½œç³»ç»Ÿï¼ˆç¼–è¯‘å™¨ï¼‰è‡ªåŠ¨åˆ†é…é‡Šæ”¾ ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆã€‚</p><p>å †ï¼ˆæ“ä½œç³»ç»Ÿï¼‰ï¼š ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ï¼Œåˆ†é…æ–¹å¼å€’æ˜¯ç±»ä¼¼äºé“¾è¡¨ã€‚</p><p>2ã€å †æ ˆç¼“å­˜æ–¹å¼åŒºåˆ«</p><p>æ ˆä½¿ç”¨çš„æ˜¯ä¸€çº§ç¼“å­˜ï¼Œ å®ƒä»¬é€šå¸¸éƒ½æ˜¯è¢«è°ƒç”¨æ—¶å¤„äºå­˜å‚¨ç©ºé—´ä¸­ï¼Œè°ƒç”¨å®Œæ¯•ç«‹å³é‡Šæ”¾ã€‚</p><p>å †åˆ™æ˜¯å­˜æ”¾åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸç”±è™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶ç®—æ³•æ¥å†³å®šï¼ˆå¹¶ä¸æ˜¯ä¸€æ—¦æˆä¸ºå­¤å„¿å¯¹è±¡å°±èƒ½è¢«å›æ”¶ï¼‰ã€‚æ‰€ä»¥è°ƒç”¨è¿™äº›å¯¹è±¡çš„é€Ÿåº¦è¦ç›¸å¯¹æ¥å¾—ä½ä¸€äº›ã€‚</p><p>3ã€å †æ ˆæ•°æ®ç»“æ„åŒºåˆ«</p><p>å †ï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼šå †å¯ä»¥è¢«çœ‹æˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¦‚ï¼šå †æ’åºã€‚</p><p>æ ˆï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼šä¸€ç§å…ˆè¿›åå‡ºçš„æ•°æ®ç»“æ„ã€‚</p><h3 id="é™æ€å‡½æ•°"><a href="#é™æ€å‡½æ•°" class="headerlink" title="é™æ€å‡½æ•°"></a>é™æ€å‡½æ•°</h3><p>åªèƒ½åœ¨æœ¬$CPP$é‡Œé¢ä½¿ç”¨ã€‚</p><h3 id="ç±»çš„é™æ€æˆå‘˜"><a href="#ç±»çš„é™æ€æˆå‘˜" class="headerlink" title="ç±»çš„é™æ€æˆå‘˜"></a>ç±»çš„é™æ€æˆå‘˜</h3><p>å¤šä¸ªå¯¹è±¡æ•°æ®å…±äº«ï¼Œå®‰å…¨</p><h2 id="castè½¬æ¢"><a href="#castè½¬æ¢" class="headerlink" title="castè½¬æ¢"></a>castè½¬æ¢</h2><ul><li>const_cast å°†const è½¬ä¸ºé const</li><li>static_castï¼Œéšå¼è½¬æ¢ï¼Œç”¨äºå¤šæ€å‘ä¸Šè½¬åŒ–</li></ul><h2 id="dynamic-cast"><a href="#dynamic-cast" class="headerlink" title="dynamic_cast"></a>dynamic_cast</h2><p>åŠ¨æ€ç±»å‹è½¬æ¢ã€‚ç”¨äºè™šå‡½æ•°çš„ç±»</p><h2 id="reinterpret-cast"><a href="#reinterpret-cast" class="headerlink" title="reinterpret_cast"></a>reinterpret_cast</h2><p>å•¥éƒ½å¯ä»¥è½¬æ¢</p><h2 id="æŒ‡é’ˆä¸å¼•ç”¨"><a href="#æŒ‡é’ˆä¸å¼•ç”¨" class="headerlink" title="æŒ‡é’ˆä¸å¼•ç”¨"></a>æŒ‡é’ˆä¸å¼•ç”¨</h2><ul><li>æŒ‡é’ˆæœ‰è‡ªå·±çš„ç©ºé—´å¤§å°æ˜¯4</li><li>å¯ä»¥æœ‰const æŒ‡é’ˆ</li><li>å¤šçº§æŒ‡é’ˆ</li><li>++è¿ç®—ç¬¦</li><li>è¿”å›åŠ¨æ€å†…å­˜åˆ†ç±»çš„å¯¹è±¡æˆ–è€…å†…å­˜å¿…é¡»ä½¿ç”¨æŒ‡é’ˆ<h2 id="virtualå…³é”®å­—çš„ä½œç”¨"><a href="#virtualå…³é”®å­—çš„ä½œç”¨" class="headerlink" title="virtualå…³é”®å­—çš„ä½œç”¨"></a>virtualå…³é”®å­—çš„ä½œç”¨</h2></li><li><p>åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰åŸºç±»çš„æ–¹æ³•</p></li><li><p>ä¸ºå¤šæ€åŸºç±»å£°æ˜virtualææ„å‡½æ•°</p></li><li>æŠ½è±¡åŸºç±»</li></ul><h2 id="resize-reserve"><a href="#resize-reserve" class="headerlink" title="resize reserve"></a>resize reserve</h2><ul><li>resize:</li><li><p>æ”¹å˜æœ€å¤§å®¹é‡ï¼Œä¸ä¼šç”Ÿæˆå…ƒç´ </p><h2 id="æ™ºèƒ½æŒ‡é’ˆ"><a href="#æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="æ™ºèƒ½æŒ‡é’ˆ"></a>æ™ºèƒ½æŒ‡é’ˆ</h2></li><li><p>auto_ptr,share_ptr,weak_ptrï¼Œunique_ptr</p></li></ul><p>1) unique_ptr å®ç°ç‹¬å å¼æ‹¥æœ‰æˆ–ä¸¥æ ¼æ‹¥æœ‰æ¦‚å¿µï¼Œä¿è¯åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªæ™ºèƒ½æ‰§æ”¿å¯ä»¥æŒ‡å‘è¯¥å¯¹è±¡ã€‚ä»–å¯¹äºé¿å…èµ„æºæ³„éœ²ï¼ˆä¾‹å¦‚â€œä»¥newåˆ›å»ºå¯¹è±¡åå› ä¸ºå‘ç”Ÿå¼‚å¸¸è€Œå¿˜è®°è°ƒç”¨delectâ€ï¼‰ç‰¹åˆ«æœ‰ç”¨<br>2) shared_ptr å®ç°å…±äº«å¼æ‹¥æœ‰æ¦‚å¿µï¼Œå¤šä¸ªæ™ºèƒ½æŒ‡é’ˆå¯ä»¥æŒ‡å‘ç›¸åŒå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å’Œå…¶ç›¸å…³èµ„æºä¼šåœ¨æœ€åä¸€ä¸ªå¼•ç”¨è¢«é”€æ¯çš„æ—¶å€™é‡Šæ”¾ã€‚å¯ä»¥æŸ¥çœ‹èµ„æºæ‰€æœ‰ä¸ªæ•°<br>3) weak_ptr ç§ä¸€ä¸ªç§ä¸æ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„æ™ºèƒ½æŒ‡é’ˆ</p><p>æ™ºèƒ½æŒ‡é’ˆçš„ä½œç”¨æ˜¯ç®¡ç†ä¸€ä¸ªæŒ‡é’ˆï¼Œå› ä¸ºå­˜åœ¨ä»¥ä¸‹è¿™ç§æƒ…å†µï¼šç”³è¯·çš„ç©ºé—´åœ¨å‡½æ•°ç»“æŸæ˜¯å¿˜è®°é‡Šæ”¾ï¼Œé€ æˆå†…å­˜æ³„æ¼ã€‚ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆå¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Šé¿å…è¿™ä¸ªé—®é¢˜ã€‚å› ä¸ºæ™ºèƒ½æŒ‡é’ˆå°±æ˜¯ä¸ªç±»ï¼Œè¶…å‡ºäº†ç±»çš„ä½œç”¨åŸŸï¼Œç±»ä¼šè‡ªåŠ¨ææ„å‡½æ•°ï¼Œææ„å‡½æ•°å°±ä¼šè‡ªåŠ¨é‡Šæ”¾èµ„æºã€‚æ‰€æœ‰æ™ºèƒ½æŒ‡é’ˆçš„å°±ç®—è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€‚</p><h2 id="é™æ€å‡½æ•°ä¸è™šå‡½æ•°çš„åŒºåˆ«"><a href="#é™æ€å‡½æ•°ä¸è™šå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="é™æ€å‡½æ•°ä¸è™šå‡½æ•°çš„åŒºåˆ«"></a>é™æ€å‡½æ•°ä¸è™šå‡½æ•°çš„åŒºåˆ«</h2><p>é™æ€å‡½æ•°åœ¨ç¼–è¯‘çš„æ—¶å€™å°±å·²ç»ç¡®å®šè¿è¡Œæ—¶æœºï¼Œè™šå‡½æ•°åœ¨è¿è¡Œçš„æ—¶å€™åŠ¨æ€ç»‘å®šï¼Œè°ƒç”¨å›å¢åŠ ä¸€æ¬¡å†…å­˜å¼€é”€ã€‚</p><h2 id="é‡è½½-é‡å†™"><a href="#é‡è½½-é‡å†™" class="headerlink" title="é‡è½½ é‡å†™"></a>é‡è½½ é‡å†™</h2><ul><li>ä¸¤ä¸ªå‡½æ•°åä¸€æ ·ï¼Œå‚æ•°ä¸ä¸€æ ·</li><li>å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œçˆ¶ç±»ç§æ˜¯è™šå‡½æ•°</li></ul><h2 id="è™šå‡½æ•°å’Œå¤šæ€"><a href="#è™šå‡½æ•°å’Œå¤šæ€" class="headerlink" title="è™šå‡½æ•°å’Œå¤šæ€"></a>è™šå‡½æ•°å’Œå¤šæ€</h2><p>å¤šæ€çš„å®ç°åˆ†æˆé™æ€å¤šæ€å’ŒåŠ¨æ€å¤šæ€</p><ul><li>é™æ€ä¸»è¦æ˜¯é‡è½½ï¼Œç¼–è¯‘çš„æ—¶å€™å·²ç»ç¡®å®š</li><li>åŠ¨æ€æ˜¯ç”¨è™šå‡½æ•°æœºåˆ¶å®ç°ï¼Œåœ¨è¿è¡ŒæœŸé—´åŠ¨æ€ç»‘å®šã€‚</li></ul><p>ä¾‹å­ï¼šä¸€ä¸ªçˆ¶ç±»ç±»å‹çš„æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªå­ç±»å¯¹è±¡çš„æ—¶å€™ï¼Œä½¿ç”¨çˆ¶ç±»æŒ‡é’ˆå»è°ƒç”¨å­ç±»ç§é‡å†™äº†çš„çˆ¶ç±»ä¸­çš„è™šå‡½æ•°ï¼Œä¼šè°ƒç”¨å­ç±»é‡å†™è¿‡åçš„å‡½æ•°åœ¨çˆ¶ç±»ç§å£°æ˜ä¸ºåŠ äº†virtualå…³é”®å­çš„å‡½æ•°ï¼Œå­ç±»ç§é‡å†™æ—¶å€™ä¸éœ€è¦åŠ virtualä¹Ÿæ˜¯è™šå‡½æ•°</p><p>è™šå‡½æ•°çš„å®ç°ï¼šåœ¨æœ‰è™šå‡½æ•°çš„ç±»ä¸­ï¼Œç±»çš„æœ€å¼€å§‹éƒ¨åˆ†æ˜¯ä¸€ä¸ªè™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªè™šå‡½æ•°æ ‡ï¼Œè¡¨ä¸­æ”¾äº†è™šå‡½æ•°çš„åœ°å€ï¼Œå®é™…çš„è™šå‡½æ•°åœ¨ä»£ç æ®µç§ã€‚å½“å­ç±»ç»§æ‰¿äº†çˆ¶ç±»çš„æ—¶å€™ä¹Ÿä¼šç»§æ‰¿å…¶è™šå‡½æ•°è¡¨ï¼Œå½“å­ç±»é‡å†™çˆ¶ç±»ä¸­çš„è™šå‡½æ•°çš„æ—¶å€™ï¼Œä¼šå°†ç»§æ‰¿å€’è™šå‡½æ•°çš„åœ°å€æ›¿æ¢ä¸ºå°çº¢é‹å†™çš„å‡½æ•°åœ°å€ï¼Œä½¿ç”¨è™šå‡½æ•°ä¼šå¢åŠ è®¿é—®å†…å­˜å¼€é”€ï¼Œé™ä½æ•ˆç‡ã€‚</p><h2 id="new-delete-malloc-free-çš„åŒºåˆ«"><a href="#new-delete-malloc-free-çš„åŒºåˆ«" class="headerlink" title="new/delete malloc/free çš„åŒºåˆ«"></a>new/delete malloc/free çš„åŒºåˆ«</h2><p>åè€…å¿…é¡»æŒ‡æ˜ç”³è¯·å†…å­˜ç©ºé—´å¤§å°ï¼Œåè€…å¯¹äºç±»ï¼Œä¸ä¼šè°ƒç”¨æ„é€ å‡½æ•° å’Œææ„å‡½æ•°</p><h2 id="è™šå‡½æ•°è¡¨å…·ä½“æ˜¯æ€ä¹ˆå®ç°è¿è¡Œæ—¶å¤šæ€çš„ï¼Ÿ"><a href="#è™šå‡½æ•°è¡¨å…·ä½“æ˜¯æ€ä¹ˆå®ç°è¿è¡Œæ—¶å¤šæ€çš„ï¼Ÿ" class="headerlink" title="è™šå‡½æ•°è¡¨å…·ä½“æ˜¯æ€ä¹ˆå®ç°è¿è¡Œæ—¶å¤šæ€çš„ï¼Ÿ"></a>è™šå‡½æ•°è¡¨å…·ä½“æ˜¯æ€ä¹ˆå®ç°è¿è¡Œæ—¶å¤šæ€çš„ï¼Ÿ</h2><p>å­ç±»è‹¥é‡å†™çˆ¶ç±»è™šå‡½æ•°ï¼Œè™šå‡½æ•°è¡¨ä¸­ï¼Œå‡½æ•°åœ°å€ä¼šè¢«æ›¿æ¢ï¼Œå¯¹äºå­˜åœ¨è™šå‡½æ•°äºŒç‚¹ç±»çš„å¯¹è±¡ï¼Œåœ¨VSç§ï¼Œå¯¹è±¡çš„å¯¹è±¡æ¨¡å‹çš„å¤´éƒ¨å­˜æ”¾æŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆï¼Œé€šè¿‡è¯¥æœºåˆ¶å®ç°å¤šæ€ã€‚</p><h1 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h1><h2 id="ç”¨æˆ·æ€ä¸å†…æ ¸æ€"><a href="#ç”¨æˆ·æ€ä¸å†…æ ¸æ€" class="headerlink" title="ç”¨æˆ·æ€ä¸å†…æ ¸æ€"></a>ç”¨æˆ·æ€ä¸å†…æ ¸æ€</h2><p>ç”¨æˆ·æ€å’Œå†…æ ¸æ€æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸¤ç§è¿è¡Œçº§åˆ«ï¼Œä¸¤è€…æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ç‰¹æƒçº§ä¸åŒã€‚ç”¨æˆ·æ€æ‹¥æœ‰æœ€ä½çš„ç‰¹æƒçº§ï¼Œå†…æ ¸æ€æ‹¥æœ‰è¾ƒé«˜çš„ç‰¹æƒçº§ã€‚è¿è¡Œåœ¨ç”¨æˆ·æ€çš„ç¨‹åºä¸èƒ½ç›´æ¥è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸æ•°æ®ç»“æ„å’Œç¨‹åºã€‚å†…æ ¸æ€å’Œç”¨æˆ·æ€ä¹‹é—´çš„è½¬æ¢æ–¹å¼ä¸»è¦åŒ…æ‹¬ï¼šç³»ç»Ÿè°ƒç”¨ï¼Œå¼‚å¸¸å’Œä¸­æ–­ã€‚</p><h2 id="ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>ä¸Šä¸‹æ–‡åˆ‡æ¢</h2><p>å½“å‰ä»»åŠ¡åœ¨æ‰§è¡Œå®Œ CPU æ—¶é—´ç‰‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡ å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><h2 id="è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¦‚å¿µ"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¦‚å¿µ" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¦‚å¿µ"></a>è¿›ç¨‹ä¸çº¿ç¨‹çš„æ¦‚å¿µ</h2><h3 id="è¿›ç¨‹"><a href="#è¿›ç¨‹" class="headerlink" title="è¿›ç¨‹"></a>è¿›ç¨‹</h3><ul><li>è¿›ç¨‹æ˜¯å¯¹è¿è¡Œæ—¶ç¨‹åºçš„å°è£…ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºè°ƒåº¦å’Œåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œå®ç°äº†æ“ä½œç³»ç»Ÿçš„å¹¶å‘</li></ul><h3 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h3><ul><li>æ˜¯è¿›ç¨‹çš„å­ä»»åŠ¡ï¼Œæ˜¯CPUè°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ã€‚ç”¨äºä¿è¯ç¨‹åºçš„å®æ—¶æ€§ï¼Œå®ç°äº†è¿›ç¨‹å†…éƒ¨çš„å¹¶å‘ã€‚</li><li>çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå¯è¯†åˆ«çš„æœ€å°æ‰§è¡Œå’Œè°ƒåº¦å•ä½ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½è‚šå­å ç”¨ä¸€ä¸ªè™šæ‹Ÿå¤„ç†å™¨ï¼Œç‹¬è‡ªçš„å¯„å­˜å™¨ç»„ï¼ŒæŒ‡ä»¤è®¡æ•°å™¨å’Œå¤„ç†å™¨çŠ¶æ€ã€‚</li><li>æ¯ä¸ªçº¿ç¨‹å®Œæˆä¸åŒçš„ä»»åŠ¡ï¼Œä½†æ˜¯å…±äº«åŒä¸€åœ°å€ç©ºé—´çš„ã€‚ï¼ˆåŠ¨æ€å†…å­˜ï¼Œæ˜ å°„æ–‡ä»¶ï¼Œç›®æ ‡ä»£ç ï¼‰ï¼Œæ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨å’Œå…¶ä»–å†…æ ¸èµ„æº</li></ul><h3 id="åŒºåˆ«-1"><a href="#åŒºåˆ«-1" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><ul><li>ä¸€ä¸ªçº¿ç¨‹åªèƒ½å±äºä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å¤šä¸ªçº¿ç¨‹ï¼Œä¾èµ–å…³ç³»ã€‚</li><li>è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«è¿›ç¨‹çš„å†…å­˜ã€‚</li><li>èµ„æºåˆ†é…ç»™è¿›ç¨‹ï¼ŒåŒä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¯¥è¿›ç¨‹çš„æ‰€æœ‰èµ„æºã€‚åŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«ä»£ç æ®µï¼Œæ•°æ®æ®µï¼Œæ‰©å±•æ®µã€‚<strong>ä½†æ˜¯æ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰è‡ªå·±çš„æ ˆæ®µï¼Œï¼ˆç”¨æ¥å­˜å±€éƒ¨å˜é‡å’Œä¸´æ—¶å˜é‡ï¼‰</strong></li><li>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½</li><li>ç³»ç»Ÿå¼€é”€ï¼Œåœ¨åˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…æˆ–å›æ”¶èµ„æºï¼Œå¦‚å†…å­˜ç©ºé—´ã€‚çº¿ç¨‹åˆ‡æ¢åªéœ€ä¿å­˜æˆ–è€…è®¾ç½®å°‘é‡å¯„å­˜å™¨çš„å†…å®¹ï¼Œä¸æ¶‰åŠå­˜å‚¨å™¨ç®¡ç†æ–¹é¢çš„æ“ä½œï¼Œå¯è§è¿›ç¨‹çš„åˆ‡æ¢å¼€é”€æ¯”è¾ƒå¤§</li><li>é€šä¿¡ï¼Œçº¿ç¨‹åŒæ­¥å’Œé€šä¿¡å®¹æ˜“å®ç°ï¼Œéœ€è¦è¿›ç¨‹åŒæ­¥å’Œäº’æ–¥æ‰‹æ®µçš„è¾…åŠ©ï¼Œä»¥ä¿å­˜æ•°æ®çš„ä¸€è‡´æ€§ã€‚åœ¨æœ‰çš„ç³»ç»Ÿä¸­çº¿ç¨‹çš„<strong>åˆ‡æ¢ï¼Œé€šä¿¡ï¼ŒåŒæ­¥</strong> æ— é¡»ç³»ç»Ÿå†…æ ¸çš„å¹²é¢„ã€‚</li><li>è¿›ç¨‹ç¼–ç¨‹ ç®€å•å¯é ï¼Œåˆ›å»ºå¼€é”€å¤§ã€‚</li><li>è¿›ç¨‹ä¸ä¼šäº’ç›¸å½±å“ã€‚</li><li>è¿›ç¨‹é€‚ç”¨ä¸å¤šæ ¸ï¼Œå¤šæœºåˆ†å¸ƒï¼›çº¿ç¨‹é€‚ç”¨äºå¤šæ ¸ã€‚</li></ul><h3 id="è¿›ç¨‹è°ƒåº¦ç®—æ³•"><a href="#è¿›ç¨‹è°ƒåº¦ç®—æ³•" class="headerlink" title="è¿›ç¨‹è°ƒåº¦ç®—æ³•"></a>è¿›ç¨‹è°ƒåº¦ç®—æ³•</h3><ul><li>æœ€çŸ­å·¥ä½œä¼˜å…ˆï¼ˆSJFï¼‰ï¼›</li><li>æœ€çŸ­å‰©ä½™æ—¶é—´ä¼˜å…ˆï¼ˆSRTFï¼‰ï¼›</li><li>æœ€é«˜å“åº”æ¯”ä¼˜å…ˆï¼ˆHRRFï¼‰ï¼›</li><li>ä¼˜å…ˆçº§è°ƒåº¦ï¼ˆPriorityï¼‰ï¼›</li><li>è½®è½¬è°ƒåº¦ï¼ˆRRï¼‰ã€‚<h3 id="è¿›ç¨‹é—´é€šä¿¡æ–¹å¼"><a href="#è¿›ç¨‹é—´é€šä¿¡æ–¹å¼" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡æ–¹å¼"></a>è¿›ç¨‹é—´é€šä¿¡æ–¹å¼</h3></li><li>ç®¡é“ï¼Œç³»ç»ŸIPCï¼Œå¥—æ¥å­—</li></ul><h4 id="æ™®é€šç®¡é“PIPE"><a href="#æ™®é€šç®¡é“PIPE" class="headerlink" title="æ™®é€šç®¡é“PIPE"></a>æ™®é€šç®¡é“PIPE</h4><h4 id="å‘½åç®¡é“FIFO"><a href="#å‘½åç®¡é“FIFO" class="headerlink" title="å‘½åç®¡é“FIFO"></a>å‘½åç®¡é“FIFO</h4><h4 id="ç³»ç»ŸIPC"><a href="#ç³»ç»ŸIPC" class="headerlink" title="ç³»ç»ŸIPC"></a>ç³»ç»ŸIPC</h4><ul><li>æ¶ˆæ¯é˜Ÿåˆ—</li><li>ä¿¡å·é‡ï¼Œè®¡æ•°å™¨ï¼Œç”¨æ¥æ§åˆ¶å¤šä¸ªè¿›ç¨‹å¯¹å…±äº«èµ„æºçš„è®¿é—®ï¼Œå®ç°è¿›ç¨‹å…¼å¾—äº’æ–¥å’ŒåŒæ­¥ã€‚</li><li>ä¿¡å·</li><li>å…±äº«å†…å­˜</li></ul><h3 id="çº¿ç¨‹é—´é€šä¿¡æ–¹å¼"><a href="#çº¿ç¨‹é—´é€šä¿¡æ–¹å¼" class="headerlink" title="çº¿ç¨‹é—´é€šä¿¡æ–¹å¼"></a>çº¿ç¨‹é—´é€šä¿¡æ–¹å¼</h3><ul><li>ä¸´ç•ŒåŒºï¼Œé€šè¿‡å¤šçº¿ç¨‹çš„ä¸²è¡ŒåŒ–æ¥è®¿é—®å…¬å…±èµ„æºæˆ–ä¸€æ®µä»£ç ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆæ§åˆ¶æ•°æ®è®¿é—®</li><li>äº’æ–¥é‡ é‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™</li><li>ä¿¡å·é‡ï¼Œå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªèµ„æº</li><li>äº‹ä»¶ é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿è¯å¤šçº¿ç¨‹åŒæ­¥</li></ul><h2 id="Linux-è™šæ‹Ÿåœ°å€ç©ºé—´"><a href="#Linux-è™šæ‹Ÿåœ°å€ç©ºé—´" class="headerlink" title="Linux è™šæ‹Ÿåœ°å€ç©ºé—´"></a>Linux è™šæ‹Ÿåœ°å€ç©ºé—´</h2><p>è¯·æ±‚åˆ†é¡µç³»ç»Ÿï¼Œè¯·æ±‚åˆ†æ®µç³»ç»Ÿå’Œè¯·æ±‚æ®µé¡µç³»ç»Ÿéƒ½æ˜¯é’ˆå¯¹è™šæ‹Ÿå†…å­˜ã€‚</p><h3 id="å¥½å¤„"><a href="#å¥½å¤„" class="headerlink" title="å¥½å¤„"></a>å¥½å¤„</h3><ul><li>æ‰©å¤§åœ°å€ç©ºé—´</li><li>å†…å­˜ä¿æŠ¤</li><li>å…¬å¹³å†…å­˜åˆ†é…</li><li>å½“è¿›ç¨‹é€šä¿¡æ—¶ï¼Œå¯é‡‡ç”¨è™šæ‹Ÿå†…å­˜å…±äº«çš„æ–¹å¼å®ç°</li><li>å½“ä¸åŒçš„è¿›ç¨‹ä½¿ç”¨ç›¸åŒä»£ç æ—¶æ¯”å¦‚åº“æ–‡ä»¶ä¸­çš„ä»£ç ï¼Œç‰©ç†å†…å­˜ä¸­å¯ä»¥å­˜å‚¨ä¸€åˆ†è¿™æ ·çš„ä»£ç ï¼ŒèŠ‚çœå†…å­˜</li><li>è™šæ‹Ÿå†…å­˜å¾ˆé€‚åˆåœ¨å¤šé“ç¨‹åºè®¾è®¡ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œè®¸å¤šç¨‹çš„ç‰‡æ®µåŒæ—¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå½“ä¸€ä¸ªç¨‹åºç­‰å¾…ä»–çš„ä¸€éƒ¨åˆ†è¯»å…¥å†…å­˜ï¼Œå¯ä»¥æŠŠCPUäº¤ç»™å¦ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨ã€‚å†…å­˜ä¸­å¯ä»¥ä¿ç•™å¤šä¸ªè¿›ç¨‹ï¼Œç³»ç»Ÿçš„å¹¶å‘åº¦æé«˜</li><li>åœ¨ç¨‹åºåˆ†é…è¿ç»­å†…å­˜ç©ºé—´çš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨è™šæ‹Ÿå†…å­˜ç©ºé—´åˆ†é…è¿ç»­ç©ºé—´ï¼Œè€Œä¸éœ€è¦å®é™…çš„ç‰©ç†å†…å­˜çš„è¿ç»­æ”»å‡»</li></ul><h2 id="ä»£ä»·"><a href="#ä»£ä»·" class="headerlink" title="ä»£ä»·"></a>ä»£ä»·</h2><ul><li>ç®¡ç†çš„æ•°æ®ç»“æ„å ç”¨å†…å­˜</li><li>è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬åŒ–ï¼Œå¢åŠ äº†æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´ã€‚</li><li>é¡µé¢çš„æ¢å…¥è¿˜å‡ºéœ€è¦ç£ç›˜I/O</li><li>ä¸€é¡µä¸€éƒ¨åˆ†æ•°æ®ï¼Œæµªè´¹å†…å­˜</li></ul><h2 id="å¹¶å‘-å¹¶è¡Œ"><a href="#å¹¶å‘-å¹¶è¡Œ" class="headerlink" title="å¹¶å‘ å¹¶è¡Œ"></a>å¹¶å‘ å¹¶è¡Œ</h2><ul><li>å¹¶å‘ï¼Œè¿è¡Œ</li><li>å¹¶å‘ï¼Œäº¤ç»‡è¿è¡Œï¼Œä¸èƒ½æé«˜æ€§èƒ½åªèƒ½æé«˜æ•ˆç‡</li><li>å¹¶è¡Œï¼Œä¸¥æ ¼ç‰©ç†æ„ä¹‰ä¸Šçš„åŒæ—¶è¿è¡Œï¼Œå¤šæ ¸CPUï¼Œä¸¤ä¸ªç¨‹åºåˆ†åˆ«è¿è¡Œåœ¨ä¸¤ä¸ªæ ¸ï¼Œäº’ä¸å½±å“</li></ul><h2 id="OSç¼ºé¡µç½®æ¢ç®—æ³•"><a href="#OSç¼ºé¡µç½®æ¢ç®—æ³•" class="headerlink" title="OSç¼ºé¡µç½®æ¢ç®—æ³•"></a>OSç¼ºé¡µç½®æ¢ç®—æ³•</h2><ul><li>FIFOï¼Œç½®æ¢æœ€å…ˆè°ƒå…¥å†…å­˜çš„é¡µé¢ï¼Œå³ç½®æ¢åœ¨å†…å­˜ä¸­é©»ç•™æ—¶é—´æœ€ä¹…çš„é¡µé¢ã€‚æŒ‰è¿›å…¥å†…å­˜çš„ å…ˆåæ¬¡åºæ’æˆé˜Ÿåˆ—ï¼Œä»é˜Ÿå°¾è¿›å…¥ï¼Œä»é˜Ÿé¦–åˆ é™¤ã€‚</li><li>LRUï¼šç½®æ¢æœ€è¿‘ä¸€æ®µæ—¶é—´æœ€é•¿æ—¶é—´æœªè®¿é—®çš„é¡µé¢ã€‚</li></ul><h2 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h2><h3 id="å¿…è¦æ¡ä»¶"><a href="#å¿…è¦æ¡ä»¶" class="headerlink" title="å¿…è¦æ¡ä»¶"></a>å¿…è¦æ¡ä»¶</h3><ul><li>äº’æ–¥æ¡ä»¶</li><li>è¯·æ±‚å’Œä¿æŒæ¡ä»¶</li><li>ä¸å¯å‰¥å¤ºæ¡ä»¶</li><li>ç¯è·¯ç­‰å¾…æ¡ä»¶</li></ul><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ul><li>èµ„æºä¸€æ¬¡æ€§åˆ†é…</li><li>å¯å‰¥å¤ºèµ„æº</li><li>èµ„æºæœ‰åºåˆ†é…æ³•</li></ul><h2 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h2><p>IOå¤šè·¯å¤ç”¨</p><h2 id="TCPå’ŒUDPå¯ä»¥åŒæ—¶ç›‘å¬ç›¸åŒçš„ç«¯å£å—"><a href="#TCPå’ŒUDPå¯ä»¥åŒæ—¶ç›‘å¬ç›¸åŒçš„ç«¯å£å—" class="headerlink" title="TCPå’ŒUDPå¯ä»¥åŒæ—¶ç›‘å¬ç›¸åŒçš„ç«¯å£å—"></a>TCPå’ŒUDPå¯ä»¥åŒæ—¶ç›‘å¬ç›¸åŒçš„ç«¯å£å—</h2><p>å¯ä»¥</p><p>ä½†ä¸€å°è®¾å¤‡é‡Œï¼Œ<br>tcpåè®®é‡Œportå·å¿…é¡»æœ‰å”¯ä¸€æ€§ã€‚<br>åŒæ ·ï¼Œ<br>udpåè®®é‡Œportå·å¿…é¡»æœ‰å”¯ä¸€æ€§ã€‚</p><h2 id="COOKIEå’ŒSESSIONæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#COOKIEå’ŒSESSIONæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="COOKIEå’ŒSESSIONæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>COOKIEå’ŒSESSIONæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><p>cookieä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œsessionä¿å­˜åœ¨æœåŠ¡å™¨ç«¯ï¼Œ<br>cookieç›®çš„å¯ä»¥è·Ÿè¸ªä¼šè¯ï¼Œä¹Ÿå¯ä»¥ä¿å­˜ç”¨æˆ·å–œå¥½æˆ–è€…ä¿å­˜ç”¨æˆ·åå¯†ç <br>sessionç”¨æ¥è·Ÿè¸ªä¼šè¯</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¦å¤±ä¸šäº†&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="http://yoursite.com/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>P1084 ç–«æƒ…æ§åˆ¶</title>
    <link href="http://yoursite.com/2020/12/20/P1084/"/>
    <id>http://yoursite.com/2020/12/20/P1084/</id>
    <published>2020-12-20T02:47:00.000Z</published>
    <updated>2020-12-25T14:30:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å®šä¸€äº›éšœç¢ï¼Œç”¨è¿™äº›éšœç¢æ¥åˆ‡æ–­æ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œå¯ä»¥ç§»åŠ¨éšœç¢ï¼Œæ±‚æ€»æ—¶é—´æœ€å°‘</p><a id="more"></a><p>äºŒåˆ†æšä¸¾æ—¶é—´æ˜¾è€Œæ˜“è§ã€‚</p><p>æ¯ä¸ªå†›é˜Ÿæ˜¾ç„¶è¶Šé è¿‘æ ¹ç»“ç‚¹è¶Šä¼˜ï¼Œäºæ˜¯æˆ‘ä»¬å€å¢çš„å¾€ä¸Šè·³å°±å¯ä»¥å®Œæˆè¿™ä¸€æ­¥ã€‚</p><p>ç„¶åæˆ‘ä»¬æ£€æŸ¥ä¸€éé‚£äº›æ ¹ç»“ç‚¹çš„å­æ ‘æ²¡æœ‰è¢«è¦†ç›–ã€‚</p><ul><li>é‚£äº›æ²¡æœ‰è¦†ç›–çš„å­æ ‘ï¼Œåªèƒ½é å¤šä½™çš„èŠ‚ç‚¹æ¥å¸®å¿™è¦†ç›–ã€‚</li><li>å°†å¯ä»¥è¿›è¡Œè¿™äº›æ“ä½œçš„å†›é˜Ÿæå–å‡ºæ¥ï¼ˆå€å¢çš„å¾€ä¸Šè·³åˆ«ç”¨å®ƒã€‚ï¼‰</li><li>ç„¶åå†æŠŠéœ€è¦è¦†ç›–çš„æ ¹ç»“ç‚¹çš„å­æ ‘çš„ä¹Ÿæå–å‡ºæ¥ã€‚</li></ul><p>è´ªå¿ƒå»æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆä¸ºäº†ä¿è¯è‡ªå·±è¦†ç›–ï¼Œæˆ‘ä¸€å®šé€‰æ‹©å‰©ä½™è·¯ç¨‹æœ€çŸ­æ¥è¦†ç›–è‡ªå·±æˆ–è€…è‡ªå·±è¦†ç›–ã€‚å³å¦‚æœæœåˆ°è‡ªå·±çš„æ—¶å€™å‘ç°è¿˜æ²¡è¦†ç›–è‡ªå·±å½“ç„¶ä¼˜å…ˆè‡ªå·±å­æ ‘ã€‚</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">5e4</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; g[N];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[N][<span class="number">20</span>];</span><br><span class="line">ll d[N][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> be[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>(), w = <span class="built_in">read</span>();</span><br><span class="line">        g[u].push_back(&#123;v, w&#125;);</span><br><span class="line">        g[v].push_back(&#123;u, w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="built_in">read</span>();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">z</span><span class="params">(m)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        z[i] = <span class="built_in">read</span>();</span><br><span class="line">    function&lt;<span class="keyword">void</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)&gt; dfs1 = [&amp;](<span class="keyword">int</span> x, <span class="keyword">int</span> fa) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">16</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            f[x][i] = f[f[x][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">            d[x][i] = d[x][i - <span class="number">1</span>] + d[f[x][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> [to, w] : g[x])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (to == fa)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            f[to][<span class="number">0</span>] = x;</span><br><span class="line">            d[to][<span class="number">0</span>] = w;</span><br><span class="line">            be[to] = x == <span class="number">1</span> ? to : be[x];</span><br><span class="line">            dfs1(to, x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> check = [&amp;](ll k) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;ll, <span class="keyword">int</span>&gt;&gt; tmp;</span><br><span class="line">        <span class="built_in">vector</span>&lt;pair&lt;ll, <span class="keyword">int</span>&gt;&gt; need;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">tag</span><span class="params">(n + <span class="number">1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : z)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> u = i;</span><br><span class="line">            ll res = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">16</span>; j &gt;= <span class="number">0</span>; j--)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (res + d[u][j] &lt;= k &amp;&amp; f[u][j])</span><br><span class="line">                    res += d[u][j], u = f[u][j];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (u == <span class="number">1</span>)</span><br><span class="line">                tmp.push_back(&#123;k - res, be[i]&#125;);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                tag[u] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        function&lt;<span class="keyword">void</span>(<span class="keyword">int</span>, <span class="keyword">int</span>)&gt; dfs2 = [&amp;](<span class="keyword">int</span> x, <span class="keyword">int</span> fa) &#123;</span><br><span class="line">            <span class="keyword">int</span> o = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">auto</span> [to, w] : g[x])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (to == fa)</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                dfs2(to, x);</span><br><span class="line">                cnt++;</span><br><span class="line">                o &amp;= tag[to];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (tag[x] == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!cnt)</span><br><span class="line">                    tag[x] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (o == <span class="number">1</span>)</span><br><span class="line">                    tag[x] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    tag[x] = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        dfs2(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> [to, w] : g[<span class="number">1</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!tag[to])</span><br><span class="line">                need.push_back(&#123;w, to&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        sort(tmp.<span class="built_in">begin</span>(), tmp.<span class="built_in">end</span>());</span><br><span class="line">        sort(need.<span class="built_in">begin</span>(), need.<span class="built_in">end</span>());</span><br><span class="line">        <span class="keyword">if</span> (need.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> [dis, i] : tmp)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (j &gt;= need.<span class="built_in">size</span>())</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (!tag[i])</span><br><span class="line">                tag[i] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (dis &gt;= need[j].first)</span><br><span class="line">                tag[need[j].second] = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (j &lt; need.<span class="built_in">size</span>() &amp;&amp; tag[need[j].second])</span><br><span class="line">                j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (j &gt;= need.<span class="built_in">size</span>())</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    dfs1(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// cout &lt;&lt; check(9) &lt;&lt; endl;</span></span><br><span class="line">    ll l = <span class="number">0</span>, r = <span class="number">1e15</span>, ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r)</span><br><span class="line">    &#123;</span><br><span class="line">        ll mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (check(mid))</span><br><span class="line">        &#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">            ans = mid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å®šä¸€äº›éšœç¢ï¼Œç”¨è¿™äº›éšœç¢æ¥åˆ‡æ–­æ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼Œå¯ä»¥ç§»åŠ¨éšœç¢ï¼Œæ±‚æ€»æ—¶é—´æœ€å°‘&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æ€ç»´" scheme="http://yoursite.com/tags/%E6%80%9D%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>P3703 [SDOI2017]æ ‘ç‚¹æ¶‚è‰²</title>
    <link href="http://yoursite.com/2020/12/20/P3703/"/>
    <id>http://yoursite.com/2020/12/20/P3703/</id>
    <published>2020-12-20T02:47:00.000Z</published>
    <updated>2020-12-25T14:30:48.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>1 x è¡¨ç¤ºæŠŠç‚¹ $x$ åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¸Šæ‰€æœ‰çš„ç‚¹æŸ“ä¸Šä¸€ç§æ²¡æœ‰ç”¨è¿‡çš„æ–°é¢œè‰²ã€‚</p></li><li><p>2 x y æ±‚ $x$ åˆ° $y$ çš„è·¯å¾„çš„æƒå€¼ã€‚</p></li><li><p>3 x åœ¨ä»¥ $x$ ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰æ‹©ä¸€ä¸ªç‚¹ï¼Œä½¿å¾—è¿™ä¸ªç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„æƒå€¼æœ€å¤§ï¼Œæ±‚æœ€å¤§æƒå€¼ã€‚</p></li></ul><a id="more"></a><p>è€ƒè™‘$access$çš„æ—¶å€™ï¼Œç›¸å½“æŠŠ$x$åˆ°æ ¹èŠ‚ç‚¹çš„ä¸œè¥¿æŸ“ä¸Šä¸€ç§é¢œè‰²ã€‚</p><p>è€ƒè™‘æ ‘ä¸Šå·®åˆ†$sum_{ij}=dis_i+dis_j-2\times dis_{lca_{ij}}$</p><p>ç°åœ¨è€ƒè™‘ç»´æŠ¤$dis_i$ã€‚</p><p>å½“$access(x)$çš„æ—¶å€™ï¼Œå¦‚æœæ–­è™šé“¾ï¼Œè¡¨ç¤ºæ–­å¼€çš„å­æ ‘çš„$dis+1$ï¼ˆç”±äºæ­¤æ—¶æ–­å¼€çš„å­æ ‘çš„$dis_x$å¤šäº†é¢œè‰²ï¼‰,å¦‚æœè¿ä¸Šå®é“¾ï¼Œè¡¨ç¤ºæ–­å¼€çš„å­æ ‘çš„$dis-1$ã€‚</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Segment</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> mx[N &lt;&lt; <span class="number">2</span>], tag[N &lt;&lt; <span class="number">2</span>];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        mx[pos] = <span class="built_in">max</span>(mx[pos &lt;&lt; <span class="number">1</span>], mx[pos &lt;&lt; <span class="number">1</span> | <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addtag</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> w)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        mx[pos] += w;</span><br><span class="line">        tag[pos] += w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tag[pos])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> &amp;w = tag[pos];</span><br><span class="line">            addtag(pos &lt;&lt; <span class="number">1</span>, w);</span><br><span class="line">            addtag(pos &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, w);</span><br><span class="line">            w = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> ql, <span class="keyword">int</span> qr, <span class="keyword">int</span> w, <span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr)</span><br><span class="line">        &#123;</span><br><span class="line">            addtag(pos, w);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pushdown(pos);</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (ql &lt;= mid)</span><br><span class="line">            update(ql, qr, w, pos &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">        <span class="keyword">if</span> (qr &gt; mid)</span><br><span class="line">            update(ql, qr, w, pos &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">        pushup(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> ql, <span class="keyword">int</span> qr, <span class="keyword">int</span> pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> mx[pos];</span><br><span class="line">        &#125;</span><br><span class="line">        pushdown(pos);</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (qr &lt;= mid)</span><br><span class="line">            <span class="keyword">return</span> query(ql, qr, pos &lt;&lt; <span class="number">1</span>, l, mid);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (ql &gt; mid)</span><br><span class="line">            <span class="keyword">return</span> query(ql, qr, pos &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(query(ql, qr, pos &lt;&lt; <span class="number">1</span>, l, mid), query(ql, qr, pos &lt;&lt; <span class="number">1</span> | <span class="number">1</span>, mid + <span class="number">1</span>, r));</span><br><span class="line">    &#125;</span><br><span class="line">&#125; smt;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LCT</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls son[pos][0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs son[pos][1]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> fa[N], cnt[N], root, tcnt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> son[N][<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span> rev[N];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isroot</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pos != son[fa[pos]][<span class="number">0</span>] &amp;&amp; pos != son[fa[pos]][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// void addtag(int pos)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     rev[pos] ^= 1;</span></span><br><span class="line">    <span class="comment">//     swap(son[pos][0], son[pos][1]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ;</span><br><span class="line">        <span class="comment">// if (rev[pos])</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//     if (son[pos][1])</span></span><br><span class="line">        <span class="comment">//         addtag(son[pos][1]);</span></span><br><span class="line">        <span class="comment">//     if (son[pos][0])</span></span><br><span class="line">        <span class="comment">//         addtag(son[pos][0]);</span></span><br><span class="line">        <span class="comment">//     rev[pos] = 0;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isson</span><span class="params">(<span class="keyword">int</span> pos)</span> </span>&#123; <span class="keyword">return</span> pos == son[fa[pos]][<span class="number">1</span>]; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">conect</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        son[x][d] = y;</span><br><span class="line">        fa[y] = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> y = fa[x], z = fa[y], dx = isson(x), dy = isson(y);</span><br><span class="line"></span><br><span class="line">        fa[x] = z;</span><br><span class="line">        <span class="keyword">if</span> (!isroot(y))</span><br><span class="line">            son[z][dy] = x;</span><br><span class="line">        <span class="comment">//conect(z, dy, x);</span></span><br><span class="line">        conect(y, dx, son[x][dx ^ <span class="number">1</span>]);</span><br><span class="line">        conect(x, dx ^ <span class="number">1</span>, y);</span><br><span class="line">        pushup(y), pushup(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> st[N];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> top;</span><br><span class="line">        st[top = <span class="number">1</span>] = x;</span><br><span class="line">        <span class="keyword">int</span> u = x;</span><br><span class="line">        <span class="keyword">while</span> (!isroot(u))</span><br><span class="line">            u = fa[u], st[++top] = u;</span><br><span class="line">        <span class="keyword">while</span> (top)</span><br><span class="line">            pushdown(st[top--]);</span><br><span class="line">        <span class="keyword">while</span> (!isroot(x))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> y = fa[x];</span><br><span class="line">            <span class="keyword">if</span> (isroot(y))</span><br><span class="line">            &#123;</span><br><span class="line">                rotate(x);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (isson(x) == isson(y))</span><br><span class="line">                rotate(y), rotate(x);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                rotate(x), rotate(x);</span><br><span class="line">        &#125;</span><br><span class="line">        pushup(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findrt</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (son[x][<span class="number">0</span>])</span><br><span class="line">            x = son[x][<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[N];</span><br><span class="line"><span class="keyword">int</span> tot, siz[N], dfn[N];</span><br><span class="line"><span class="keyword">int</span> f[N][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> dep[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dep[u] &lt; dep[v])</span><br><span class="line">        swap(u, v);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">19</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (dep[f[u][i]] &gt;= dep[v])</span><br><span class="line">            u = f[u][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (u == v)</span><br><span class="line">        <span class="keyword">return</span> v;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">19</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (f[u][i] != f[v][i])</span><br><span class="line">            u = f[u][i], v = f[v][i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[u][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> fa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    t.fa[x] = fa;</span><br><span class="line">    f[x][<span class="number">0</span>] = fa;</span><br><span class="line">    dep[x] = dep[fa] + <span class="number">1</span>;</span><br><span class="line">    dfn[x] = ++tot;</span><br><span class="line">    siz[x] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">20</span>; i++)</span><br><span class="line">        f[x][i] = f[f[x][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> to : g[x])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (to == fa)</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        dfs(to, x);</span><br><span class="line">        siz[x] += siz[to];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; x; i = x, x = t.fa[x])</span><br><span class="line">    &#123;</span><br><span class="line">        t.splay(x);</span><br><span class="line">        <span class="keyword">int</span> o = t.son[x][<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (o)</span><br><span class="line">        &#123;</span><br><span class="line">            smt.update(dfn[t.findrt(o)], dfn[t.findrt(o)] + siz[t.findrt(o)] - <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, tot);</span><br><span class="line">        &#125;</span><br><span class="line">        t.son[x][<span class="number">1</span>] = i;</span><br><span class="line">        o = i;</span><br><span class="line">        <span class="keyword">if</span> (o)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//cout &lt;&lt; o &lt;&lt; " " &lt;&lt; t.findrt(o) &lt;&lt; endl;</span></span><br><span class="line">            smt.update(dfn[t.findrt(o)], dfn[t.findrt(o)] + siz[t.findrt(o)] - <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">1</span>, tot);</span><br><span class="line">        &#125;</span><br><span class="line">        t.pushup(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>(), m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="built_in">read</span>(), v = <span class="built_in">read</span>();</span><br><span class="line">        g[u].push_back(v);</span><br><span class="line">        g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        smt.update(dfn[i], dfn[i] + siz[i] - <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, tot);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> op = <span class="built_in">read</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (op == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = <span class="built_in">read</span>();</span><br><span class="line">            access(x);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (op == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = <span class="built_in">read</span>(), y = <span class="built_in">read</span>();</span><br><span class="line">            <span class="keyword">int</span> o = lca(x, y);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> res = smt.query(dfn[x], dfn[x], <span class="number">1</span>, <span class="number">1</span>, tot) + smt.query(dfn[y], dfn[y], <span class="number">1</span>, <span class="number">1</span>, tot) - <span class="number">2</span> * smt.query(dfn[o], dfn[o], <span class="number">1</span>, <span class="number">1</span>, tot) + <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, res);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = <span class="built_in">read</span>();</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, smt.query(dfn[x], dfn[x] + siz[x] - <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, tot));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;p&gt;1 x è¡¨ç¤ºæŠŠç‚¹ $x$ åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„ä¸Šæ‰€æœ‰çš„ç‚¹æŸ“ä¸Šä¸€ç§æ²¡æœ‰ç”¨è¿‡çš„æ–°é¢œè‰²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;2 x y æ±‚ $x$ åˆ° $y$ çš„è·¯å¾„çš„æƒå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;3 x åœ¨ä»¥ $x$ ä¸ºæ ¹çš„å­æ ‘ä¸­é€‰æ‹©ä¸€ä¸ªç‚¹ï¼Œä½¿å¾—è¿™ä¸ªç‚¹åˆ°æ ¹èŠ‚ç‚¹çš„è·¯å¾„æƒå€¼æœ€å¤§ï¼Œæ±‚æœ€å¤§æƒå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="LCT" scheme="http://yoursite.com/tags/LCT/"/>
    
  </entry>
  
  <entry>
    <title>P7114 å­—ç¬¦ä¸²åŒ¹é…</title>
    <link href="http://yoursite.com/2020/12/20/P7114/"/>
    <id>http://yoursite.com/2020/12/20/P7114/</id>
    <published>2020-12-20T02:47:00.000Z</published>
    <updated>2020-12-25T14:31:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ±‚ $S = {(AB)}^iC$çš„æ–¹æ¡ˆæ•°ï¼Œå…¶ä¸­ $F(A) \le F(C)$ è¡¨ç¤ºå­—ç¬¦ä¸² $S$ ä¸­å‡ºç°å¥‡æ•°æ¬¡çš„å­—ç¬¦çš„æ•°é‡</p><a id="more"></a><p>æšä¸¾$(AB)^i$ï¼Œå¯¹äº$C$å¯»æ‰¾ç¬¦åˆæ¡ä»¶çš„$AB$.</p><p>å¤æ‚åº¦ä¸º$O(n(26+\log n))$</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e6</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getnext</span><span class="params">(<span class="keyword">char</span> *t, <span class="keyword">int</span> *nxt)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    nxt[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="built_in">strlen</span>(t + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, j; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = nxt[i - <span class="number">1</span>]; j &gt;= <span class="number">0</span> &amp;&amp; t[j + <span class="number">1</span>] != t[i]; j = nxt[j])</span><br><span class="line">            ;</span><br><span class="line">        nxt[i] = j + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> t[N], s[N];</span><br><span class="line"><span class="keyword">int</span> nxt[N];</span><br><span class="line"><span class="keyword">int</span> pre[N], suf[N], cnt[<span class="number">27</span>], len[N];</span><br><span class="line"><span class="keyword">int</span> to[<span class="number">27</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">int</span> n = <span class="built_in">strlen</span>(s + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            nxt[i] = <span class="number">0</span>, len[i] = <span class="number">1</span>;</span><br><span class="line">        getnext(s, nxt);</span><br><span class="line">        <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(cnt));</span><br><span class="line">        <span class="built_in">memset</span>(to, <span class="number">0</span>, <span class="keyword">sizeof</span>(to));</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> o = s[i] - <span class="string">'a'</span>;</span><br><span class="line">            res -= cnt[o] &amp; <span class="number">1</span>;</span><br><span class="line">            cnt[o]++;</span><br><span class="line">            res += cnt[o] &amp; <span class="number">1</span>;</span><br><span class="line">            pre[i] = res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">memset</span>(cnt, <span class="number">0</span>, <span class="keyword">sizeof</span>(cnt));</span><br><span class="line">        res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> o = s[i] - <span class="string">'a'</span>;</span><br><span class="line">            res -= cnt[o] &amp; <span class="number">1</span>;</span><br><span class="line">            cnt[o]++;</span><br><span class="line">            res += cnt[o] &amp; <span class="number">1</span>;</span><br><span class="line">            suf[i] = res;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ll ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = pre[i - <span class="number">1</span>]; j &lt;= <span class="number">26</span>; j++)</span><br><span class="line">                to[j]++;</span><br><span class="line">            ans += to[suf[i + <span class="number">1</span>]];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">2</span> * i; j &lt; n; j += i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (((i % (j - nxt[j])) == <span class="number">0</span>) &amp;&amp; ((j / (j - nxt[j])) &gt; <span class="number">1</span>))</span><br><span class="line">                    ans += to[suf[j + <span class="number">1</span>]];</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ±‚ $S = {(AB)}^iC$çš„æ–¹æ¡ˆæ•°ï¼Œå…¶ä¸­ $F(A) \le F(C)$ è¡¨ç¤ºå­—ç¬¦ä¸² $S$ ä¸­å‡ºç°å¥‡æ•°æ¬¡çš„å­—ç¬¦çš„æ•°é‡&lt;/p&gt;
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>P2387 [NOI2014]é­”æ³•æ£®æ—</title>
    <link href="http://yoursite.com/2020/12/17/P2387/"/>
    <id>http://yoursite.com/2020/12/17/P2387/</id>
    <published>2020-12-17T02:47:00.000Z</published>
    <updated>2020-12-25T14:30:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™å‡ºä¸€ä¸ª$n$ä¸ªç‚¹ï¼Œ$m$æ¡è¾¹çš„æ— å‘å›¾ï¼Œæ¯æ¡è¾¹éƒ½æœ‰æƒå€¼$a_i,b_i$ ï¼Œæ±‚ä¸€æ¡ä»ç‚¹$1$åˆ°ç‚¹$n$çš„è·¯å¾„ï¼Œä½¿å¾—è¿™æ¡è·¯å¾„ä¸Šè¾¹çš„$a_i,b_i$    æœ€å¤§å€¼ä¹‹å’Œæœ€å°<br><a id="more"></a></p><p>é™åˆ¶$a$çš„æœ€å¤§å€¼ï¼Œç„¶ååŠ¨æ€ç»´æŠ¤$b$çš„æœ€å°ç”Ÿæˆæ ‘å³å¯ã€‚</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LCT</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls son[pos][0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs son[pos][1]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> fa[N], cnt[N], root, tcnt;</span><br><span class="line">    pii mx[N], val[N];</span><br><span class="line">    <span class="keyword">int</span> son[N][<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span> rev[N];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        mx[pos] = <span class="built_in">max</span>(<span class="built_in">max</span>(mx[rs], mx[ls]), val[pos]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isroot</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pos != son[fa[pos]][<span class="number">0</span>] &amp;&amp; pos != son[fa[pos]][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addtag</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        rev[pos] ^= <span class="number">1</span>;</span><br><span class="line">        swap(son[pos][<span class="number">0</span>], son[pos][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rev[pos])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (son[pos][<span class="number">1</span>])</span><br><span class="line">                addtag(son[pos][<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (son[pos][<span class="number">0</span>])</span><br><span class="line">                addtag(son[pos][<span class="number">0</span>]);</span><br><span class="line">            rev[pos] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isson</span><span class="params">(<span class="keyword">int</span> pos)</span> </span>&#123; <span class="keyword">return</span> pos == son[fa[pos]][<span class="number">1</span>]; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">conect</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        son[x][d] = y;</span><br><span class="line">        fa[y] = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rotate</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> y = fa[x], z = fa[y], dx = isson(x), dy = isson(y);</span><br><span class="line"></span><br><span class="line">        fa[x] = z;</span><br><span class="line">        <span class="keyword">if</span> (!isroot(y))</span><br><span class="line">            son[z][dy] = x;</span><br><span class="line">        <span class="comment">//conect(z, dy, x);</span></span><br><span class="line">        conect(y, dx, son[x][dx ^ <span class="number">1</span>]);</span><br><span class="line">        conect(x, dx ^ <span class="number">1</span>, y);</span><br><span class="line">        pushup(y), pushup(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> st[N];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> top;</span><br><span class="line">        st[top = <span class="number">1</span>] = x;</span><br><span class="line">        <span class="keyword">int</span> u = x;</span><br><span class="line">        <span class="keyword">while</span> (!isroot(u))</span><br><span class="line">            u = fa[u], st[++top] = u;</span><br><span class="line">        <span class="keyword">while</span> (top)</span><br><span class="line">            pushdown(st[top--]);</span><br><span class="line">        <span class="keyword">while</span> (!isroot(x))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> y = fa[x];</span><br><span class="line">            <span class="keyword">if</span> (isroot(y))</span><br><span class="line">            &#123;</span><br><span class="line">                rotate(x);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (isson(x) == isson(y))</span><br><span class="line">                rotate(y), rotate(x);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                rotate(x), rotate(x);</span><br><span class="line">        &#125;</span><br><span class="line">        pushup(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; x; i = x, x = fa[x])</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            splay(x), son[x][<span class="number">1</span>] = i, pushup(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">makeroot</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        access(x), splay(x), addtag(x); <span class="comment">// access ä¹‹åå°†æ²¡æœ‰å³å­æ ‘ã€‚ç„¶åæŠŠxå˜æˆæ ¹ï¼ŒæŠŠä¸‹é¢éƒ½ç¿»è½¬ï¼Œè¿™æ ·xå°±æ˜¯æœ€å°çš„å…ƒç´ äº†ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findroot</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        access(x), splay(x);</span><br><span class="line">        <span class="keyword">while</span> (son[x][<span class="number">0</span>])</span><br><span class="line">            pushdown(x), x = son[x][<span class="number">0</span>];</span><br><span class="line">        <span class="comment">//splay(x);</span></span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">split</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        makeroot(x);</span><br><span class="line">        access(y);</span><br><span class="line">        splay(y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">link</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        makeroot(x);</span><br><span class="line">        <span class="keyword">if</span> (findroot(y) == x)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//ä¸¤ç‚¹å·²ç»åœ¨åŒä¸€å­æ ‘ä¸­ï¼Œå†è¿è¾¹ä¸åˆæ³•</span></span><br><span class="line">        fa[x] = y;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">islink</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        makeroot(x);</span><br><span class="line">        <span class="keyword">if</span> (findroot(y) == x)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">cut</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        makeroot(x);</span><br><span class="line">        <span class="keyword">if</span> (findroot(y) == x)</span><br><span class="line">        &#123;</span><br><span class="line">            split(x, y);</span><br><span class="line">            <span class="keyword">if</span> (fa[x] == y &amp;&amp; !son[x][<span class="number">1</span>])</span><br><span class="line">            &#123;</span><br><span class="line">                fa[x] = <span class="number">0</span>;</span><br><span class="line">                son[y][<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">//xåœ¨findroot(y)åè¢«è½¬åˆ°äº†æ ¹</span></span><br><span class="line">                pushup(y);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; t;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v, a, b;</span><br><span class="line">&#125; e[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>(), m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        e[i].u = <span class="built_in">read</span>(), e[i].v = <span class="built_in">read</span>(), e[i].a = <span class="built_in">read</span>(), e[i].b = <span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    sort(e + <span class="number">1</span>, e + <span class="number">1</span> + m, [&amp;](node x, node y) &#123; <span class="keyword">return</span> x.a &lt; y.a; &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        t.val[i + n] = &#123;e[i].b, i&#125;;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">1e9</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = e[i].u, v = e[i].v, a = e[i].a, b = e[i].b;</span><br><span class="line">        <span class="keyword">if</span> (t.islink(u, v))</span><br><span class="line">        &#123;</span><br><span class="line">            t.split(u, v);</span><br><span class="line">            pii o = t.mx[v];</span><br><span class="line">            <span class="keyword">if</span> (o.first &gt; b)</span><br><span class="line">            &#123;</span><br><span class="line">                t.cut(e[o.second].u, o.second + n);</span><br><span class="line">                t.cut(e[o.second].v, o.second + n);</span><br><span class="line">                t.link(u, i + n);</span><br><span class="line">                t.link(v, i + n);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            t.link(u, i + n);</span><br><span class="line">            t.link(v, i + n);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (t.islink(<span class="number">1</span>, n))</span><br><span class="line">        &#123;</span><br><span class="line">            t.split(<span class="number">1</span>, n);</span><br><span class="line">            <span class="comment">// cout &lt;&lt; t.mx[n].first &lt;&lt; endl;</span></span><br><span class="line">            ans = <span class="built_in">min</span>(ans, a + t.mx[n].first);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ans == <span class="number">1e9</span>)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™å‡ºä¸€ä¸ª$n$ä¸ªç‚¹ï¼Œ$m$æ¡è¾¹çš„æ— å‘å›¾ï¼Œæ¯æ¡è¾¹éƒ½æœ‰æƒå€¼$a_i,b_i$ ï¼Œæ±‚ä¸€æ¡ä»ç‚¹$1$åˆ°ç‚¹$n$çš„è·¯å¾„ï¼Œä½¿å¾—è¿™æ¡è·¯å¾„ä¸Šè¾¹çš„$a_i,b_i$    æœ€å¤§å€¼ä¹‹å’Œæœ€å°&lt;br&gt;
    
    </summary>
    
    
    
      <category term="LCT" scheme="http://yoursite.com/tags/LCT/"/>
    
  </entry>
  
  <entry>
    <title>AT4132 [ARC097C] Sorted and Sorted</title>
    <link href="http://yoursite.com/2020/12/06/ARC097C/"/>
    <id>http://yoursite.com/2020/12/06/ARC097C/</id>
    <published>2020-12-06T02:47:00.000Z</published>
    <updated>2020-12-06T04:09:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰ $2N$ä¸ªçƒæ’æˆä¸€åˆ—ï¼Œå…¶ä¸­æœ‰$N$ä¸ªé»‘çƒä¸ $N$ ä¸ªç™½çƒã€‚æŠŠ $1$ åˆ° $N$ è¿™ $N$ä¸ªæ•°å­—åˆ†åˆ«å†™åˆ° $N$ ä¸ªé»‘çƒä¸Šï¼›ç™½çƒäº¦ç„¶ã€‚å·¦èµ·ç¬¬ $i$ ä¸ªçƒä¸Šçš„å†™çš„æ•°å­—æ˜¯ $a_i$ï¼Œé¢œè‰²æ˜¯ $c_i$ã€‚</p><p> $B$ æ˜¯é»‘çƒï¼Œä¸º $W$ æ˜¯ç™½çƒã€‚</p><p>å®šä¹‰ä¸€æ¬¡æ“ä½œä¸ºäº¤æ¢ä¸¤ä¸ªç›¸é‚»çš„çƒã€‚ä½ éœ€è¦æ±‚å‡ºæœ€å°‘çš„æ“ä½œä½¿å¾—åºåˆ—ä¸­</p><a id="more"></a><p>è€ƒè™‘ä¸€ä¸ªæ•°çš„äº¤æ¢æ¬¡æ•°å°±æ˜¯ä»–çš„é€†åºå¯¹ï¼Œä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰ç¡®å®šæ¯”ä»–å°çš„æ•°ã€‚æ— æ³•ç›´æ¥è®¡ç®—å¯å¾—</p><p>é‚£ä¹ˆæ˜¾ç„¶å¯ä»¥è®¾$dp[i][j]$è¡¨ç¤ºæŠŠå‰$i$ä¸ªç™½çƒæ”¾å¥½ï¼Œå‰$j$ä¸ªé»‘çƒï¼Œé‚£ä¹ˆåŠ å…¥æˆ‘æ”¾$i$è¿™ä¸ªç™½çƒï¼Œé‚£ä¹ˆ$i-1$ä¸ªç™½çƒä»¥åŠ$j$ä¸ªé»‘çƒå°±æ˜¯æ¯”ä»–å°çš„ï¼Œè¿™æ ·å°±å¯ä»¥è®¡ç®—å‡ºé€†åºå¯¹äº†ã€‚åŒç†é»‘çƒä¹Ÿæ˜¯ã€‚</p><ul><li>$i-1$ä¸ªç™½çƒä»¥åŠ$j$ä¸ªé»‘çƒå°±æ˜¯æ¯”ä»–å°çš„å¯ä»¥é¢„å¤„ç†å°±è§£å†³äº†ã€‚</li></ul><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    vector&lt;pair&lt;char, int&gt;&gt; a(2 * n + 1);</span><br><span class="line">    vector&lt;int&gt; pw(n + 1), pb(n + 1);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">2</span> * n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; a[i].first &gt;&gt; a[i].second;</span><br><span class="line">        <span class="keyword">if</span> (a[i].first == <span class="string">'W'</span>)</span><br><span class="line">            pw[a[i].second] = i;</span><br><span class="line">        <span class="keyword">if</span> (a[i].first == <span class="string">'B'</span>)</span><br><span class="line">            pb[a[i].second] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">cw</span><span class="params">(<span class="number">2</span> * n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>))</span></span>;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">cb</span><span class="params">(<span class="number">2</span> * n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>))</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">2</span> * n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            cw[i][j] = cw[i - <span class="number">1</span>][j] + (a[i - <span class="number">1</span>].second &gt; j &amp;&amp; a[i - <span class="number">1</span>].first == <span class="string">'W'</span>);</span><br><span class="line">            cb[i][j] = cb[i - <span class="number">1</span>][j] + (a[i - <span class="number">1</span>].second &gt; j &amp;&amp; a[i - <span class="number">1</span>].first == <span class="string">'B'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">dp</span><span class="params">(n + <span class="number">1</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n + <span class="number">1</span>, <span class="number">1e9</span>))</span></span>;</span><br><span class="line">    dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = pw[i], y = pb[j];</span><br><span class="line">            <span class="keyword">if</span> (i)</span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i - <span class="number">1</span>][j] + cw[x][i] + cb[x][j]);</span><br><span class="line">            <span class="keyword">if</span> (j)</span><br><span class="line">                dp[i][j] = <span class="built_in">min</span>(dp[i][j], dp[i][j - <span class="number">1</span>] + cw[y][i] + cb[y][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; dp[n][n] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰ $2N$ä¸ªçƒæ’æˆä¸€åˆ—ï¼Œå…¶ä¸­æœ‰$N$ä¸ªé»‘çƒä¸ $N$ ä¸ªç™½çƒã€‚æŠŠ $1$ åˆ° $N$ è¿™ $N$ä¸ªæ•°å­—åˆ†åˆ«å†™åˆ° $N$ ä¸ªé»‘çƒä¸Šï¼›ç™½çƒäº¦ç„¶ã€‚å·¦èµ·ç¬¬ $i$ ä¸ªçƒä¸Šçš„å†™çš„æ•°å­—æ˜¯ $a_i$ï¼Œé¢œè‰²æ˜¯ $c_i$ã€‚&lt;/p&gt;
&lt;p&gt; $B$ æ˜¯é»‘çƒï¼Œä¸º $W$ æ˜¯ç™½çƒã€‚&lt;/p&gt;
&lt;p&gt;å®šä¹‰ä¸€æ¬¡æ“ä½œä¸ºäº¤æ¢ä¸¤ä¸ªç›¸é‚»çš„çƒã€‚ä½ éœ€è¦æ±‚å‡ºæœ€å°‘çš„æ“ä½œä½¿å¾—åºåˆ—ä¸­&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="dp" scheme="http://yoursite.com/tags/dp/"/>
    
  </entry>
  
  <entry>
    <title>CF603E - Pastoral Oddities</title>
    <link href="http://yoursite.com/2020/12/06/CF603E/"/>
    <id>http://yoursite.com/2020/12/06/CF603E/</id>
    <published>2020-12-06T02:47:00.000Z</published>
    <updated>2020-12-06T04:09:11.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li>ç»™å®šä¸€å¼  $n$ä¸ªç‚¹çš„æ— å‘å›¾ï¼Œåˆå§‹æ²¡æœ‰è¾¹ã€‚</li><li>ä¾æ¬¡åŠ å…¥$m$æ¡å¸¦æƒçš„è¾¹ï¼Œæ¯æ¬¡åŠ å…¥åè¯¢é—®æ˜¯å¦å­˜åœ¨ä¸€ä¸ªè¾¹é›†ï¼Œæ»¡è¶³æ¯ä¸ªç‚¹çš„åº¦æ•°å‡ä¸ºå¥‡æ•°ã€‚</li><li>è‹¥å­˜åœ¨ï¼Œåˆ™è¿˜éœ€è¦æœ€å°åŒ–è¾¹é›†ä¸­çš„æœ€å¤§è¾¹æƒã€‚</li><li>$n \le 10^5,m\leq 3\times 10^5 $</li></ul><a id="more"></a><p>è€ƒè™‘é™æ€å›¾ï¼Œæ˜¾ç„¶é¦–å…ˆæ»¡è¶³è”é€šå—ç‚¹æ•°ä¸ºå¶æ•°ã€‚</p><p>è€ƒè™‘å½“å‰å›¾ä¹Ÿå¿…é¡»è”é€šå—æ˜¯å¶æ•°ç‚¹ï¼Œï¼ˆå› ä¸ºå»è¾¹ä¹‹ååˆ†è£‚æˆè”é€šä¹Ÿè¦æ»¡è¶³å¶æ•°ç‚¹)ã€‚</p><p>æœ€å°åŒ–è¾¹é›†ä¸­çš„æœ€å¤§è¾¹æƒï¼Œè€ƒè™‘ç»´æŠ¤æœ€å°ç”Ÿæˆæ ‘ã€‚</p><p>å¦‚æœçº¯é™æ€ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¶å­èŠ‚ç‚¹ç±»ä¼¼é€’æ¨é€‰æ‹©å°½é‡å°‘çš„è¾¹ã€‚è¿™æ ·æ˜¾ç„¶æ˜¯å¯ä»¥æœ‰è§£.</p><p>ä½†æ˜¯è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä»ç„¶æ²¡æœ‰é€‰å‡ºæœ€ä¼˜è§£ã€‚</p><p>ç$JB$ä¹±ç”»å‘ç°ï¼Œåˆ æ‰çš„è¾¹éƒ½æ˜¯åˆ†è£‚æˆ$å¥‡+å¥‡$çš„ï¼Œæˆ‘ä»¬ä¸æ–­åœ°å°è¯•åˆ é™¤å½“å‰æ£®æ—ä¸­è¾¹æƒæœ€å¤§çš„è¾¹ï¼Œè”é€šå—å°±ä¼šåˆ†è£‚ï¼Œå¦‚æœäº§ç”Ÿåˆ†è£‚æˆ$å¥‡+å¥‡$ï¼Œè¡¨ç¤ºè¿™ä¸ªè¾¹ä¸èƒ½åˆ ï¼Œè¿™é‡Œçš„æ“ä½œç”¨å¤§æ ¹å †ä»¥åŠæ‡’æƒ°è®°å·è¡¨ç¤ºã€‚</p><p>ç„¶åç”¨$LCT$å­æ ‘ç»´æŠ¤ä¸€ä¸‹å¥‡æ•°çš„è”é€šå—æœ‰å¤šå°‘ã€‚</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">4e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v, w;</span><br><span class="line">    Edge()&#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LCT</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ls son[pos][0]</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> rs son[pos][1]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> fa[N], root, tcnt;</span><br><span class="line">    <span class="keyword">int</span> son[N][<span class="number">2</span>];</span><br><span class="line">    pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; mx[N], val[N];</span><br><span class="line">    <span class="keyword">int</span> exsiz[N], si[N], siz[N];</span><br><span class="line">    <span class="keyword">int</span> rev[N];</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        mx[pos] = <span class="built_in">max</span>(val[pos], <span class="built_in">max</span>(mx[ls], mx[rs]));</span><br><span class="line">        siz[pos] = siz[ls] + siz[rs] + exsiz[pos] + si[pos];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isroot</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pos != son[fa[pos]][<span class="number">0</span>] &amp;&amp; pos != son[fa[pos]][<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addrev</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        rev[pos] ^= <span class="number">1</span>;</span><br><span class="line">        swap(son[pos][<span class="number">0</span>], son[pos][<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (rev[pos])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (son[pos][<span class="number">1</span>])</span><br><span class="line">                addrev(son[pos][<span class="number">1</span>]);</span><br><span class="line">            <span class="keyword">if</span> (son[pos][<span class="number">0</span>])</span><br><span class="line">                addrev(son[pos][<span class="number">0</span>]);</span><br><span class="line">            rev[pos] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isson</span><span class="params">(<span class="keyword">int</span> pos)</span> </span>&#123; <span class="keyword">return</span> pos == son[fa[pos]][<span class="number">1</span>]; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">conect</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> d, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        son[x][d] = y;</span><br><span class="line">        fa[y] = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rorate</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> y = fa[x], z = fa[y], dx = isson(x), dy = isson(y);</span><br><span class="line"></span><br><span class="line">        fa[x] = z;</span><br><span class="line">        <span class="keyword">if</span> (!isroot(y))</span><br><span class="line">            son[z][dy] = x;</span><br><span class="line">        <span class="comment">//conect(z, dy, x);</span></span><br><span class="line">        conect(y, dx, son[x][dx ^ <span class="number">1</span>]);</span><br><span class="line">        conect(x, dx ^ <span class="number">1</span>, y);</span><br><span class="line">        pushup(y), pushup(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> st[N];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">splay</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> top;</span><br><span class="line">        st[top = <span class="number">1</span>] = x;</span><br><span class="line">        <span class="keyword">int</span> u = x;</span><br><span class="line">        <span class="keyword">while</span> (!isroot(u))</span><br><span class="line">            u = fa[u], st[++top] = u;</span><br><span class="line">        <span class="keyword">while</span> (top)</span><br><span class="line">            pushdown(st[top--]);</span><br><span class="line">        <span class="keyword">while</span> (!isroot(x))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> y = fa[x];</span><br><span class="line">            <span class="keyword">if</span> (isroot(y))</span><br><span class="line">            &#123;</span><br><span class="line">                rorate(x);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (isson(x) == isson(y))</span><br><span class="line">                rorate(y), rorate(x);</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                rorate(x), rorate(x);</span><br><span class="line">        &#125;</span><br><span class="line">        pushup(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">access</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; x; i = x, x = fa[x])</span><br><span class="line">        &#123;</span><br><span class="line">            splay(x), exsiz[x] -= siz[i], exsiz[x] += siz[son[x][<span class="number">1</span>]], son[x][<span class="number">1</span>] = i, pushup(x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">makeroot</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        access(x), splay(x), addrev(x); <span class="comment">// access ä¹‹åå°†æ²¡æœ‰å³å­æ ‘ã€‚ç„¶åæŠŠxå˜æˆæ ¹ï¼ŒæŠŠä¸‹é¢éƒ½ç¿»è½¬ï¼Œè¿™æ ·xå°±æ˜¯æœ€å°çš„å…ƒç´ äº†ã€‚</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findroot</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        access(x), splay(x);</span><br><span class="line">        <span class="keyword">while</span> (son[x][<span class="number">0</span>])</span><br><span class="line">            pushdown(x), x = son[x][<span class="number">0</span>];</span><br><span class="line">        splay(x);</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">split</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        makeroot(x);</span><br><span class="line">        access(y);</span><br><span class="line">        splay(y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">link</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        split(x, y);</span><br><span class="line">        cnt -= siz[x] &amp; <span class="number">1</span>;</span><br><span class="line">        cnt -= siz[y] &amp; <span class="number">1</span>;</span><br><span class="line">        fa[x] = y;</span><br><span class="line">        exsiz[y] += siz[x];</span><br><span class="line">        pushup(y);</span><br><span class="line">        cnt += siz[y] &amp; <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">cut</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        split(x, y);</span><br><span class="line">        fa[x] = <span class="number">0</span>;</span><br><span class="line">        son[y][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">        cnt -= siz[y] &amp; <span class="number">1</span>;</span><br><span class="line">        pushup(y);</span><br><span class="line">        cnt += siz[x] &amp; <span class="number">1</span>;</span><br><span class="line">        cnt += siz[y] &amp; <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="built_in">vector</span>&lt;Edge&gt; tmp)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            si[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">            val[i + n] = mx[i + n] = &#123;tmp[i].w, i&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="built_in">vector</span>&lt;Edge&gt; tmp)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cnt = n;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">vis</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">        priority_queue&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; q;</span><br><span class="line">        <span class="keyword">auto</span> add = [&amp;](<span class="keyword">int</span> i) &#123;</span><br><span class="line">            <span class="keyword">int</span> u = tmp[i].u, v = tmp[i].v, w = tmp[i].w;</span><br><span class="line">            <span class="keyword">bool</span> flag = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (findroot(u) == findroot(v))</span><br><span class="line">            &#123;</span><br><span class="line">                split(u, v);</span><br><span class="line">                <span class="keyword">auto</span> o = mx[v];</span><br><span class="line">                <span class="keyword">if</span> (o.first &gt; w)</span><br><span class="line">                &#123;</span><br><span class="line">                    cut(n + o.second, tmp[o.second].u);</span><br><span class="line">                    cut(n + o.second, tmp[o.second].v);</span><br><span class="line">                    vis[o.second] = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    flag = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (flag)</span><br><span class="line">            &#123;</span><br><span class="line">                link(i + n, u), link(i + n, v);</span><br><span class="line">                q.push(&#123;tmp[i].w, i&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//  cout &lt;&lt; cnt &lt;&lt; "!!!" &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">if</span> (cnt)</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (q.<span class="built_in">size</span>())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> o = q.top().second;</span><br><span class="line">                q.pop();</span><br><span class="line">                <span class="keyword">if</span> (vis[o])</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                cut(tmp[o].u, o + n);</span><br><span class="line">                cut(tmp[o].v, o + n);</span><br><span class="line">                <span class="comment">// cout &lt;&lt; o &lt;&lt; " " &lt;&lt; cnt &lt;&lt; endl;</span></span><br><span class="line">                <span class="keyword">if</span> (cnt)</span><br><span class="line">                &#123;</span><br><span class="line">                    link(tmp[o].u, o + n), link(tmp[o].v, o + n);</span><br><span class="line">                    q.push(&#123;tmp[o].w, o&#125;);</span><br><span class="line">                    <span class="keyword">return</span> tmp[o].w;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; add(i) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span>.tie(<span class="literal">nullptr</span>);</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;Edge&gt; <span class="title">e</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; e[i].u &gt;&gt; e[i].v &gt;&gt; e[i].w;</span><br><span class="line">    t.init(n, m, e);</span><br><span class="line">    t.solve(n, m, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;ç»™å®šä¸€å¼  $n$ä¸ªç‚¹çš„æ— å‘å›¾ï¼Œåˆå§‹æ²¡æœ‰è¾¹ã€‚&lt;/li&gt;
&lt;li&gt;ä¾æ¬¡åŠ å…¥$m$æ¡å¸¦æƒçš„è¾¹ï¼Œæ¯æ¬¡åŠ å…¥åè¯¢é—®æ˜¯å¦å­˜åœ¨ä¸€ä¸ªè¾¹é›†ï¼Œæ»¡è¶³æ¯ä¸ªç‚¹çš„åº¦æ•°å‡ä¸ºå¥‡æ•°ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥å­˜åœ¨ï¼Œåˆ™è¿˜éœ€è¦æœ€å°åŒ–è¾¹é›†ä¸­çš„æœ€å¤§è¾¹æƒã€‚&lt;/li&gt;
&lt;li&gt;$n \le 10^5,m\leq 3\times 10^5 $&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="LCT" scheme="http://yoursite.com/tags/LCT/"/>
    
  </entry>
  
  <entry>
    <title>CF1139D Steps to One</title>
    <link href="http://yoursite.com/2020/11/25/CF1139D/"/>
    <id>http://yoursite.com/2020/11/25/CF1139D/</id>
    <published>2020-11-25T02:47:00.000Z</published>
    <updated>2020-12-06T05:33:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä¸€ä¸ªæ•°åˆ—ï¼Œæ¯æ¬¡éšæœºé€‰ä¸€ä¸ª $1$ åˆ° $m$ä¹‹é—´çš„æ•°åŠ åœ¨æ•°åˆ—æœ«å°¾ï¼Œæ•°åˆ—ä¸­æ‰€æœ‰æ•°çš„ $\gcd=1$ æ—¶åœæ­¢ï¼Œæ±‚æœŸæœ›é•¿åº¦ã€‚</p><a id="more"></a><p>å¯ä»¥å…ˆæŠŠç¬¬ä¸€ä¸ªåŠ çš„æ•°å­—ç¡®å®šã€‚</p><p>$f[i]$è¡¨ç¤ºä»å½“å‰$\gcd=i$,å˜åˆ°$1$éœ€è¦çš„æœŸæœ›æ­¥æ•°ã€‚<br>$f[1]=0$</p><p>$f[i]=1+\frac{f[\gcd(i,j)]}{m}$</p><script type="math/tex; mode=display">   mf[i]=m+\sum_{x|i}f(x)\sum_{j=1}^m [\gcd(i,j)=x]\\    mf[i]=m+\sum_{x|i}f(x)\sum_{j=1}^m [\gcd(i,j)=x]\\     mf[i]=m+\sum_{x|i}f(x)\sum_{j=1}^{\frac{m}{i}} [\gcd(\frac{i}{x},j)=1]\\     mf[i]=m+\sum_{x|i}f(x)\sum_{d|\frac{i}{x}} \mu(d)\frac{m}{id}\\     (m-\frac{m}{i})f[i]=m+\sum_{x|i}f(x)\sum_{d|\frac{i}{x}} \mu(d)\frac{m}{id}[i \not=x]\\</script><p>åˆ†æä¸‹å¤æ‚åº¦$\sum_{i=1}^m\sum_{j=1}^{\frac{m}{i}}D(j)=\sum_{i=1}^m\sum_{d=1}^{\frac{m}{i}}\frac{\frac{m}{i}}{d}=\sum_{i=1}^m\frac{m}{i}\log m=O(m\log^2 m)$</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">inc</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123; <span class="keyword">return</span> (x + y &gt;= mod) ? (x + y - mod) : (x + y); &#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">del</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123; <span class="keyword">return</span> (x - y &lt; <span class="number">0</span>) ? (x - y + mod) : (x - y); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> x, <span class="keyword">int</span> mo)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (x)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &amp; <span class="number">1</span>)</span><br><span class="line">            res = <span class="number">1l</span>l * a * res % mo;</span><br><span class="line">        a = <span class="number">1l</span>l * a * a % mo;</span><br><span class="line">        x &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pcnt, pr[N], npr[N];</span><br><span class="line"><span class="keyword">int</span> mu[N], usum[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Prime_init</span><span class="params">(<span class="keyword">int</span> X)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    npr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    mu[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= X; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!npr[i])</span><br><span class="line">            pr[++pcnt] = i, mu[i] = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= pcnt &amp;&amp; pr[j] * i &lt;= X; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            npr[pr[j] * i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (i % pr[j] == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                mu[pr[j] * i] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                mu[pr[j] * i] = mu[i] * (<span class="number">-1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">g</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= m; j += i)</span><br><span class="line">            g[j].push_back(i);</span><br><span class="line">    Prime_init(m);</span><br><span class="line">    <span class="keyword">auto</span> calc = [&amp;](<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d : g[b])</span><br><span class="line">        &#123;</span><br><span class="line">            res += mu[d] * (a / d);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; a &lt;&lt; " " &lt;&lt; b &lt;&lt; " " &lt;&lt; res &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; <span class="title">z</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, j; i &lt;= m; i = j + <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        j = m / (m / i);</span><br><span class="line">        z[m / i].resize(m / i + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= m / i; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            z[m / i][k] = calc(m / i, k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">f</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> d : g[i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (d == i)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            res = inc(res, <span class="number">1l</span>l * f[d] * z[m / d][i / d] % mod);</span><br><span class="line">        &#125;</span><br><span class="line">        f[i] = <span class="number">1l</span>l * (res + m) * qpow(m - m / i, mod - <span class="number">2</span>, mod) % mod;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; f[i] &lt;&lt; endl;</span></span><br><span class="line">        ans = inc(ans, f[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="number">1l</span>l * (ans + m) * qpow(m, mod - <span class="number">2</span>, mod) % mod &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä¸€ä¸ªæ•°åˆ—ï¼Œæ¯æ¬¡éšæœºé€‰ä¸€ä¸ª $1$ åˆ° $m$ä¹‹é—´çš„æ•°åŠ åœ¨æ•°åˆ—æœ«å°¾ï¼Œæ•°åˆ—ä¸­æ‰€æœ‰æ•°çš„ $\gcd=1$ æ—¶åœæ­¢ï¼Œæ±‚æœŸæœ›é•¿åº¦ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="è«æ¯”ä¹Œæ–¯åæ¼”" scheme="http://yoursite.com/tags/%E8%8E%AB%E6%AF%94%E4%B9%8C%E6%96%AF%E5%8F%8D%E6%BC%94/"/>
    
  </entry>
  
  <entry>
    <title>CF702F T-Shirts</title>
    <link href="http://yoursite.com/2020/11/20/CF702F/"/>
    <id>http://yoursite.com/2020/11/20/CF702F/</id>
    <published>2020-11-20T02:47:00.000Z</published>
    <updated>2020-12-06T04:55:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰ $n$ ç§Tæ¤ï¼Œæ¯ç§æœ‰ä»·æ ¼ $c_i$å’Œå“è´¨ $q_i$ ã€‚</p><p>æœ‰ $m$ ä¸ªäººè¦ä¹° $T$ æ¤ï¼Œç¬¬ $i$ ä¸ªäººæœ‰$v_i$å…ƒï¼Œæ¯äººæ¯æ¬¡éƒ½ä¼šä¹°ä¸€ä»¶èƒ½ä¹°å¾—èµ·çš„ $q_i$æœ€å¤§çš„$T$æ¤ã€‚ä¸€ä¸ªäººåªèƒ½ä¹°ä¸€ç§Tæ¤ä¸€ä»¶ï¼Œæ‰€æœ‰äººä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚</p><p>é—®æœ€åæ¯ä¸ªäººä¹°äº†å¤šå°‘ä»¶ $T$ æ¤ï¼Ÿå¦‚æœæœ‰å¤šä¸ª $q_i$ æœ€å¤§çš„Tæ¤ï¼Œä¼šä»ä»·æ ¼ä½çš„å¼€å§‹ä¹°ã€‚</p><a id="more"></a><p>è€ƒè™‘æœ´ç´ æš´åŠ›æšä¸¾äºº$O(nm)$æ— æ³•ä¼˜åŒ–ã€‚</p><p>è€ƒè™‘æšä¸¾è¡£æœï¼Œå…ˆæŒ‰å“è´¨æ’åºï¼Œç„¶åå†ä»·æ ¼ä¸ºç¬¬äºŒå…³é”®å­—ã€‚æœ´ç´ è€ƒè™‘å°†æ‰€æœ‰$v_i\geq c_i$éƒ½$+1$ï¼Œå¹¶ä¸”$v_i=v_i-c$ã€‚</p><p>è¿™ç§åŒºé—´ä¿®æ”¹å°±æƒ³åˆ°äº†$FHQ$,è€ƒè™‘$v_i&gt;2c$çš„åªè¦æ‰“ä¸Šæ ‡è®°å°±å¥½ï¼Œç›¸å¯¹ä½ç½®ä¸ä¼šå˜ï¼Œå³åœ¨å¹³è¡¡æ ‘ä¸Šä½ç½®ä¸ä¼šå˜ï¼Œä½†æ˜¯è€ƒè™‘$c\leq v_i\leq 2c$,è¦æ”¹å˜ï¼Œè¿™é‡Œå¯ä»¥æš´åŠ›ã€‚</p><ul><li>$c\leq v_i\leq 2c$,$nv_i\leq v_i/2$ã€‚å¯¹äºä¸€ä¸ªä»·æ ¼æ¥è¯´æœ€å¤šæš´åŠ›æ”¹å˜$\log n$</li></ul><p>æœ€åå¤æ‚åº¦å°±å¯$O(n\log^2n)$</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mk make_pair</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e9</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::mt19937 <span class="title">rnd</span><span class="params">(<span class="built_in">std</span>::chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FHQ</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> ls[N], rs[N], siz[N], key[N], val[N];</span><br><span class="line">    <span class="keyword">int</span> sum[N];</span><br><span class="line">    <span class="keyword">int</span> tag[N];</span><br><span class="line">    <span class="keyword">int</span> de[N];</span><br><span class="line">    <span class="keyword">int</span> id[N];</span><br><span class="line">    <span class="keyword">int</span> tcnt;</span><br><span class="line">    <span class="keyword">int</span> root;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Newnode</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        siz[++tcnt] = <span class="number">1</span>;</span><br><span class="line">        val[tcnt] = x;</span><br><span class="line">        id[tcnt] = i;</span><br><span class="line">        key[tcnt] = rnd(); <span class="comment">//ç²¾é«“æ‰€åœ¨</span></span><br><span class="line">        ls[tcnt] = rs[tcnt] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> tcnt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addtag</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> w, <span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        sum[pos] += w;</span><br><span class="line">        tag[pos] += w;</span><br><span class="line">        val[pos] -= c;</span><br><span class="line">        de[pos] += c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushdown</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (tag[pos])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ls[pos])</span><br><span class="line">                addtag(ls[pos], tag[pos], <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">if</span> (rs[pos])</span><br><span class="line">                addtag(rs[pos], tag[pos], <span class="number">0</span>);</span><br><span class="line">            tag[pos] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (de[pos])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (ls[pos])</span><br><span class="line">                addtag(ls[pos], <span class="number">0</span>, de[pos]);</span><br><span class="line">            <span class="keyword">if</span> (rs[pos])</span><br><span class="line">                addtag(rs[pos], <span class="number">0</span>, de[pos]);</span><br><span class="line">            de[pos] = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//siz[pos] = siz[ls[pos]] + siz[rs[pos]] + 1;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">split</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> v, <span class="keyword">int</span> &amp;ll, <span class="keyword">int</span> &amp;rr)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!pos)</span><br><span class="line">        &#123;</span><br><span class="line">            ll = <span class="number">0</span>, rr = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        pushdown(pos);</span><br><span class="line">        <span class="keyword">if</span> (val[pos] &lt;= v)</span><br><span class="line">        &#123;</span><br><span class="line">            ll = pos;</span><br><span class="line">            split(rs[pos], v, rs[pos], rr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            rr = pos;</span><br><span class="line">            split(ls[pos], v, ll, ls[pos]);</span><br><span class="line">        &#125;</span><br><span class="line">        pushup(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!l || !r)</span><br><span class="line">            <span class="keyword">return</span> l + r;</span><br><span class="line">        pushdown(l), pushdown(r);</span><br><span class="line">        ;</span><br><span class="line">        <span class="keyword">if</span> (key[l] &lt; key[r])</span><br><span class="line">        &#123;</span><br><span class="line">            rs[l] = merge(rs[l], r);</span><br><span class="line">            pushup(l);</span><br><span class="line">            <span class="keyword">return</span> l;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            ls[r] = merge(l, ls[r]);</span><br><span class="line">            pushup(r);</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> v, <span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = Newnode(v, i);</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line"></span><br><span class="line">        split(root, v, x, y);</span><br><span class="line"></span><br><span class="line">        root = merge(merge(x, tmp), y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> _insert(<span class="keyword">int</span> &amp;rt, <span class="keyword">int</span> pos)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y;</span><br><span class="line"></span><br><span class="line">        split(rt, val[pos], x, y);</span><br><span class="line"></span><br><span class="line">        rt = merge(merge(x, pos), y);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">delet</span><span class="params">(<span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> x, y, z, tmp;</span><br><span class="line">        split(root, v, x, z);</span><br><span class="line">        split(tmp = x, v - <span class="number">1</span>, x, y);</span><br><span class="line">        root = merge(merge(x, merge(ls[y], rs[y])), z);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; t;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> c, q;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tmp;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!pos)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    tmp.push_back(pos);</span><br><span class="line">    t.pushdown(pos);</span><br><span class="line">    dfs(t.ls[pos]);</span><br><span class="line">    dfs(t.rs[pos]);</span><br><span class="line">    t.ls[pos] = <span class="number">0</span>;</span><br><span class="line">    t.rs[pos] = <span class="number">0</span>;</span><br><span class="line">    t.key[pos] = rnd();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>();</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;node&gt; <span class="title">p</span><span class="params">(n)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        p[i].c = <span class="built_in">read</span>(), p[i].q = <span class="built_in">read</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        t.insert(<span class="built_in">read</span>(), i);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(p.<span class="built_in">begin</span>(), p.<span class="built_in">end</span>(), [](node a, node b) &#123; <span class="keyword">return</span> a.q == b.q ? a.c &lt; b.c : a.q &gt; b.q; &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> now : p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y, z;</span><br><span class="line">        <span class="keyword">int</span> c = now.c;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; t.val[1] &lt;&lt; endl;</span></span><br><span class="line">        t.split(t.root, c - <span class="number">1</span>, x, y);</span><br><span class="line">        t.split(y, <span class="number">2</span> * c, y, z);</span><br><span class="line">        t.addtag(z, <span class="number">1</span>, c);</span><br><span class="line">        t.addtag(y, <span class="number">1</span>, c);</span><br><span class="line">        tmp.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="comment">//cout &lt;&lt; c &lt;&lt; " " &lt;&lt; y &lt;&lt; endl;</span></span><br><span class="line">        dfs(y);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i : tmp)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//cout &lt;&lt; t.val[i] &lt;&lt; " " &lt;&lt; i &lt;&lt; " " &lt;&lt; x &lt;&lt; endl;</span></span><br><span class="line">            t._insert(x, i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        t.root = t.merge(x, z);</span><br><span class="line">    &#125;</span><br><span class="line">    tmp.<span class="built_in">clear</span>();</span><br><span class="line">    dfs(t.root);</span><br><span class="line">    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">ans</span><span class="params">(m + <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i : tmp)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[t.id[i]] = t.sum[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰ $n$ ç§Tæ¤ï¼Œæ¯ç§æœ‰ä»·æ ¼ $c_i$å’Œå“è´¨ $q_i$ ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ $m$ ä¸ªäººè¦ä¹° $T$ æ¤ï¼Œç¬¬ $i$ ä¸ªäººæœ‰$v_i$å…ƒï¼Œæ¯äººæ¯æ¬¡éƒ½ä¼šä¹°ä¸€ä»¶èƒ½ä¹°å¾—èµ·çš„ $q_i$æœ€å¤§çš„$T$æ¤ã€‚ä¸€ä¸ªäººåªèƒ½ä¹°ä¸€ç§Tæ¤ä¸€ä»¶ï¼Œæ‰€æœ‰äººä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚&lt;/p&gt;
&lt;p&gt;é—®æœ€åæ¯ä¸ªäººä¹°äº†å¤šå°‘ä»¶ $T$ æ¤ï¼Ÿå¦‚æœæœ‰å¤šä¸ª $q_i$ æœ€å¤§çš„Tæ¤ï¼Œä¼šä»ä»·æ ¼ä½çš„å¼€å§‹ä¹°ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="å¹³è¡¡æ ‘" scheme="http://yoursite.com/tags/%E5%B9%B3%E8%A1%A1%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>SP11470 TTM - To the moon</title>
    <link href="http://yoursite.com/2020/11/01/SP11470/"/>
    <id>http://yoursite.com/2020/11/01/SP11470/</id>
    <published>2020-11-01T02:47:00.000Z</published>
    <updated>2020-11-04T05:10:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¯æŒç»­åŒ–çº¿æ®µæ ‘çš„åŒºé—´åŠ å‡ã€‚</p><a id="more"></a><p>å¦‚æœç”¨<strong>lazy</strong>æ ‡è®°çš„åŒ–ï¼Œå‘ç°ä¸¤ä¸ªç‰ˆæœ¬çš„çº¿æ®µæ ‘å…±ç”¨çš„èŠ‚ç‚¹ä¸èƒ½ä¿®æ”¹å€¼ã€‚</p><p>è¿™æ—¶å€™æ ‡è®°æ°¸ä¹…åŒ–å°±ä¸Šåœºäº†ã€‚</p><p>æ ‡è®°æ°¸ä¹…åŒ–æ—¢ä¸éœ€è¦ä¸‹ä¼ æ ‡è®°ï¼Œä¹Ÿä¸éœ€è¦é€šè¿‡å­èŠ‚ç‚¹æ›´æ–°è‡ªå·±ã€‚</p><ul><li>å¯¹äºæ›´æ–°ï¼Œæ›´æ–°ä¸€è·¯ä¸Šçš„<strong>å€¼</strong>ã€‚ç„¶ååœ¨æœ€åº•å±‚å®Œå…¨è¦†ç›–çš„èŠ‚ç‚¹ä¸Šæ‰“ä¸Šæ ‡è®°ã€‚</li><li>å¯¹äºæŸ¥è¯¢ï¼Œæ›´æ–°ä¸€è·¯çš„<strong>æ ‡è®°</strong>,æœ€ååŠ ä¸Šæœ€åº•å±‚çš„å€¼ã€‚</li></ul><p>æ³¨æ„å¤šæ€è€ƒç»†èŠ‚å°±å¥½äº†ã€‚</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mk make_pair</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SustainedTree</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> scnt;</span><br><span class="line">    ll sum[N &lt;&lt; <span class="number">5</span>], tag[N &lt;&lt; <span class="number">5</span>];</span><br><span class="line">    <span class="keyword">int</span> ls[N &lt;&lt; <span class="number">5</span>], rs[N &lt;&lt; <span class="number">5</span>];</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> &amp;pos, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        pos = ++scnt;</span><br><span class="line">        <span class="keyword">if</span> (l == r)</span><br><span class="line">        &#123;</span><br><span class="line">            sum[pos] = a[l];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        build(ls[pos], l, mid), build(rs[pos], mid + <span class="number">1</span>, r);</span><br><span class="line">        sum[pos] = sum[ls[pos]] + sum[rs[pos]];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> &amp;pos, <span class="keyword">int</span> pre, <span class="keyword">int</span> ql, <span class="keyword">int</span> qr, <span class="keyword">int</span> v, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        pos = ++scnt;</span><br><span class="line">        sum[pos] = sum[pre], tag[pos] = tag[pre], ls[pos] = ls[pre], rs[pos] = rs[pre];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr)</span><br><span class="line">        &#123;</span><br><span class="line">            tag[pos] += v;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sum[pos] += <span class="number">1l</span>l * v * (<span class="built_in">min</span>(qr, r) - <span class="built_in">max</span>(ql, l) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (ql &lt;= mid)</span><br><span class="line">            update(ls[pos], ls[pre], ql, qr, v, l, mid);</span><br><span class="line">        <span class="keyword">if</span> (qr &gt; mid)</span><br><span class="line">            update(rs[pos], rs[pre], ql, qr, v, mid + <span class="number">1</span>, r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> ql, <span class="keyword">int</span> qr, <span class="keyword">int</span> l, <span class="keyword">int</span> r, ll &amp;res)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        res += <span class="number">1l</span>l * tag[pos] * (<span class="built_in">min</span>(qr, r) - <span class="built_in">max</span>(ql, l) + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (ql &lt;= l &amp;&amp; r &lt;= qr)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            res += sum[pos];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (ql &lt;= mid)</span><br><span class="line">            query(ls[pos], ql, qr, l, mid, res);</span><br><span class="line">        <span class="keyword">if</span> (qr &gt; mid)</span><br><span class="line">            query(rs[pos], ql, qr, mid + <span class="number">1</span>, r, res);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> rt[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>(), m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        a[i] = <span class="built_in">read</span>();</span><br><span class="line">    t.build(rt[<span class="number">0</span>], <span class="number">1</span>, n);</span><br><span class="line">    <span class="keyword">int</span> now = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">char</span> s[<span class="number">5</span>];</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s);</span><br><span class="line">        <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'B'</span>)</span><br><span class="line">            now = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'C'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> l = <span class="built_in">read</span>(), r = <span class="built_in">read</span>(), d = <span class="built_in">read</span>();</span><br><span class="line">            t.update(rt[now + <span class="number">1</span>], rt[now], l, r, d, <span class="number">1</span>, n);</span><br><span class="line">            now++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'Q'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> l = <span class="built_in">read</span>(), r = <span class="built_in">read</span>();</span><br><span class="line">            ll res = <span class="number">0</span>;</span><br><span class="line">            t.query(rt[now], l, r, <span class="number">1</span>, n, res);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">'H'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> l = <span class="built_in">read</span>(), r = <span class="built_in">read</span>(), z = <span class="built_in">read</span>();</span><br><span class="line">            ll res = <span class="number">0</span>;</span><br><span class="line">            t.query(rt[z], l, r, <span class="number">1</span>, n, res);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, res);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯æŒç»­åŒ–çº¿æ®µæ ‘çš„åŒºé—´åŠ å‡ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æ ‡è®°æ°¸ä¹…åŒ–" scheme="http://yoursite.com/tags/%E6%A0%87%E8%AE%B0%E6%B0%B8%E4%B9%85%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>CF1430F Realistic Gameplay</title>
    <link href="http://yoursite.com/2020/10/31/CF1430F/"/>
    <id>http://yoursite.com/2020/10/31/CF1430F/</id>
    <published>2020-10-31T02:47:00.000Z</published>
    <updated>2020-11-04T05:54:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰$n$æ³¢æ€ªç‰©ï¼Œä½ æœ‰ä¸€æŠŠæªï¼Œæªçš„å¼¹å¤¹é‡ä¸º$k$ï¼Œç¬¬$i,[l_i,r_i]$æ³¢æ€ªç‰©æ•°é‡ä¸º$a_i$ï¼Œä½¿ç”¨å­å¼¹ä¸è´¹æ—¶é—´ï¼Œä½†æ˜¯ä½ æ¯æ¬¡æ¢å¼¹éƒ½éœ€è¦å°†å¼¹å¤¹ï¼ˆåŒ…æ‹¬é‡Œé¢çš„å­å¼¹ï¼‰æ‰”æ‰ï¼Œåœ¨å°½é‡ä¿è¯é€šå…³çš„æƒ…å†µä¸‹ï¼Œéœ€è¦çš„æœ€å¤šçš„å­å¼¹æ•°ä¸ºå¤šå°‘ã€‚</p><a id="more"></a><p>æœ‰å‡ ç‚¹éœ€è¦æ˜ç¡®:</p><ul><li>å¦‚æœæ€ªç‰©ä¹‹é—´æœ‰å¤šå‡ºçš„æ—¶é—´ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥é€‰æ‹©æ¢å¼¹æ¥è¾¾åˆ°æœ€ä¼˜çš„çŠ¶æ€ã€‚</li><li>å¯¹äºä¸€æ³¢æ€ªç‰©ä½ æœ€å¤šå¯ä»¥æ‰“å‡º=$èµ·å§‹å­å¼¹+k(r[i]-l[i])$ã€‚</li><li>æœ€ä¼˜ä¸€å®šæ˜¯ä¸€æ¬¡ä¸æ¢å¼¹ï¼Œæˆ‘ä»¬åªéœ€è¦å‡å°‘æ¢å¼¹æ¬¡æ•°å³å¯ã€‚</li><li>å› ä¸ºåé¢å¦‚æœç‰¹åˆ«ç´§ï¼Œè¿™ä¸ªæ—¶å€™å°±å¿…é¡»æ¢ï¼Œè¿™æ ·ä¹Ÿå¯è®©åé¢æ›´è½»æ¾ã€‚</li></ul><p>æˆ‘ä»¬å°±å¯ä»¥é¢„å¤„ç†å‡ºæ¯æ³¢è¿›åœºéœ€è¦çš„æœ€å°‘çš„å­å¼¹ã€‚è€ƒè™‘è¿åœ¨ä¸€èµ·çš„æ€ªç‰©æ³¢ï¼Œç›´æ¥ä»åå¾€å‰$dp$å³å¯ã€‚(æŠŠåä¸€æ¬¡éœ€è¦çš„å­å¼¹å½“æˆå¤šå‡ºçš„æ€ªç‰©)ã€‚</p><p>ç„¶åå°±æ˜¯è´ªå¿ƒçš„è¦æ¢å­å¼¹ï¼Œå°±å¯ä»¥æ¢å­å¼¹ã€‚</p><ul><li>å½“æˆ‘å¸¦ç€$tmp$å­å¼¹è¿›åœºã€‚åœ¨æˆ‘ä¸æµªè´¹å­å¼¹å¹¶ä¸”å¯ä»¥æ€å®Œæ‰€æœ‰æ€ªç‰©çš„æƒ…å†µä¸‹ï¼Œæˆ‘æœ€åå‰©ä½™çš„å­å¼¹åº”è¯¥æ˜¯$(k - (a[i] - tmp) \mod k) \mod k$</li></ul><p>ç„¶åè´ªå¿ƒçš„æ¨¡æ‹Ÿä¸€éå³å¯ã€‚ï¼ˆè¿ç»­éƒ¨åˆ†å¯ä»¥é€‰æ‹©åˆå¹¶èµ·æ¥æ¨¡æ‹Ÿï¼Œä¹Ÿå¯ä»¥ä¸åˆå¹¶ï¼‰</p><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mk make_pair</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>(), k = <span class="built_in">read</span>();</span><br><span class="line">    vector&lt;ll&gt; l(n + 1), r(n + 1), a(n + 1), f(n + 1);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        l[i] = <span class="built_in">read</span>(), r[i] = <span class="built_in">read</span>(), a[i] = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (r[i] == l[i + <span class="number">1</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            f[i] = <span class="built_in">max</span>(<span class="number">0l</span>l, f[i + <span class="number">1</span>] + a[i] - (r[i] - l[i]) * k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            f[i] = <span class="built_in">max</span>(<span class="number">0l</span>l, a[i] - (r[i] - l[i]) * k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (f[i] &gt; k)</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ll tmp = k, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        ans += a[i];</span><br><span class="line">        <span class="keyword">if</span> (f[i] &gt; tmp)</span><br><span class="line">        &#123;</span><br><span class="line">            ans += tmp;</span><br><span class="line">            tmp = k;</span><br><span class="line">        &#125;</span><br><span class="line">        tmp = (k - (a[i] - tmp) % k) % k;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰$n$æ³¢æ€ªç‰©ï¼Œä½ æœ‰ä¸€æŠŠæªï¼Œæªçš„å¼¹å¤¹é‡ä¸º$k$ï¼Œç¬¬$i,[l_i,r_i]$æ³¢æ€ªç‰©æ•°é‡ä¸º$a_i$ï¼Œä½¿ç”¨å­å¼¹ä¸è´¹æ—¶é—´ï¼Œä½†æ˜¯ä½ æ¯æ¬¡æ¢å¼¹éƒ½éœ€è¦å°†å¼¹å¤¹ï¼ˆåŒ…æ‹¬é‡Œé¢çš„å­å¼¹ï¼‰æ‰”æ‰ï¼Œåœ¨å°½é‡ä¿è¯é€šå…³çš„æƒ…å†µä¸‹ï¼Œéœ€è¦çš„æœ€å¤šçš„å­å¼¹æ•°ä¸ºå¤šå°‘ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æ€ç»´" scheme="http://yoursite.com/tags/%E6%80%9D%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>2019 ICPCå—æ˜Œ J.Summon</title>
    <link href="http://yoursite.com/2020/10/30/ICPCNCJ/"/>
    <id>http://yoursite.com/2020/10/30/ICPCNCJ/</id>
    <published>2020-10-30T02:47:00.000Z</published>
    <updated>2020-11-04T05:21:54.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç¯ä¸Šæ¶‚é¢œè‰²ï¼Œä¸èƒ½å‡ºç°ç»™å®šé¢œè‰²çš„é¡ºæ—¶é’ˆé¡ºåºã€‚ï¼ˆé•¿åº¦ä¸º=4)ã€‚<br><a id="more"></a></p><script type="math/tex; mode=display">\frac{1}{|G|}\sum_{f\in G}m^{m(f)}</script><p>å˜æ¢ä¸€ä¸‹å°±æ˜¯</p><script type="math/tex; mode=display">    \frac{1}{n}\sum_{d|n}\phi(\frac{n}{d})f(d)</script><p>ç„¶å$f(d)$å°±è¡¨ç¤ºï¼Œé•¿åº¦$d$çš„ç¯ç¬¦åˆ è¦æ±‚æœ‰å‡ ä¸ªï¼ˆä¸ç”¨è€ƒè™‘é€‰æ‹©ï¼‰<br>åˆšå¼€å§‹è§‰å¾—è¿™é¢˜ï¼Œç”¨å¿«é€Ÿå¹‚æŒºç‚«é…·çš„ï¼Œå‘ç°å°±æ˜¯å¥—è·¯ã€‚è½¬åŒ–æˆä»æŸä¸ªçŠ¶æ€èµ°$d$æ­¥åˆ°æŸä¸ªçŠ¶æ€çš„æ­¥æ•°ç§ç±»ã€‚</p><p>è·Ÿ$POJ2888$ä¸€æ‘¸ä¸€æ ·ã€‚</p><p>å˜æˆå››è¿›åˆ¶ã€‚ç„¶åçŸ©é˜µå¿«é€Ÿå¹‚æ²¡äº†ã€‚</p><ul><li>æ³¨æ„é¢„å¤„ç†å¯ä»¥è½¬ç§»çš„è¿›åˆ¶ã€‚</li><li>å¸¸æ•°ä¼˜åŒ–ã€‚</li></ul><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mk make_pair</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e3</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Z = <span class="number">64</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> row, col;</span><br><span class="line">    <span class="keyword">int</span> s[Z][Z];</span><br><span class="line">    Matrix()</span><br><span class="line">    &#123; <span class="comment">//æ— å‚æ•°æ„é€ å‡½æ•°</span></span><br><span class="line">        row = col = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="keyword">sizeof</span>(s));</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix(<span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="keyword">int</span> x = <span class="number">0</span>) : row(n), col(m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="keyword">sizeof</span>(s));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++)</span><br><span class="line">                s[i][j] = x;</span><br><span class="line">    &#125; <span class="comment">//é‡è½½æ„é€ å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printp</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">//è¾“å‡ºä¸€ä¸ªçŸ©é˜µ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++)</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; s[i][j] &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// void transpose()</span></span><br><span class="line">    <span class="comment">// &#123; //çŸ©é˜µçš„è½¬ç½®</span></span><br><span class="line">    <span class="comment">//     Matrix y(col, row);</span></span><br><span class="line">    <span class="comment">//     for (int i = 1; i &lt;= row; i++)</span></span><br><span class="line">    <span class="comment">//     &#123;</span></span><br><span class="line">    <span class="comment">//         for (int j = 1; j &lt;= col; j++)</span></span><br><span class="line">    <span class="comment">//             y.s[j][i] = s[i][j];</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     *this = y;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">identity</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123; <span class="comment">//å°†è¯¥çŸ©é˜µæ”¹æˆå•ä½çŸ©é˜µ</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++)</span><br><span class="line">            s[i][i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Matrix operator+(Matrix x)</span></span><br><span class="line">    <span class="comment">// &#123; //é‡è½½+</span></span><br><span class="line">    <span class="comment">//     Matrix y(row, col);</span></span><br><span class="line">    <span class="comment">//     for (int i = 0; i &lt;row; i++)</span></span><br><span class="line">    <span class="comment">//     &#123;</span></span><br><span class="line">    <span class="comment">//         for (int j = 0; j &lt; col; j++)</span></span><br><span class="line">    <span class="comment">//             y.s[i][j] += s[i][j] + x.s[i][j], y.s[i][j] %= mod;</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">//     return y;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    Matrix <span class="keyword">operator</span>*(Matrix x)</span><br><span class="line">    &#123; <span class="comment">//é‡è½½*</span></span><br><span class="line">        <span class="function">Matrix <span class="title">y</span><span class="params">(row, x.col)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; x.col; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; col; k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!s[i][k] || !x.s[k][j])</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    y.s[i][j] = (y.s[i][j] + <span class="number">1l</span>l * s[i][k] * x.s[k][j] % mod) % mod;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix <span class="keyword">operator</span>*=(Matrix x)</span><br><span class="line">    &#123; <span class="comment">//é‡è½½*=</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span> = *<span class="keyword">this</span> * x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; z[<span class="number">40</span>];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> x, <span class="keyword">int</span> mo)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (x)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &amp; <span class="number">1</span>)</span><br><span class="line">            res = <span class="number">1l</span>l * res * a % mod;</span><br><span class="line">        a = <span class="number">1l</span>l * a * a % mod;</span><br><span class="line">        x &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Matrix <span class="title">qpow</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Matrix <span class="title">res</span><span class="params">(z[<span class="number">0</span>].row, z[<span class="number">0</span>].col)</span></span>;</span><br><span class="line">    res.identity();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; (<span class="number">1</span> &lt;&lt; i) &lt;= x; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> ((<span class="number">1</span> &lt;&lt; i) &amp; x)</span><br><span class="line">        &#123;</span><br><span class="line">            res = res * z[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Polya</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">mult</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1l</span>l * x * y % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//  dt.printp();</span></span><br><span class="line">        Matrix res = qpow(x);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">            ans = (ans + res.s[i][i]) % mod;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> p[N], e[N];</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> now, <span class="keyword">int</span> phi, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (x &gt; cnt)</span><br><span class="line">        &#123;</span><br><span class="line">            ans = (ans + mult(phi % mod, calc(n / now))) % mod;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(x + <span class="number">1</span>, now, phi, n);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= e[x]; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            phi *= (p[x] - (i == <span class="number">1</span>));</span><br><span class="line">            now *= p[x];</span><br><span class="line">            dfs(x + <span class="number">1</span>, now, phi, n);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cnt = <span class="number">0</span>;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> tmp = n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i * i &lt;= n; i++)</span><br><span class="line">            <span class="keyword">if</span> (n % i == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                p[++cnt] = i;</span><br><span class="line">                e[cnt] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (n % i == <span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    n /= i;</span><br><span class="line">                    e[cnt]++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span> (n &gt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            p[++cnt] = n;</span><br><span class="line">            e[cnt] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, tmp);</span><br><span class="line">        <span class="comment">//cout &lt;&lt; ans &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1l</span>l * ans * qpow(tmp % mod, mod - <span class="number">2</span>, mod) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">// namespace Polya</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>(), m = <span class="built_in">read</span>();</span><br><span class="line">    <span class="function">Matrix <span class="title">tmp</span><span class="params">(<span class="number">64</span>, <span class="number">64</span>, <span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">64</span>; i++)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">64</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (((j &lt;&lt; <span class="number">2</span>) &amp; <span class="number">63</span>) == ((i &gt;&gt; <span class="number">2</span>) &lt;&lt; <span class="number">2</span>))</span><br><span class="line">                tmp.s[i][j] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">a</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[j] = <span class="built_in">read</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        tmp.s[a[<span class="number">0</span>] + (a[<span class="number">1</span>] &lt;&lt; <span class="number">2</span>) + (a[<span class="number">2</span>] &lt;&lt; <span class="number">4</span>)][a[<span class="number">1</span>] + (a[<span class="number">2</span>] &lt;&lt; <span class="number">2</span>) + (a[<span class="number">3</span>] &lt;&lt; <span class="number">4</span>)] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    z[<span class="number">0</span>] = tmp;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; (<span class="number">1</span> &lt;&lt; i) &lt;= n; i++)</span><br><span class="line">        z[i] = z[i - <span class="number">1</span>] * z[i - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; Polya::solve(n) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ç¯ä¸Šæ¶‚é¢œè‰²ï¼Œä¸èƒ½å‡ºç°ç»™å®šé¢œè‰²çš„é¡ºæ—¶é’ˆé¡ºåºã€‚ï¼ˆé•¿åº¦ä¸º=4)ã€‚&lt;br&gt;
    
    </summary>
    
    
    
      <category term="ç½®æ¢ç¾¤" scheme="http://yoursite.com/tags/%E7%BD%AE%E6%8D%A2%E7%BE%A4/"/>
    
  </entry>
  
  <entry>
    <title>P3307 [SDOI2013]é¡¹é“¾</title>
    <link href="http://yoursite.com/2020/10/30/P3307/"/>
    <id>http://yoursite.com/2020/10/30/P3307/</id>
    <published>2020-10-30T02:47:00.000Z</published>
    <updated>2020-11-04T05:10:09.000Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>ç å­=æ­£ä¸‰è±æŸ±,ä¸‰ä¸ªé¢ä¸Šé¢çš„æ•°å­—$x$,å¿…é¡»æ»¡è¶³$x\in [1,a]$ï¼Œä¸”ç å­ä¸Šé¢çš„æ•°å­—çš„æœ€å¤§å…¬çº¦æ•°è¦æ°å¥½ä¸º1ã€‚ä¸‰æ£±æŸ±å¯ä»¥é€‰æ‹©ç¿»è½¬.</p></li><li><p>ç›¸é‚»çš„ä¸¤ä¸ªç å­å¿…é¡»ä¸åŒã€‚</p></li><li><p>ä¸¤ä¸²é¡¹é“¾å¦‚æœèƒ½å¤Ÿç»è¿‡æ—‹è½¬å˜æˆä¸€æ ·çš„ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸²é¡¹é“¾å°±æ˜¯ç›¸åŒçš„</p></li></ul><p>$n&lt;=10^{14}ï¼Œa&lt;=10^7ï¼ŒT&lt;=10$<br><a id="more"></a></p><p>å¥½é¢˜ï¼</p><p>é¦–å…ˆç®—ç å­ç§ç±»ï¼Œ$s3$è¡¨ç¤º$3$ä¸ª$\gcd=1$çš„ä¸ªæ•°ï¼ŒåŒç†$s2,s1$ã€‚</p><p>$Burnsideå¼•ç†$</p><script type="math/tex; mode=display">    res=\frac{1}{3+3}(s3+3s2+2s1)</script><hr><p>ç„¶åä¹‹å$Polya$é‡Œçš„$m=res$</p><script type="math/tex; mode=display"> \frac{1}{n}\sum_{d|n}\varphi(\frac{n}{d})f(d)</script><p>è¿™é‡ŒçŸ©é˜µå¿«é€Ÿå¹‚å°±å¤ªå¤§äº†ã€‚</p><ul><li><p>å¦‚æœ$i-1$ä¸$1$ä¸åŒåˆ™$f(i)=f(i-1)(m-2)$</p></li><li><p>å¦‚æœ$i-1$ä¸$1$ç›¸åŒåˆ™$i-2$ä¸$1$ä¸åŒã€‚ $f(i)=f(i-2)(m-1)$</p></li></ul><p>$x^2-(m-1)x-(m-2)=(x+1)(x-(m-1))=0$</p><p>$f(i)=a(-1)^i+b(m-1)^i,f(1)=0,f(2)=m(m-1)$</p><p>$f(1)$ç”±äº$1$ä¸$1$ç›¸é‚»ã€‚æ‰€ä»¥ä¸º$0$ã€‚</p><script type="math/tex; mode=display">f(i)=(m-1)^i+(-1)^i(m-1)</script><hr><p>ç„¶å$dfs$ä¸€éæœå› æ•°å¹¶ä¸”ä¸€éå¤„ç†æ¬§æ‹‰å‡½æ•°ã€‚</p><p>BZOJä¸Šçš„æ•°æ®ç»è¿‡åŠ å¼ºï¼Œ n å¯èƒ½æ˜¯ $10^9+7$ çš„å€æ•°ï¼ˆæ²¡æœ‰é€†å…ƒï¼‰ï¼Œè€Œæœ€åè¦é™¤ä»¥ $n$ ï¼Œæ‰€ä»¥éœ€è¦ä¸€äº›ç‰¹æ®Šçš„æŠ€å·§ã€‚</p><ul><li>$MOD=(1e9+7)^2$</li><li>æ­¤æ—¶è¦ç”¨å¿«é€Ÿä¹˜</li><li>ç­”æ¡ˆç­‰äºåœ¨æ¨¡ $10^9+7$ æ„ä¹‰ä¸‹ $\frac{sum}{1e9+7}$ é™¤ä»¥ $\frac{n}{1e9+7}$ çš„ç»“æœã€‚</li><li>éœ€è¦$exgcd$æ±‚$6$åœ¨$(1e9+7)^2$çš„é€†å…ƒã€‚</li></ul><details>  <summary>ä»£ç </summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;ll, ll&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> mk make_pair</span></span><br><span class="line"><span class="keyword">const</span> ll N = <span class="number">1e7</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> ll MOD = <span class="number">1000000007l</span>l;</span><br><span class="line"><span class="keyword">const</span> ll Inv61 = <span class="number">166666668l</span>l;</span><br><span class="line"><span class="keyword">const</span> ll Inv62 = <span class="number">833333345000000041l</span>l;</span><br><span class="line"></span><br><span class="line">ll mod;</span><br><span class="line">ll Inv6;</span><br><span class="line">ll O;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> ll <span class="title">mult</span><span class="params">(ll x, ll y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!O)</span><br><span class="line">        <span class="keyword">return</span> x * y % mod;</span><br><span class="line">    <span class="keyword">return</span> (x * y - (ll)((<span class="keyword">long</span> <span class="keyword">double</span>)x / mod * y) * mod + mod) % mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pcnt, pr[N], npr[N];</span><br><span class="line"><span class="keyword">int</span> mu[N], usum[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Prime_init</span><span class="params">(ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    npr[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    mu[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!npr[i])</span><br><span class="line">            pr[++pcnt] = i, mu[i] = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span> (ll j = <span class="number">1</span>; j &lt;= pcnt &amp;&amp; pr[j] * i &lt;= n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            npr[pr[j] * i] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (i % pr[j] == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                mu[pr[j] * i] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                mu[pr[j] * i] = mu[i] * (<span class="number">-1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        usum[i] = usum[i - <span class="number">1</span>] + mu[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ll k;</span><br><span class="line">ll p[<span class="number">100</span>], e[<span class="number">100</span>];</span><br><span class="line">ll cnt;</span><br><span class="line">ll ans;</span><br><span class="line"><span class="function">ll <span class="title">qpow</span><span class="params">(ll a, ll x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll res = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (x)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &amp; <span class="number">1</span>)</span><br><span class="line">            res = mult(res, a);</span><br><span class="line">        a = mult(a, a);</span><br><span class="line">        x &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">calc</span><span class="params">(ll x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (qpow(k - <span class="number">1</span>, x) + mult((x &amp; <span class="number">1</span> ? mod - <span class="number">1</span> : <span class="number">1</span>), (k - <span class="number">1</span>))) % mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(ll x, ll now, ll phi, ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; cnt)</span><br><span class="line">    &#123;</span><br><span class="line">        ans = (ans + mult(phi % mod, calc(n / now))) % mod;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; phi &lt;&lt; " " &lt;&lt; calc(n / now) &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(x + <span class="number">1</span>, now, phi, n);</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">1</span>; i &lt;= e[x]; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        phi *= (p[x] - (i == <span class="number">1</span>));</span><br><span class="line">        now *= p[x];</span><br><span class="line">        dfs(x + <span class="number">1</span>, now, phi, n);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cnt = <span class="number">0</span>;</span><br><span class="line">    ll tmp = n;</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">2</span>; i * i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (n % i == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ll o = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (n % i == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                n /= i;</span><br><span class="line">                o++;</span><br><span class="line">            &#125;</span><br><span class="line">            p[++cnt] = i;</span><br><span class="line">            e[cnt] = o;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        p[++cnt] = n;</span><br><span class="line">        e[cnt] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, tmp);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(ll n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    k = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (ll i = <span class="number">1</span>, j; i &lt;= n; i = j + <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        j = n / (n / i);</span><br><span class="line">        k = (k + mult(mult(mult(n / i, n / i), n / i + <span class="number">3</span>), (usum[j] - usum[i - <span class="number">1</span>] + mod) % mod)) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    k = mult(Inv6, k);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ll T;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; T;</span><br><span class="line">    Prime_init(<span class="number">1e7</span>);</span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    &#123;</span><br><span class="line">        ll n, a;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; a;</span><br><span class="line">        ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        O = n % MOD ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (O)</span><br><span class="line">            mod = MOD * MOD, Inv6 = Inv62;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            mod = MOD, Inv6 = Inv61;</span><br><span class="line"></span><br><span class="line">        init(a);</span><br><span class="line">        solve(n);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (O)</span><br><span class="line">            ans = mult(ans / MOD, qpow(n / MOD, MOD - <span class="number">2</span>)) % MOD;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ans = mult(ans, qpow(n % MOD, MOD - <span class="number">2</span>));</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;p&gt;ç å­=æ­£ä¸‰è±æŸ±,ä¸‰ä¸ªé¢ä¸Šé¢çš„æ•°å­—$x$,å¿…é¡»æ»¡è¶³$x\in [1,a]$ï¼Œä¸”ç å­ä¸Šé¢çš„æ•°å­—çš„æœ€å¤§å…¬çº¦æ•°è¦æ°å¥½ä¸º1ã€‚ä¸‰æ£±æŸ±å¯ä»¥é€‰æ‹©ç¿»è½¬.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç›¸é‚»çš„ä¸¤ä¸ªç å­å¿…é¡»ä¸åŒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¸¤ä¸²é¡¹é“¾å¦‚æœèƒ½å¤Ÿç»è¿‡æ—‹è½¬å˜æˆä¸€æ ·çš„ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸²é¡¹é“¾å°±æ˜¯ç›¸åŒçš„&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;$n&amp;lt;=10^{14}ï¼Œa&amp;lt;=10^7ï¼ŒT&amp;lt;=10$&lt;br&gt;
    
    </summary>
    
    
    
      <category term="ç½®æ¢ç¾¤" scheme="http://yoursite.com/tags/%E7%BD%AE%E6%8D%A2%E7%BE%A4/"/>
    
  </entry>
  
  <entry>
    <title>CF455D.Serega and Fun</title>
    <link href="http://yoursite.com/2020/10/28/CF455D/"/>
    <id>http://yoursite.com/2020/10/28/CF455D/</id>
    <published>2020-10-28T02:47:00.000Z</published>
    <updated>2020-11-28T07:44:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»™ä½ ä¸€ä¸ªåºåˆ—ï¼Œåœ¨çº¿åœ°æ”¯æŒä¸¤ä¸ªæ“ä½œï¼š</p><ul><li><p>å°†ä¸€ä¸ªåŒºé—´å¾ªç¯ç§»ä½ã€‚</p></li><li><p>æŸ¥è¯¢ä¸€ä¸ªåŒºé—´ä¸­æŸä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ã€‚</p></li></ul><a id="more"></a><p>ä¸¤ä¸ªæ–¹æ³•</p><ul><li>åˆ†å— ç»´æŠ¤å—å†…å…ƒç´ å‡ºç°æ¬¡æ•°ï¼Œä¿®æ”¹å’Œæ›´æ–°ç”¨åŒå‘é˜Ÿåˆ—éƒ½å¾ˆæ˜¾ç„¶ã€‚$O((n+m)\sqrt{n})=1700ms$</li><li>å¹³è¡¡æ ‘ï¼Œç¬¬ä¸€ä¸ªæ“ä½œå¾ˆå¥½è§£å†³ï¼Œå¯¹äºç¬¬äºŒä¸ªæ“ä½œï¼Œé¦–å…ˆæˆ‘ä»¬åªèƒ½ç»´æŠ¤$t_i$è¿™ä¸ªæ•°å­—å¹³è¡¡æ ‘å‡ºç°çš„ç›¸å¯¹ä½ç½®ï¼Œè€Œ<strong>ä¸èƒ½ç»´æŠ¤ç»å¯¹ä½ç½®</strong>ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€å¼€å§‹æ„é€ åŸåºåˆ—çš„å¹³è¡¡æ ‘çš„æ˜ å°„ï¼Œå°±å¯ä»¥çŸ¥é“æŸä¸ªå€¼åœ¨åŸåºåˆ—ç¬¬å‡ ä¸ªä½ç½®ï¼Œè¿™é‡Œéœ€è¦$O(\log n)$ã€‚æˆ‘æƒ³çŸ¥é“$[1,r]$ä¹‹é—´$i$å‡ºç°äº†å‡ æ¬¡ï¼Œå¹³è¡¡æ ‘ä¸Šé€šè¿‡è¿™ä¸ªæŸ¥è¯¢äºŒåˆ†å³å¯ã€‚æ€»å¤æ‚åº¦$O(n+m\log^2 n)=300ms$</li></ul><details>  <summary>å¹³è¡¡æ ‘</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;int, int&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">4e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::mt19937 <span class="title">rnd</span><span class="params">(<span class="built_in">std</span>::chrono::steady_clock::now().time_since_epoch().count())</span></span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">FHQ</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> ls[N], rs[N];</span><br><span class="line">    <span class="keyword">int</span> siz[N], key[N], val[N];</span><br><span class="line">    <span class="keyword">int</span> fa[N];</span><br><span class="line">    <span class="keyword">int</span> cor[N];</span><br><span class="line">    <span class="comment">// ll sum[N];</span></span><br><span class="line">    <span class="keyword">int</span> tcnt;</span><br><span class="line">    <span class="keyword">int</span> root;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Newnode</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        siz[++tcnt] = <span class="number">1</span>;</span><br><span class="line">        val[tcnt] = x;</span><br><span class="line">        key[tcnt] = rnd(); <span class="comment">//ç²¾é«“æ‰€åœ¨</span></span><br><span class="line"></span><br><span class="line">        fa[tcnt] = tcnt;</span><br><span class="line">        ls[tcnt] = rs[tcnt] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> tcnt;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">pushup</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        siz[pos] = siz[ls[pos]] + siz[rs[pos]] + <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// sum[pos] = sum[ls[pos]] + sum[rs[pos]] + val[pos];</span></span><br><span class="line">        ls[pos] ? (fa[ls[pos]] = pos) : <span class="number">0</span>;</span><br><span class="line">        rs[pos] ? (fa[rs[pos]] = pos) : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">split</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> v, <span class="keyword">int</span> &amp;ll, <span class="keyword">int</span> &amp;rr)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!pos)</span><br><span class="line">        &#123;</span><br><span class="line">            ll = <span class="number">0</span>, rr = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (siz[ls[pos]] + <span class="number">1</span> &lt;= v)</span><br><span class="line">        &#123;</span><br><span class="line">            ll = pos;</span><br><span class="line">            split(rs[pos], v - siz[ls[pos]] - <span class="number">1</span>, rs[pos], rr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            rr = pos;</span><br><span class="line">            split(ls[pos], v, ll, ls[pos]);</span><br><span class="line">        &#125;</span><br><span class="line">        fa[ll] = ll, fa[rr] = rr; <span class="comment">//ä¿è¯å¤´èŠ‚ç‚¹</span></span><br><span class="line">        pushup(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">merge</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!l || !r)</span><br><span class="line">            <span class="keyword">return</span> l + r;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (key[l] &lt; key[r])</span><br><span class="line">        &#123;</span><br><span class="line">            rs[l] = merge(rs[l], r);</span><br><span class="line">            pushup(l);</span><br><span class="line">            <span class="keyword">return</span> l;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            ls[r] = merge(l, ls[r]);</span><br><span class="line">            pushup(r);</span><br><span class="line">            <span class="keyword">return</span> r;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// int find(int x)</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     return fa[x] == x ? x : find(fa[x]);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">insert</span><span class="params">(<span class="keyword">int</span> &amp;rt, <span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pos = Newnode(x);</span><br><span class="line">        rt = merge(rt, pos);</span><br><span class="line">        <span class="keyword">return</span> pos;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">kth</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = siz[ls[x]] + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (fa[x] != x)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs[fa[x]] == x)</span><br><span class="line">            &#123;</span><br><span class="line">                res += siz[ls[fa[x]]] + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            x = fa[x];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; t;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> rt[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> k, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> o = rt[k];</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (o)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (t.kth(t.cor[o]) &lt;= r)</span><br><span class="line">        &#123;</span><br><span class="line">            res += t.siz[t.ls[o]] + <span class="number">1</span>;</span><br><span class="line">            o = t.rs[o];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            o = t.ls[o];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> calc(k, r) - calc(k, l - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b, c, d;</span><br><span class="line">    t.split(rt[<span class="number">0</span>], l - <span class="number">1</span>, a, b);</span><br><span class="line">    t.split(b, r - l + <span class="number">1</span>, b, d);</span><br><span class="line">    t.split(b, r - l, b, c);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> k = t.val[c];</span><br><span class="line">    rt[<span class="number">0</span>] = t.merge(a, t.merge(c, t.merge(b, d)));</span><br><span class="line">    <span class="keyword">int</span> ls = calc(k, l - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">int</span> rs = calc(k, r);</span><br><span class="line">    <span class="comment">//cout &lt;&lt; k &lt;&lt; " " &lt;&lt; ls &lt;&lt; " " &lt;&lt; rs &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line">    t.split(rt[k], ls, a, b);</span><br><span class="line">    t.split(b, rs - ls, b, d);</span><br><span class="line">    t.split(b, rs - ls - <span class="number">1</span>, b, c);</span><br><span class="line"></span><br><span class="line">    rt[k] = t.merge(a, t.merge(c, t.merge(b, d)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[N];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//freopen("1", "r", stdin);</span></span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a[i] = <span class="built_in">read</span>();</span><br><span class="line">        <span class="keyword">int</span> x = t.insert(rt[<span class="number">0</span>], a[i]);</span><br><span class="line">        <span class="keyword">int</span> y = t.insert(rt[a[i]], a[i]);</span><br><span class="line">        t.cor[x] = y;</span><br><span class="line">        t.cor[y] = x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> lst = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> q = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">while</span> (q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> op = <span class="built_in">read</span>(), l = <span class="built_in">read</span>(), r = <span class="built_in">read</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (op == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            l = (l + lst - <span class="number">1</span>) % n + <span class="number">1</span>, r = (r + lst - <span class="number">1</span>) % n + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//cout &lt;&lt; op &lt;&lt; " " &lt;&lt; l &lt;&lt; " " &lt;&lt; r &lt;&lt; " " &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">if</span> (l &gt; r)</span><br><span class="line">                swap(l, r);</span><br><span class="line">            <span class="keyword">if</span> (l == r)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            update(l, r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> k = <span class="built_in">read</span>();</span><br><span class="line">            l = (l + lst - <span class="number">1</span>) % n + <span class="number">1</span>, r = (r + lst - <span class="number">1</span>) % n + <span class="number">1</span>, k = (k + lst - <span class="number">1</span>) % n + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; op &lt;&lt; " " &lt;&lt; l &lt;&lt; " " &lt;&lt; r &lt;&lt; " "</span></span><br><span class="line">            <span class="comment">//      &lt;&lt; " " &lt;&lt; k &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">if</span> (l &gt; r)</span><br><span class="line">                swap(l, r);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, lst = query(l, r, k));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details><details>  <summary>åˆ†å—</summary><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ll long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pii pair<span class="meta-string">&lt;ll, int&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> M = <span class="number">400</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>, f = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">while</span> (c &lt; <span class="string">'0'</span> || c &gt; <span class="string">'9'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c == <span class="string">'-'</span>)</span><br><span class="line">            f = <span class="number">-1</span>;</span><br><span class="line">        c = getchar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (c &gt;= <span class="string">'0'</span> &amp;&amp; c &lt;= <span class="string">'9'</span>)</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + c - <span class="string">'0'</span>, c = getchar();</span><br><span class="line">    <span class="keyword">return</span> x * f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Bo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> block, tot, bl[N], br[N], fa[N];</span><br><span class="line">    <span class="keyword">int</span> cnt[M][N];</span><br><span class="line">    <span class="keyword">int</span> a[N];</span><br><span class="line">    <span class="built_in">deque</span>&lt;<span class="keyword">int</span>&gt; q[M];</span><br><span class="line">    ll tag[N];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">replace</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> w)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cnt[x][y] += w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">build</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        block = <span class="built_in">sqrt</span>(n);</span><br><span class="line">        tot = n / block + (n % block != <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tot; i++)</span><br><span class="line">            bl[i] = (i - <span class="number">1</span>) * block + <span class="number">1</span>, br[i] = i * block;</span><br><span class="line"></span><br><span class="line">        br[tot] = n;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">            fa[i] = (i - <span class="number">1</span>) / (block) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tot; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = bl[i]; j &lt;= br[i]; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                q[i].push_back(a[j]);</span><br><span class="line">                replace(i, a[j], <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">work</span><span class="params">(<span class="keyword">int</span> lx, <span class="keyword">int</span> rx, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; le, ri;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= l - bl[lx]; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            le.push(q[lx].front());</span><br><span class="line">            q[lx].pop_front();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= br[rx] - r; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            ri.push(q[rx].back());</span><br><span class="line">            q[rx].pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> u = q[rx].back();</span><br><span class="line">        replace(rx, u, <span class="number">-1</span>);</span><br><span class="line">        q[rx].pop_back();</span><br><span class="line">        replace(lx, u, <span class="number">1</span>);</span><br><span class="line">        q[lx].push_front(u);</span><br><span class="line">        <span class="keyword">while</span> (!le.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            q[lx].push_front(le.top());</span><br><span class="line">            le.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!ri.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            q[rx].push_back(ri.top());</span><br><span class="line">            ri.pop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">calc</span><span class="params">(<span class="keyword">int</span> lx, <span class="keyword">int</span> rx, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; le, ri;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= l - bl[lx]; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            le.push(q[lx].front());</span><br><span class="line">            q[lx].pop_front();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= br[rx] - r; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            ri.push(q[rx].back());</span><br><span class="line">            q[rx].pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> x : q[lx])</span><br><span class="line">            <span class="keyword">if</span> (x == k)</span><br><span class="line">                res++;</span><br><span class="line">        <span class="keyword">if</span> (lx != rx)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> x : q[rx])</span><br><span class="line">                <span class="keyword">if</span> (x == k)</span><br><span class="line">                    res++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (!le.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            q[lx].push_front(le.top());</span><br><span class="line">            le.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (!ri.empty())</span><br><span class="line">        &#123;</span><br><span class="line">            q[rx].push_back(ri.top());</span><br><span class="line">            ri.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fa[l] == fa[r])</span><br><span class="line">        &#123;</span><br><span class="line">            work(fa[l], fa[l], l, r);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> lx = fa[l], rx = fa[r];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = lx; i &lt; rx; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> x = q[i].back();</span><br><span class="line">            q[i].pop_back();</span><br><span class="line">            replace(i, x, <span class="number">-1</span>);</span><br><span class="line">            q[i + <span class="number">1</span>].push_front(x);</span><br><span class="line">            replace(i + <span class="number">1</span>, x, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        work(lx, rx, l, r);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (fa[l] == fa[r])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> calc(fa[l], fa[l], l, r, k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> lx = fa[l], rx = fa[r];</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = lx + <span class="number">1</span>; i &lt; rx; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            res += cnt[i][k];</span><br><span class="line">        &#125;</span><br><span class="line">        res += calc(lx, rx, l, r, k);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; t;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// freopen("1", "r", stdin);</span></span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        t.a[i] = <span class="built_in">read</span>();</span><br><span class="line">    t.build(n);</span><br><span class="line">    <span class="keyword">int</span> q = <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">int</span> lst = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (q--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> op = <span class="built_in">read</span>(), l = <span class="built_in">read</span>(), r = <span class="built_in">read</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (op == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            l = (l + lst - <span class="number">1</span>) % n + <span class="number">1</span>, r = (r + lst - <span class="number">1</span>) % n + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//cout &lt;&lt; op &lt;&lt; " " &lt;&lt; l &lt;&lt; " " &lt;&lt; r &lt;&lt; " " &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">if</span> (l &gt; r)</span><br><span class="line">                swap(l, r);</span><br><span class="line">            <span class="keyword">if</span> (l == r)</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            t.update(l, r);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> k = <span class="built_in">read</span>();</span><br><span class="line">            l = (l + lst - <span class="number">1</span>) % n + <span class="number">1</span>, r = (r + lst - <span class="number">1</span>) % n + <span class="number">1</span>, k = (k + lst - <span class="number">1</span>) % n + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; op &lt;&lt; " " &lt;&lt; l &lt;&lt; " " &lt;&lt; r &lt;&lt; " "</span></span><br><span class="line">            <span class="comment">//      &lt;&lt; " " &lt;&lt; k &lt;&lt; endl;</span></span><br><span class="line">            <span class="keyword">if</span> (l &gt; r)</span><br><span class="line">                swap(l, r);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, lst = t.query(l, r, k));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>  </details>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»™ä½ ä¸€ä¸ªåºåˆ—ï¼Œåœ¨çº¿åœ°æ”¯æŒä¸¤ä¸ªæ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;å°†ä¸€ä¸ªåŒºé—´å¾ªç¯ç§»ä½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æŸ¥è¯¢ä¸€ä¸ªåŒºé—´ä¸­æŸä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="å¹³è¡¡æ ‘" scheme="http://yoursite.com/tags/%E5%B9%B3%E8%A1%A1%E6%A0%91/"/>
    
  </entry>
  
</feed>
